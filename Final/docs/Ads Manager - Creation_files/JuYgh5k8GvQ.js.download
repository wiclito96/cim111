if (self.CavalryLogger) { CavalryLogger.start_js(["YIWd6"]); }

__d("AdsCFUserSettingsReducerUtils",["AdmgrUserSettingsData"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=babelHelpers["extends"]({},a);Object.keys(c).forEach(function(a){var e=c[a];e===b("AdmgrUserSettingsData")[a]?delete d[a]:d[a]=e});return d}e.exports={handleSettingsChange:a}}),null);
__d("AdsBulkEditAdgroupLoggingFieldNames",[],(function(a,b,c,d,e,f){"use strict";a={CALL_TO_ACTION:"call_to_action",CATALOG_ASSET_FORMAT:"catalog_asset_format",CUSTOM_OVERLAY:"custom_overlay",DISPLAY_URL:"display_url",EXISTING_CALL_TO_ACTION:"existing_call_to_action",HEADLINE:"headline",INSTAGRAM_ACTOR:"instagram_actor",LANDING_VIEW:"landing_view",LINK_DESCRIPTION:"link_description",LINK_TOGGLE:"link_toggle",MESSAGE:"message",PAGE_SELECTOR:"page_selector",WEBSITE_URL:"website_url"};e.exports=a}),null);
__d("AdsMessengerVisualEditorLoggerEvents",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CTM_EDIT_PAGE_WELCOME_MESSAGE:"ctm_edit_page_welcome_message",CTM_STANDARD_EDITING_DIALOG_OPEN:"ctm_standard_editing_dialog_open",CTM_CUSTOM_EDITING_DIALOG_OPEN:"ctm_custom_editing_dialog_open",CTM_CREATE_CUSTOM_TEMPLATE_SUCCESS:"create_custom_template_success",CTM_DUPLICATE_CUSTOM_TEMPLATE:"ctm_duplicate_custom_template",CTM_DUPLICATE_CTM_LEAD_GEN:"ctm_duplicate_ctm_lead_gen",CTM_CHANGE_STANDARD_TEMPLATE:"ctm_change_standard_template",CTM_CREATE_CUSTOM_TEMPLATE_FAIL:"create_custom_template_fail",CTM_PREVIEW_MESSAGE_SUCCESS:"ctm_preview_message_success",CTM_PREVIEW_MESSAGE_FAILED:"ctm_preview_message_failed",CTM_CHANGE_STANDARD_TEMPLATE_ICEBREAKER:"ctm_change_standard_template_icebreaker",CTM_SELECT_CUSTOM_WELCOME_MESSAGE:"ctm_select_custom_welcome_message",CTM_SELECT_LEAD_GEN:"ctm_select_lead_gen",CTM_CANCEL_LEAD_GEN_DIALOG:"ctm_cancel_lead_gen_dialog"});e.exports=a}),null);
__d("AdsUEditorAdgroupSetPageWelcomeMessageDataAction",["Laminar","ifRequired"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("ifRequired")("AdsUEditorAdgroupSetPageWelcomeMessageReducerPlugin",function(a){return b("ifRequired")("AdsCFAdgroupDataProvider",function(c){return b("Laminar").__createReducer(a,c,{})})})]},function(){return[]},"ADS_ADGROUP_EDITOR_SET_PAGE_WELCOME_MESSAGE");e.exports=a}),null);
__d("XMessengerVisualEditorPageWelcomeMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/page_welcome_message/",{page_id:{type:"FBID",required:!0},page_welcome_message:{type:"String",required:!0},template_name:{type:"String",required:!0}})}),null);
__d("AdsMessengerPageWelcomeMessageDataManager",["AdsGraphAPI","AdsInterfacesLogger","AdsMessengerPageWelcomeMessageListLoadedAction","AdsMessengerPageWelcomeMessageListLoadingAction","AdsMessengerVisualEditorLoggerEvents","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AsyncRequest","XMessengerVisualEditorPageWelcomeMessageController","promiseDone","promiseLoadObjects"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["id","template_name","page_welcome_message_body","time_created"];a.prototype.getPageWelcomeMessageList=function(a){return b("AdsGraphAPI").get(e.id+".getPageWelcomeMessageList").object("page",a).edge("messenger_ads_page_welcome_messages").get({fields:g})};a.prototype.createCustomTemplate=function(a,c,d,e,f){d=b("XMessengerVisualEditorPageWelcomeMessageController").getURIBuilder().setFBID("page_id",c).setString("page_welcome_message",d).setString("template_name",e).getURI();new(b("AsyncRequest"))().setURI(d).setErrorHandler(function(a){b("AdsInterfacesLogger").log({eventName:b("AdsMessengerVisualEditorLoggerEvents").CTM_CREATE_CUSTOM_TEMPLATE_FAIL})}).setHandler(function(d){b("AdsInterfacesLogger").log({eventName:b("AdsMessengerVisualEditorLoggerEvents").CTM_CREATE_CUSTOM_TEMPLATE_SUCCESS,data:{facebook_page_id:c}}),this.fetchAllPageWelcomeMessageList(new Set([c])),b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:f,adgroupIDs:a,pageWelcomeMessage:JSON.stringify(JSON.parse(d.payload.page_welcome_message))},{line:"75",module:"AdsMessengerPageWelcomeMessageDataManager.js"})}.bind(this)).send()};a.prototype.fetchAllPageWelcomeMessageList=function(a){b("AdsMessengerPageWelcomeMessageListLoadingAction").dispatch({pageIDs:a},{line:"87",module:"AdsMessengerPageWelcomeMessageDataManager.js"});var c=new Map();a.forEach(function(a){return c.set(a,this.getPageWelcomeMessageList(a))}.bind(this));b("promiseDone")(b("promiseLoadObjects")(c),function(a){b("AdsMessengerPageWelcomeMessageListLoadedAction").dispatch({pageWelcomeMessageList:a},{line:"93",module:"AdsMessengerPageWelcomeMessageDataManager.js"})})};function a(){}e.exports=new a()}),null);
__d("AdsMessengerPageWelcomeMessageListDataProvider",["AdsMessengerPageWelcomeMessageListDataProviderPlugin","Laminar"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPageWelcomeMessageListDataProviderPlugin"),"AdsMessengerPageWelcomeMessageListDataProviderPlugin")}),null);
__d("AdsMessengerPageWelcomeMessageListLoadedReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.merge(b.pageWelcomeMessageList)}};e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListLoadedAction",["Laminar","AdsMessengerPageWelcomeMessageListLoadedReducerPlugin","AdsMessengerPageWelcomeMessageListDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPageWelcomeMessageListLoadedReducerPlugin"),b("AdsMessengerPageWelcomeMessageListDataProvider"),{})]},function(){return[]},"ADS_MESSENGER_PAGE_WELCOME_MESSAGE_LIST.LOADED");e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListLoadingReducerPlugin",["mapSet"],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,c){return a.merge(b("mapSet")(c.pageIDs,function(b){return[b,a.get(b).loading()]}))}};e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListLoadingAction",["Laminar","AdsMessengerPageWelcomeMessageListLoadingReducerPlugin","AdsMessengerPageWelcomeMessageListDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPageWelcomeMessageListLoadingReducerPlugin"),b("AdsMessengerPageWelcomeMessageListDataProvider"),{})]},function(){return[]},"ADS_MESSENGER_PAGE_WELCOME_MESSAGE_LIST.LOADING");e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListDataProviderPlugin",["AdsMessengerPageWelcomeMessageDataManager","AdsMessengerPageWelcomeMessageListLoadedAction","AdsMessengerPageWelcomeMessageListLoadingAction","LoadObjectMap","promiseDone","promiseLoadObjectsFromKeys"],(function(a,b,c,d,e,f){"use strict";a={initialState:b("LoadObjectMap").create(function(a){b("AdsMessengerPageWelcomeMessageListLoadingAction").dispatch({pageIDs:a},{line:"31",module:"AdsMessengerPageWelcomeMessageListDataProviderPlugin.js"}),b("promiseDone")(b("promiseLoadObjectsFromKeys")(a,b("AdsMessengerPageWelcomeMessageDataManager").getPageWelcomeMessageList),function(a){b("AdsMessengerPageWelcomeMessageListLoadedAction").dispatch({pageWelcomeMessageList:a},{line:"38",module:"AdsMessengerPageWelcomeMessageListDataProviderPlugin.js"})})})};e.exports=a}),null);
__d("AdsMessengerVideoPreviewFetchErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_PREVIEW_FETCH_ERROR");e.exports=a}),null);
__d("AdsMessengerVideoPreviewFetchSuccessDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_PREVIEW_FETCH_SUCCESS");e.exports=a}),null);
__d("XMessengerVideoPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/ads/video/fetch/",{video_key:{type:"String",required:!0}})}),null);
__d("AdsMessengerVideoPreviewDataManager",["AdsMessengerVideoPreviewFetchErrorDataAction","AdsMessengerVideoPreviewFetchSuccessDataAction","AsyncRequest","XMessengerVideoPreviewController"],(function(a,b,c,d,e,f){"use strict";a.prototype.getVideoPreview=function(a){var c=b("XMessengerVideoPreviewController").getURIBuilder().setString("video_key",a).getURI();c=new(b("AsyncRequest"))().setURI(c).setAllowCrossOrigin(!0).setErrorHandler(function(c){b("AdsMessengerVideoPreviewFetchErrorDataAction").dispatch({data:{key:a,error:c}},{line:"26",module:"AdsMessengerVideoPreviewDataManager.js"})}).setHandler(function(c){b("AdsMessengerVideoPreviewFetchSuccessDataAction").dispatch({data:{key:a,url:c.payload.url}},{line:"31",module:"AdsMessengerVideoPreviewDataManager.js"})});c.send()};function a(){}e.exports=new a()}),null);
__d("AdsMessengerVideoUploadErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_UPLOAD_ERROR");e.exports=a}),null);
__d("AdsMessengerVideoUploadSuccessDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_UPLOAD_SUCCESS");e.exports=a}),null);
__d("XMessengerVisualEditorVideoUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/ads/visual_editor/video/",{})}),null);
__d("AdsMessengerVideoUploader",["AdsMessengerVideoUploadErrorDataAction","AdsMessengerVideoUploadSuccessDataAction","AsyncRequest","XMessengerVisualEditorVideoUploadController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.uploadVideoWithVideoIDMap=function(a,b,c){__p&&__p();var d=new FileReader();d.readAsDataURL(a);d.onloadend=function(){var a=new FormData(),e=d.result&&d.result.split(",");e=e&&e[1];a.append("video_string",e);a.append("async_response","true");a.append("page_id",b);a.append("videox_id",c);this.$1(a)}.bind(this)};a.prototype.$1=function(a){var c=b("XMessengerVisualEditorVideoUploadController").getURIBuilder().getURI();c=new(b("AsyncRequest"))().setURI(c).setRawData(a).setStatusElement(null).setAllowCrossOrigin(!0).setErrorHandler(function(a){return b("AdsMessengerVideoUploadErrorDataAction").dispatch({error:a},{line:"47",module:"AdsMessengerVideoUploader.js"})}).setHandler(function(a){b("AdsMessengerVideoUploadSuccessDataAction").dispatch({videoID:a.payload.video_fbid},{line:"53",module:"AdsMessengerVideoUploader.js"})});c.send()};function a(){}e.exports=new a()}),null);
__d("AdsMessengerVideoUploadDataManager",["AdsAccountStore","AdsMessengerVideoUploader","AdsMessengerVideoUploadErrorDataAction","AdsVideoUploader","AdsVideoUploadEvents","VideoUploadFile","WebApiApplication"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="visual_editor";a.prototype.uploadVideo=function(a,c){c=this.getVideoUploader(a,c);a=b("VideoUploadFile").fromFile(a);c.uploadMessengerVideo(a)};a.prototype.$1=function(a,c){a=c&&JSON.stringify(c);b("AdsMessengerVideoUploadErrorDataAction").dispatch({error:new Error(a)},{line:"31",module:"AdsMessengerVideoUploadDataManager.js"})};a.prototype.getVideoUploader=function(a,c){var d=new(b("AdsVideoUploader"))(b("AdsAccountStore").getSelectedAccountIDX(),b("WebApiApplication").getAccessToken(),g);d.subscribe(b("AdsVideoUploadEvents").UPLOAD_ERROR,this.$1.bind(this));d.subscribe(b("AdsVideoUploadEvents").UPLOAD_SUCCESS,function(a,c){return function(d,e){b("AdsMessengerVideoUploader").uploadVideoWithVideoIDMap(a,c,e)}}(a,c));return d};function a(){}e.exports=new a()}),null);
__d("AdsMessengerVideoPreviewStore",["AdsDataAtom","AdsMessengerVideoPreviewDataManager","AdsMessengerVideoPreviewFetchErrorDataActionFlux","AdsMessengerVideoPreviewFetchSuccessDataActionFlux","FluxLoadObjectStore","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("gkx")("779516");g=babelHelpers.inherits(a,b("FluxLoadObjectStore"));g&&g.prototype;a.prototype.__getActionTypes=function(){return h?[b("AdsMessengerVideoPreviewFetchErrorDataActionFlux").actionType,b("AdsMessengerVideoPreviewFetchSuccessDataActionFlux").actionType]:null};a.prototype.reduce=function(a,c){c=c.action;var d=c.data&&c.data.key;switch(c.actionType){case b("AdsMessengerVideoPreviewFetchSuccessDataActionFlux").actionType:var e=c.data.url;return this.__handleOne(a,d,{url:e});case b("AdsMessengerVideoPreviewFetchErrorDataActionFlux").actionType:e=c.data.error;return this.__handleOne(a,d,{error:e});default:return a}};a.prototype.__load=function(a){a&&b("AdsMessengerVideoPreviewDataManager").getVideoPreview(a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("AdsMessengerVideoUploadResetDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="MESSENGER.VIDEO_UPLOAD_RESET";e.exports={actionType:a}}),null);
__d("AdsMessengerVideoStore",["AdsDataAtom","AdsMessengerVideoUploadDataManager","AdsMessengerVideoUploadErrorDataActionFlux","AdsMessengerVideoUploadResetDataActionFlux","AdsMessengerVideoUploadStartDataActionFlux","AdsMessengerVideoUploadSuccessDataActionFlux","FluxReduceStore","LoadObject","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("gkx")("779516");c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("AdsDataAtom"))}a.prototype.getInitialState=function(){return b("LoadObject").empty()};a.prototype.__getActionTypes=function(){return h?[b("AdsMessengerVideoUploadErrorDataActionFlux").actionType,b("AdsMessengerVideoUploadResetDataActionFlux").actionType,b("AdsMessengerVideoUploadStartDataActionFlux").actionType,b("AdsMessengerVideoUploadSuccessDataActionFlux").actionType]:null};a.prototype.reduce=function(a,c){c=c.action;switch(c.actionType){case b("AdsMessengerVideoUploadResetDataActionFlux").actionType:return b("LoadObject").empty();case b("AdsMessengerVideoUploadStartDataActionFlux").actionType:this.$AdsMessengerVideoStore1(c.videoFile,c.pageID);return b("LoadObject").loading();case b("AdsMessengerVideoUploadSuccessDataActionFlux").actionType:return b("LoadObject").withValue({videoID:c.videoID});case b("AdsMessengerVideoUploadErrorDataActionFlux").actionType:return b("LoadObject").withError(new Error(JSON.stringify(this.$AdsMessengerVideoStore2(c.error.message))));default:return a}};a.prototype.$AdsMessengerVideoStore2=function(a){a=JSON.parse(a);a=a&&a.message;a=a&&JSON.parse(a);a=a&&a.error;var b;a&&(b={error_code:a.error_subcode,error_title:a.error_user_title,error_message:a.error_user_msg});return{video_api:b}};a.prototype.$AdsMessengerVideoStore1=function(a,c){a&&c&&b("AdsMessengerVideoUploadDataManager").uploadVideo(a,c)};a.__moduleID=e.id;e.exports=new a()}),null);
__d("AdsUEditorAdgroupSetEnableDirectInstallDataAction",["Laminar","ifRequired"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("ifRequired")("AdsUEditorAdgroupSetEnableDirectInstallReducerPlugin",function(a){return b("ifRequired")("AdsCFAdgroupDataProvider",function(c){return b("Laminar").__createReducer(a,c,{})})})]},function(){return[]},"ADS_ADGROUP_EDITOR_SET_ENABLE_DIRECT_INSTALL");e.exports=a}),null);
__d("AdsUEditorMessengerContentEditorSelectors",["AdsAccountCapabilities","AdsAccountUtils","AdsAPIAdgroupPaths","AdsBulkValueUtils","AdsMessengerDataModelUtils","AdsMessengerJSONMediaFormatType","AdsMessengerJSONPaths","AdsMessengerPageWelcomeMessageListDataProvider","AdsMessengerUtils","AdsMessengerVideoPreviewStore","AdsMessengerVideoStore","AdsMessengerVisualEditorLandingScreenType","AdsMessengerVisualEditorUtils","AdsUEditorAdgroupBulkSelectors","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AdsUEditorHostIDs","AdsUEditorMessengerVisualEditorQESelector","AdsUnifiedCreativeAPIFields","AdsUniformValue","MessengerContentEditorSurface","adsCreateSelector","adsCreateStoreSelector","adsCreateStructuredSelector","adsUEditorAccountSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorSelectedAdgroupIDsSelector","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsUEditorMessengerVisualEditorQESelector").AdsMessengerVisualEditorIsRedesignSelector,h=b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageID),i=b("AdsUEditorAdgroupBulkSelectors").errorMessageSelectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage),j=b("AdsUEditorAdgroupBulkSelectors").errorMessageSpecSelectorByPath(b("AdsAPIAdgroupPaths").CREATIVE.MESSENGER_SPONSORED_MESSAGE),k=b("AdsUEditorAdgroupBulkSelectors").selectorByPath(b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_ID),l=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage),h],function(a,c,d){a=w(a);c=c instanceof b("AdsUniformValue")?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(c):null;d=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(d,null);c||(c=b("AdsMessengerUtils").getLastUsedPageWelcomeMessage(d));if(!c)return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").VISUAL_EDITOR,a);else try{return JSON.parse(c)}catch(c){return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").VISUAL_EDITOR,a)}},{name:e.id+".adsUEditorPageWelcomeMessageSelector"}),m=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("AdsUEditorAdgroupBulkSelectors").selectorByPath(b("AdsAPIAdgroupPaths").CREATIVE.MESSENGER_SPONSORED_MESSAGE)],function(a,c){c=c instanceof b("AdsUniformValue")?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(c):null;a=w(a);var d=k;d=d instanceof b("AdsUniformValue")?d.getValue():null;if(!c)return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").SPONSORED_MESSAGES,a);else try{return JSON.parse(c)}catch(c){return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").SPONSORED_MESSAGES,a)}},{name:e.id+".adsUEditorMessengerSponsoredMessageSelector"}),n=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a,c){return c.every(function(a){return b("AdsMessengerUtils").isMessengerSponsoredMessageSelected(a.campaign)})},{name:e.id+".isMessengerSponsoredMessageSelector"});function o(a,c,d){__p&&__p();var e={videoID:null,videoURL:null,isLoading:!1,videoErrorSpec:null};if(d)return e;d=c instanceof b("AdsUniformValue")&&c.getValue();if(!d)return e;if(b("AdsMessengerDataModelUtils").getMediaFormat(a)!==b("AdsMessengerJSONMediaFormatType").VIDEO)return e;c=b("AdsMessengerVideoStore").getState();if(!c.isEmpty())return p(c,d);c=b("AdsMessengerDataModelUtils").getVideoID(a);return!c?e:babelHelpers["extends"]({},q(c,d),{videoID:c,videoErrorSpec:null})}function p(a,b){__p&&__p();var c=r(a),d=a.isLoading(),e={videoID:null,videoURL:null,isLoading:d,videoErrorSpec:c};if(!a.hasValue())return e;a=a.getValue();if(!a)return e;a=a.videoID;if(!a)return e;e=q(a,b);b=e.videoURL;e=e.isLoading;return{videoID:a,videoURL:b,isLoading:d||e,videoErrorSpec:c}}function q(a,c){a=b("AdsMessengerUtils").getMessengerVideoKey(a,c);c=b("AdsMessengerVideoPreviewStore").get(a);a=c.getValue();return{videoURL:a?a.url:null,isLoading:c.isLoading()}}function r(a){if(!a.hasError())return null;a=b("getByPath")(a.getError(),["message"]);return a?JSON.parse(a):null}a=b("adsCreateStoreSelector")(function(a){return[].concat(m.getStores(a),l.getStores(a),s.getStores(a),h.getStores(a),b("adsUEditorAccountSelector").getStores(a),i.getStores(a),n.getStores(a),k.getStores(a),j.getStores(a),w.getStores(a),g.getStores(a),[b("AdsMessengerVideoStore"),b("AdsMessengerVideoPreviewStore")])},function(a){var c=n(a),d=c?m(a):l(a),e=c?k(a):h(a),f=b("adsUEditorAccountSelector")(a),p=c?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(j(a)):b("AdsBulkValueUtils").getUniformValue_DEPRECATED(i(a),null),q=w(a),r=b("AdsAccountUtils").hasCapability(f,b("AdsAccountCapabilities").API_VALIDATIONS_FOR_SPONSORED_MESSAGES),s=o(d,e,c),t=s.videoID,u=s.videoURL,v=s.isLoading;s=s.videoErrorSpec;s=s||p;p=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(e,null);p=!!b("AdsMessengerUtils").getIsMessengerPlatformBotGetStartedEnabled(p);var x=!1;c||(x=g(a));return{accountID:f.account_id,canUseJSONInSponsoredMessages:r,errorSpec:s,isLoading:v,isNewContent:!0,isVisualEditorRedesign:x,json:d,pageID:e,videoID:t,videoURL:u,isSponsoredMessage:c,defaultFormatType:q,isGetStartedEnabled:p}},e.id+".adsUEditorMessengerVisualEditorSelector");c=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("adsUEditorSelectedAdgroupIDsSelector"),a],function(a,b,c){return{accountID:c.accountID,canUseJSONInSponsoredMessages:c.canUseJSONInSponsoredMessages,defaultFormatType:c.defaultFormatType,errorSpec:c.errorSpec,ids:b,isLoading:c.isLoading,isNewContent:!0,isSuggestedReply:!0,json:c.json,pageID:c.pageID,videoID:c.videoID,videoURL:c.videoURL,isSponsoredMessage:c.isSponsoredMessage,isGetStartedEnabled:c.isGetStartedEnabled&&!c.isSponsoredMessage}},{name:e.id+".adsUEditorMessengerContentEditorSelector"});d=b("adsCreateSelector")([b("adsUEditorAccountSelector"),a,b("adsUEditorSelectedAdgroupIDsSelector"),b("adsUEditorAdObjectsForSelectedAdgroupsSelector"),h],function(a,c,d,e,f){return{accountID:a.account_id,defaultFormatType:c.defaultFormatType,errorSpec:c.errorSpec,ids:d,isGetStartedEnabled:c.isGetStartedEnabled,isMessengerInlineVisualEditorEnabled:!b("AdsMessengerUtils").isMessagesInlineVisualEditorDisabled(a,e),isMessengerVisualEditorVideoEnabled:!0,isNewContent:!0,isOnlyMessengerPromotedObjectType:b("AdsMessengerUtils").isOnlyMessengerPromotedObjectType(e),message:JSON.stringify(c.json),pageID:b("AdsBulkValueUtils").getUniformValue_DEPRECATED(c.pageID)}},{name:e.id+".adsUEditorMessengerContentFieldSelector"});f=b("adsCreateSelector")([b("adsUEditorAccountSelector")],function(a){return b("AdsAccountUtils").hasCapability(a,b("AdsAccountCapabilities").MESSENGER_ADS_VISUAL_EDITOR_REDESIGN)},{name:e.id+".isVisualEditorRedesignSelector"});var s=b("adsCreateSelector")([b("adsUEditorAccountSelector"),n,g,h],function(a,b,c,d){a=!1;b||(a=c);return{isNewContent:!0,isSponsoredMessage:b,isVisualEditorRedesign:a}},{name:e.id+".adsUEditorVisualEditorContentSelector"}),t=b("adsCreateStructuredSelector")({welcomeMessageList:b("AdsMessengerPageWelcomeMessageListDataProvider").toFluxSelector()},e.id+".pageWelcomeMessageListSelector"),u=b("adsCreateSelector")([h,t],function(a){a=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(a,null);var c=!1,d=null;if(!a)return{customTemplatesList:d,isCustomTemplatesListLoading:c};a=t().welcomeMessageList.get(a);c=a.isLoading();c||(d=a.getValue(),d&&(d=d.data.filter(function(a){return a&&a.template_name&&a.time_created&&a.page_welcome_message_body})));return{customTemplatesList:d,isCustomTemplatesListLoading:c}},{name:e.id+".customTemplatesListSelector"}),v=b("adsCreateStoreSelector")(function(a){return[].concat(l.getStores(a),h.getStores(a),[b("AdsMessengerVideoStore"),b("AdsMessengerVideoPreviewStore")])},function(a){var b=l(a);a=h(a);return o(b,a,!1)},e.id+".AdsUEditorMessengerExperienceVideoSelector");v=b("adsCreateSelector")([b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage),v,b("adsUEditorSelectedAdgroupIDsSelector"),h,u],function(a,c,d,e,f){__p&&__p();a=a instanceof b("AdsUniformValue")?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(a):null;e=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(e,null);var g=null,h=null,i=b("AdsMessengerVisualEditorLandingScreenType").WELCOME_MESSAGE;if(a){var j=null;try{j=JSON.parse(a)}catch(c){a=JSON.stringify(b("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(e)),b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:b("AdsUEditorHostIDs").CREATION,adgroupIDs:d,pageWelcomeMessage:a},{line:"608",module:"AdsUEditorMessengerContentEditorSelectors.js"})}if(j!==null){var k=b("getByPath")(j,b("AdsMessengerJSONPaths").TEMPLATE_ID),l=f.customTemplatesList;l&&l.some(function(a){return a.id===k})&&(g=l.find(function(a){return a.id===k}),h=k);i=b("AdsMessengerDataModelUtils").getLandingScreenType(j)}}else{l=b("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(e);a=JSON.stringify(l);b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:b("AdsUEditorHostIDs").CREATION,adgroupIDs:d,pageWelcomeMessage:a},{line:"638",module:"AdsUEditorMessengerContentEditorSelectors.js"})}return babelHelpers["extends"]({},f,{isVideoLoading:c.isLoading,landingScreenType:i,selectedTemplate:g,selectedTemplateID:h},c,{welcomeMessage:a})},{name:e.id+".AdsUEditorVisualEditorRedesignWelcomMessageSelector"});u=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("adsUEditorSelectedAdgroupIDsSelector"),h,v,i],function(a,c,d,e,f){d=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(d,null);f=e.videoErrorSpec||b("AdsBulkValueUtils").getUniformValueOrDefault(f,null);var g=b("AdsAccountUtils").hasCapability(a,b("AdsAccountCapabilities").CTM_ADS_PARTIAL_AUTOMATED_CREATION),h=b("AdsAccountUtils").hasCapability(a,b("AdsAccountCapabilities").CTM_ADS_PARTIAL_AUTOMATED_CREATION_BETA),i=b("AdsMessengerUtils").getIsMessengerPlatformBotGetStartedEnabled(d);return babelHelpers["extends"]({},e,{accountID:a.account_id,adgroupIDs:c,errorSpec:f,isCTMLeadGenBetaDesign:h,isCTMLeadGenEnabled:g,isGetStartedEnabled:!!i,pageID:d})},{name:e.id+".adsUEditorMessengerExperienceEditorSelector"});var w=b("adsCreateSelector")([b("adsUEditorAccountSelector")],function(a){return b("AdsMessengerJSONMediaFormatType").TEXT},{name:e.id+".adsUEditorVisualEditorDefaultJSONFormatSelector"});e.exports={adsUEditorPageWelcomeMessageSelector:l,adsUEditorMessengerContentEditorSelector:c,adsUEditorMessengerContentFieldSelector:d,adsUEditorMessengerExperienceEditorSelector:u,adsUEditorMessengerVisualEditorSelector:a,adsUEditorVisualEditorContentSelector:s,isVisualEditorRedesignSelector:f}}),null);
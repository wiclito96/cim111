if (self.CavalryLogger) { CavalryLogger.start_js(["po20t"]); }

__d("AdsImageCropperIconContainer.react",["invariant","AdsFluxMixinMigrationUtils","AdsImageCollection","AdsImageCollectionViews","AdsImageIDClasses","AdsImageInfoStore","AdsImageLegacy","AdsImageLibraryUtils","AdsInterfacesLogEvents","AdsInterfacesLogger","Bootloader","JSResource","Link.react","LoadingDialog.react","LoadObject","Placeholder.react","React","ReactComponentWithPureRenderMixin","ReactFragment","StoreAndPropBasedStateMixin","immutable","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("AdsImageIDClasses").AdsImageID;c=b("React").PropTypes;var h=b("lazyLoadComponent")(b("JSResource")("AdsImageCropperDialogContainer.react").__setRef("AdsImageCropperIconContainer.react"));d=b("AdsFluxMixinMigrationUtils").createContainer({propTypes:{accountID:c.string,adlabel:c.string,canSetPlatformCustomImage:c.bool,cropIcon:c.node.isRequired,crops:c.object,disabledSpecs:c.arrayOf(c.object),image:c.instanceOf(b("AdsImageLegacy")),imageCollection:c.instanceOf(b("AdsImageCollection")),imageID:c.instanceOf(a),imageSpecs:c.arrayOf(c.object).isRequired,isSingleCropMode:c.bool,isUsingPACPhase2:c.bool,replaceImagesInCollection:c.bool,selectedPlacement:c.string,onConfirmCropping:c.func.isRequired},getDefaultProps:function(){return{replaceImagesInCollection:!0}},getInitialState:function(){return{showCropper:!1}},statics:{stores:[b("AdsImageInfoStore")],calculateState:function(a,c){c.imageID||c.image||g(0,724);a=c.image?b("LoadObject").withValue(c.image):c.imageID?b("AdsImageInfoStore").getFullSizeLegacyImage_DEPRECATED(c.imageID,c.crops):null;return{imageLoadObject:a}}},UNSAFE_componentWillMount:function(){this.props.replaceImagesInCollection&&this.props.imageCollection!=null&&b("AdsImageLibraryUtils").fetchImagesForAccount(this.props.imageCollection,{accountId:this.props.accountID})},_bootloadDialog:function(){b("Bootloader").loadModules(["AdsImageCropperDialogContainer.react"],function(){},"AdsImageCropperIconContainer.react")},render:function(){return b("React").createElement("span",null,b("React").createElement(b("Link.react"),{onClick:this._onCropClick,onMouseEnter:this._bootloadDialog},this.props.cropIcon),this.renderLayers())},renderLayers:function(){__p&&__p();if(!this.state.showCropper)return null;var a=this.state.imageLoadObject;a=a&&a.hasValue()?a.getValueEnforcing():null;if(!a)return null;a=a.toJSON();var c=this.props.imageCollection&&this.props.imageCollection.getImages(b("AdsImageCollectionViews").views.ALL).map(function(a){return a.toJSON()}).filter(function(a){return a.url&&a.hash}),d=this.props.selectedPlacement;if(!d){var e=this.props.imageSpecs.find(function(a){return!this.props.disabledSpecs||!this.props.disabledSpecs.some(function(b){return a.cropKey===b.cropKey&&a.placement===b.placement})}.bind(this));d=e&&e.placement}e=b("immutable").Set(this.props.imageSpecs.map(function(a){return a.placement}));e=b("React").createElement(b("Placeholder.react"),{delayMs:1e3,fallback:b("React").createElement(b("LoadingDialog.react"),null)},b("React").createElement(h,{accountID:this.props.accountID,canSetPlatformCustomImage:this.props.canSetPlatformCustomImage,disabledSpecs:this.props.disabledSpecs,image:a,imageSpecs:this.props.imageSpecs,isSingleCropMode:this.props.isSingleCropMode||this.props.isUsingPACPhase2!==!1&&e.size===1,libraryImages:c,platformCustomizations:a.platformImageObjects,selectedPlacement:d,suppressValidationError:!0,onClose:this._hideCropper,onSelect:this._onConfirmCropping}));return b("ReactFragment").create({cropperDialog:e})},_hideCropper:function(){this.setState({showCropper:!1}),b("AdsInterfacesLogger").log({eventName:"crop_image_dialog_hide",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},_onConfirmCropping:function(a){var c=new(b("AdsImageLegacy"))(a),d=c.getCrops();this.setState({showCropper:!1},function(){this.props.onConfirmCropping(c,d,this.props.adlabel)}.bind(this));b("AdsInterfacesLogger").log({eventName:"crop_image_dialog_confirm",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},_onCropClick:function(){this.setState({showCropper:!0}),b("AdsInterfacesLogger").log({eventName:"crop_image_dialog_show",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})}},b("AdsFluxMixinMigrationUtils").createStoreAndPropBasedStateMixin(b("StoreAndPropBasedStateMixin"),b("ReactComponentWithPureRenderMixin")),{name:e.id,withProps:!0});e.exports=d}),null);
__d("AdsImageValidationAdImageValidationNoticeShownAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"ADS_IMAGE_VALIDATION.AD_IMAGE_VALIDATION_NOTICE_SHOWN");e.exports=a}),null);
__d("AdsImageValidationAdImageValidationToolUseAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"ADS_IMAGE_VALIDATION.AD_IMAGE_VALIDATION_TOOL_USE");e.exports=a}),null);
__d("AdsCreativeImageTextOverlayDialog.react",["cssVar","cx","fbt","invariant","ix","AdInterfacesAppNames","AdsArrowedContainer.react","AdsImageValidationAdImageValidationNoticeShownAction","AdsImageValidationAdImageValidationToolUseAction","CenteredContainer.react","Event","Image.react","ImageBlock.react","Layout.react","Link.react","List.react","React","SUIBusinessTheme","SUIText.react","XUIDialog.react","XUIDialogButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","emptyFunction","emptyObject"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m=b("Layout.react").Column;c=b("React").PropTypes;var n=5;d=babelHelpers.inherits(a,b("React").PureComponent);l=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=l.constructor).call.apply(a,[this].concat(e)),this.$2=function(a,b){return{textValidationToolShown:a.dialogShown!==b.dialogShown?b.dialogShown:!!this.state&&this.state.textValidationToolShown,currentImageIndex:0,boxesSelected:b.preselectedBoxes[0]||this.$3(),isMouseDown:!1,cellState:!1,visitedBoxesDuringMouseDown:{}}}.bind(this),this.renderLayers=function(){return b("React").createElement(b("XUIDialog.react"),{fixedTopPosition:40,layerHideOnBlur:!1,modal:!0,shown:this.state.textValidationToolShown,width:800,key:"textValidationDialog"},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},i._("Text Validation Tool")),b("React").createElement(b("XUIDialogBody.react"),{useCustomPadding:!0},this.props.readOnly?null:this.$5(),b("React").createElement(b("Layout.react"),{className:"_f_"},b("React").createElement(m,{className:"_g0 _3-90"},b("React").createElement(b("CenteredContainer.react"),null,this.$6(),this.$7())),b("React").createElement(m,{className:"_g1 _3-8t"},this.$8()))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:i._("Done"),use:"confirm",onClick:this.$9})))}.bind(this),this.$4=function(){this.props.images.length>0&&this.$11(0)}.bind(this),this.$9=function(){this.setState({textValidationToolShown:!1},this.props.onHide)}.bind(this),this.$5=function(){return b("React").createElement(b("ImageBlock.react"),{className:"_3-8t _3-8q"},b("React").createElement(b("Image.react"),{className:"_3-8u",src:k("22946")}),i._("Ad images with text that takes up more than 20\u0025 of the image may not be approved. {Learn more about Facebook's Advertising Guidelines}.",[i._param("Learn more about Facebook's Advertising Guidelines",b("React").createElement(b("Link.react"),{href:"/help/468870969814641/",target:"_blank"},i._("Learn more about Facebook's Advertising Guidelines")))]))},this.$8=function(){return b("React").createElement("div",null,this.props.readOnly?this.$18():this.$19(),this.props.readOnly?this.$20():this.$21())}.bind(this),this.$20=function(){return b("React").createElement("div",{className:"_3r0b"},b("React").createElement(b("SUIText.react"),{display:"block",size:"meta1",theme:b("SUIBusinessTheme")},i._("Ad images with more than 20\u0025 text may not be approved.")),b("React").createElement(b("SUIText.react"),{className:"_3-8q",display:"block",size:"meta1",theme:b("SUIBusinessTheme")},i._("Learn more about {=Facebook's Advertising Guidelines}.",[i._param("=Facebook's Advertising Guidelines",b("React").createElement(b("Link.react"),{href:"/help/468870969814641/",target:"_blank"},b("React").createElement(b("SUIText.react"),{size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},i._("Facebook's Advertising Guidelines"))))])))},this.$22=function(){return this.state.boxesSelected.filter(function(a){return!!a}).length}.bind(this),this.$17=function(){this.$11(this.state.currentImageIndex+1)}.bind(this),this.$16=function(){this.$11(this.state.currentImageIndex-1)}.bind(this),this.$10=function(){if(this.props.readOnly)return;if(!this.state.isMouseDown)return;this.setState({isMouseDown:!1,visitedBoxesDuringMouseDown:{}})}.bind(this),this.state=this.$2(b("emptyObject"),this.props),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$2(this.props,a))};a.prototype.render=function(){return b("React").Children.count(this.props.children)===0?b("React").createElement("span",null,this.renderLayers()):b("React").createElement("span",null,b("React").createElement(b("Link.react"),{onClick:this.$4},this.props.children),this.renderLayers())};a.prototype.componentDidMount=function(){this.$1=b("Event").listen(document,"mouseup",this.$10),b("AdsImageValidationAdImageValidationNoticeShownAction").dispatch({images:this.props.images.map(function(a){return a.getUrl()})},{line:"167",module:"AdsCreativeImageTextOverlayDialog.react.js"})};a.prototype.componentWillUnmount=function(){this.$1.remove(),this.$1=null};a.prototype.$3=function(){var a=[];for(var b=0;b<n*n;++b)a[b]=!1;return a};a.prototype.$12=function(a){var c=this.$13(this.state.currentImageIndex);return!c?null:b("React").createElement(b("Image.react"),{src:c,width:a})};a.prototype.$13=function(a){if(a>=this.props.images.length)return null;a=this.props.images[a];if(!a.isStockImage())return a.getUrl();a.getFullSizeUrl()!==null||j(0,5031);return a.getFullSizeUrl()};a.prototype.$6=function(){__p&&__p();if(this.state.currentImageIndex>=this.props.images.length)return null;var a=this.props.images[this.state.currentImageIndex],c=+"480",d=+"360";c=c/a.getWidth();a.getHeight()*c>=d&&(c=d/a.getHeight());d=[];for(var e=0;e<n;++e){var f=[];for(var g=0;g<n;++g){var h=e*n+g;f.push(b("React").createElement("td",{className:(this.state.boxesSelected[h]?"_g2":"")+(!this.state.boxesSelected[h]&&this.props.readOnly?" _ily":"")+(!this.state.boxesSelected[h]&&!this.props.readOnly?" _ilz":"")+(this.state.boxesSelected[h]&&!this.props.readOnly?" _5e9c":"")+(!this.state.boxesSelected[h]&&!this.props.readOnly?" _5e9d":"")+" _ge",key:g,onMouseDown:this.$14.bind(this,e,g),onMouseMove:this.$15.bind(this,e,g)}))}d.push(b("React").createElement("tr",{key:e},f))}h=a.getWidth()*c;g=a.getHeight()*c;f=this.state.currentImageIndex<this.props.images.length-1;e=this.state.currentImageIndex>0;return b("React").createElement(b("AdsArrowedContainer.react"),{className:!f&&!e?"_3-98":"",onDecrement:e?this.$16:null,onIncrement:f?this.$17:null},b("React").createElement("div",{style:{height:g+"px"}},this.$12(h),b("React").createElement("table",{className:"_gj",style:{height:g+n+"px"}},b("React").createElement("tbody",null,d))))};a.prototype.$7=function(){if(this.props.images.length<=1)return null;var a=[];for(var c=0;c<this.props.images.length;++c)a.push(b("React").createElement("li",{key:c},b("React").createElement(b("Link.react"),{className:"_2ph-"+(this.state.currentImageIndex===c?" _h1":""),onClick:this.$11.bind(this,c)},c+1)));return b("React").createElement(b("List.react"),{border:"none",className:"_hd",direction:"horizontal",spacing:"large"},a)};a.prototype.$18=function(){var a=this.$22();return b("React").createElement("div",{border:"light",display:"block"},b("React").createElement(b("SUIText.react"),{className:"_3-8q",display:"block",size:"large_DEPRECATED",theme:b("SUIBusinessTheme")},i._("This image has approximately")),b("React").createElement(b("SUIText.react"),{className:"_hg"+(a>n?" _3r0a":"")+" _3-8q",display:"block",size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},i._("{Percentage of boxes selected, followed by: \u0025 Text}\u0025 Text",[i._param("Percentage of boxes selected, followed by: % Text",a*4)])))};a.prototype.$19=function(){var a=this.$22();return b("React").createElement(b("List.react"),{border:"light",className:"_he",direction:"horizontal",spacing:"large"},b("React").createElement("li",{className:"_2pi2 _hf"},b("React").createElement(b("SUIText.react"),{className:"_3-8q",display:"block",size:"large_DEPRECATED",theme:b("SUIBusinessTheme")},i._("Selected")),b("React").createElement(b("SUIText.react"),{className:"_hg _3-8p",customSizeUseSparingly:"xx-large",display:"block",size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},a)),b("React").createElement("li",{className:"_2pi2 _hf"},b("React").createElement(b("SUIText.react"),{className:"_3-8q",display:"block",size:"large_DEPRECATED",theme:b("SUIBusinessTheme")},i._("Text")),b("React").createElement(b("SUIText.react"),{className:"_hg"+(a>n?" _hw":"")+" _3-8p",customSizeUseSparingly:"xx-large",display:"block",size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},i._("{Percentage of boxes selected}\u0025",[i._param("Percentage of boxes selected",a*4)]))))};a.prototype.$21=function(){var a=Math.floor(.2*n*n)+1;return b("React").createElement("div",{className:"_3r0b"},b("React").createElement(b("SUIText.react"),{size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},i._("How to Use")),b("React").createElement("p",null,i._("Click on all boxes that contain text. If there is text in {Number of boxes to exceed 20\u0025 threshold} or more boxes of the grid, then your image may not meet our guidelines.",[i._param("Number of boxes to exceed 20% threshold",a)])),b("React").createElement("p",null,i._("If you have more than one image that includes text, then be sure to check each one.")))};a.prototype.$11=function(a){this.props.source===b("AdInterfacesAppNames").CREATE_FLOW&&b("AdsImageValidationAdImageValidationToolUseAction").dispatch({image:this.$13(a)},{line:"533",module:"AdsCreativeImageTextOverlayDialog.react.js"}),this.setState({currentImageIndex:a,boxesSelected:this.props.preselectedBoxes[a]||this.$3(),textValidationToolShown:!0})};a.prototype.$14=function(a,b){__p&&__p();if(this.props.readOnly)return;if(this.state.isMouseDown)return;a=a*n+b;b=this.state.boxesSelected;var c=this.state.boxesSelected[a];b[a]=!c;var d=this.state.visitedBoxesDuringMouseDown;d[a]=!0;this.setState({boxesSelected:b,visitedBoxesDuringMouseDown:d,isMouseDown:!0,cellState:c})};a.prototype.$15=function(a,b){__p&&__p();if(this.props.readOnly)return;a=a*n+b;if(this.state.isMouseDown&&this.state.visitedBoxesDuringMouseDown[a]===void 0&&this.state.boxesSelected[a]==this.state.cellState){b=this.state.boxesSelected;b[a]=!this.state.boxesSelected[a];var c=this.state.visitedBoxesDuringMouseDown;c[a]=!0;this.setState({boxesSelected:b,visitedBoxesDuringMouseDown:c})}};a.propTypes={images:c.array.isRequired,source:c.string,preselectedBoxes:c.arrayOf(c.arrayOf(c.bool)),readOnly:c.bool,dialogShown:c.bool,onHide:c.func};a.defaultProps={source:null,preselectedBoxes:[],readOnly:!1,dialogShown:!1,onHide:b("emptyFunction")};e.exports=a}),null);
__d("AdsXoutBox.react",["cx","ix","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=null;this.props.isXoutable&&(a=b("React").createElement(b("FBOverlayElement.react"),{horizontal:"right",vertical:"top"},b("React").createElement(b("Link.react"),{className:"_x7t",onClick:this.props.onXoutClick},b("React").createElement(b("Image.react"),{src:h("23122")}))));return b("React").createElement(b("FBOverlayContainer.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_4sh8"+(this.props.isXoutable?" _x7v":""))}),b("React").createElement(b("FBOverlayBase.react"),null,this.props.children),a)};function a(){"use strict";i.apply(this,arguments)}a.propTypes={isXoutable:c.bool,onXoutClick:c.func};a.defaultProps={isXoutable:!0};e.exports=a}),null);
__d("AdsImagePanelItem.react",["cx","fbt","invariant","ix","AdsCreativeImageTextOverlayDialog.react","AdsFBIconDownsized.react","AdsFullSizeImageBoxContainer.react","AdsImageCropperIconContainer.react","AdsImageIDUtils","AdsImagePanelSizes","AdsImageUploadRemoveErrorsDataAction","AdsImageValidationUtils","AdsPageTypes","AdsValidationIcon.react","AdsValidationIconType","AdsXoutBox.react","AdsXUIProgressBar.react","CenteredContainer.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","FDSSpinner.react","GradientBox.react","Image.react","Link.react","React","SphericalMediaGyroIcon.react","SUIBusinessTheme","SUIText.react","asset","emptyFunction","joinClasses","tooltipPropsFor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=100;c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.state=this.getInitialState(),this.$12=function(){this.setState({imageTextOverlayDialogShown:!0})}.bind(this),this.$11=function(){this.setState({imageTextOverlayDialogShown:!1})}.bind(this),this.$15=function(){this.props.onRemove&&this.props.image&&this.props.adlabel!=null&&this.props.onRemove(this.props.image,this.props.adlabel)}.bind(this),b}a.prototype.getInitialState=function(){__p&&__p();var a=[],b="",c=!1,d=this.props,e=d.image;d=d.feedback;if(d!=null){if(e){e=e.getHashOrUrl();a=d.getTextOverlayBoxesForIdentifier(e);b=d.getTextPenaltyWarningsForIdentifier(e)}c=d.getIsTextPenaltyViolation()}return{imageTextOverlayDialogShown:!1,isTextPenaltyViolation:c,textOverlayBoxes:a,textOverlayWarning:b,size:this.props.size}};a.prototype.$1=function(a){this.props.image&&this.props.image.equals(a)&&this.forceUpdate()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState({size:a.size})};a.prototype.render=function(){var a=this.props,c=a.image,d=a.progressValue;a=a.fileInputNodeID;var e=c?c.getUrl():null,f;c?f=e!=null&&e!==""?this.$2(c):null:d!=null&&d!==0?f=this.$3(h._("Uploading"),d):a!=null&&a!==""?f=this.props.isIndividualUploader?this.$4():this.$5():this.props.uploadErrors&&this.props.uploadErrors.length>0&&(f=this.$6(this.props.uploadErrors,this.$7));return b("React").createElement("div",{className:this.$8(),style:this.state.size},f,this.$9())};a.prototype.$7=function(){b("AdsImageUploadRemoveErrorsDataAction").dispatch({},{line:"230",module:"AdsImagePanelItem.react.js"})};a.prototype.$9=function(){var a=this.props.image;return!a||!this.$10()?null:b("React").createElement(b("AdsCreativeImageTextOverlayDialog.react"),{dialogShown:this.state.imageTextOverlayDialogShown,images:[a],preselectedBoxes:[this.state.textOverlayBoxes],readOnly:!0,onHide:this.$11})};a.prototype.$13=function(){if(this.props.disableCropping||!this.props.isUsingPACPhase2&&!this.props.disableImageCropperUpgrade)return null;var a=b("React").createElement(b("AdsFBIconDownsized.react"),{src:j("406849")}),c=this.props.imageSpecs;c||i(0,1158);if(c.length===1&&c[0].placement===b("AdsPageTypes").MOBILE_INSTREAM_VIDEO)return null;var d=this.props.onConfirmCropping;d||i(0,1159);return b("React").createElement(b("FBOverlayElement.react"),{className:"__08",horizontal:"right",vertical:"bottom"},b("React").createElement("div",{className:"__09"},b("React").createElement("div",{className:"__0a"}),b("React").createElement("div",{className:"_5uvv"},b("React").createElement(b("AdsImageCropperIconContainer.react"),{accountID:this.props.accountID,adlabel:this.props.adlabel,canSetPlatformCustomImage:!this.props.usePlacementAssetCustomizationCropper,cropIcon:a,disabledSpecs:this.props.disabledSpecs,image:this.props.imageForCropper||this.props.image,imageCollection:this.props.imageCollection,imageSpecs:c,isSingleCropMode:this.props.isSingleCropMode,replaceImagesInCollection:!this.props.usePlacementAssetCustomizationCropper,selectedPlacement:this.props.placement,onConfirmCropping:d}))))};a.prototype.$14=function(){return!this.props.onRemove||!this.props.isUsingPACPhase2&&!this.props.disableImageCropperUpgrade?null:b("React").createElement(b("FBOverlayElement.react"),{horizontal:"right",vertical:"top"},b("React").createElement(b("Link.react"),{onClick:this.$15},b("React").createElement(b("Image.react"),{src:j("23122")})))};a.prototype.$16=function(){return b("React").createElement(b("FBOverlayElement.react"),{vertical:"bottom"},b("React").createElement(b("GradientBox.react"),{className:"_2npp",color:"black",direction:"up"}))};a.prototype.$17=function(){return this.props.onClick?b("React").createElement(b("FBOverlayElement.react"),null,b("React").createElement(b("Link.react"),{label:"Change preview",onClick:this.props.onClick})):null};a.prototype.$2=function(a){__p&&__p();var c=this.props.imageSpecs;if(!c||!c.length)return null;var d=a.getCrops(),e=null;if(Object.keys(d).length>0){c=c.find(function(a){return a.cropKey===Object.keys(d)[0]});c!=null&&(e=a.getCrop(c.cropKey))}c=b("AdsImageIDUtils").getImageIDFromLegacyImage(this.props.accountID,a);if(!c)return null;a=a.getIsSphericalPhoto()?this.$18():this.$13();return b("React").createElement(b("FBOverlayContainer.react"),null,b("React").createElement(b("FBOverlayBase.react"),null,b("React").createElement(b("AdsFullSizeImageBoxContainer.react"),{crop:e,height:this.state.size.height,imageID:c,renderStyle:this.props.allowFlexibleImageAspectRatio?"CONTAIN":"SCALE_CROP",width:this.state.size.width})),this.$16(),this.$19(),this.$17(),this.$20(),a,this.$14())};a.prototype.$19=function(){__p&&__p();var a=this.props.image;if(!a||!this.props.isUsingPACPhase2&&!this.props.disableImageCropperUpgrade)return null;var c=null,d=null,e=a.getCrops();if(a.isStockImage())if(a.hasFullSizeDimensions()){c=a.getFullSizeWidth();d=a.getFullSizeHeight();if(Object.keys(e).length!==0){var f=this.$21(a);f&&(c=f.width,d=f.height)}}else a.fetchFullSizeDimensions(this.$1.bind(this,a));else{c=a.getWidth();d=a.getHeight();if(Object.keys(e).length!==0){f=this.$21(a);f&&(c=f.width,d=f.height)}}return b("React").createElement(b("FBOverlayElement.react"),{horizontal:"left",vertical:"bottom"},b("React").createElement("div",{className:"_2npq"},b("React").createElement("div",{className:c==null||c===0||d==null||d===0?"hidden_elem":""},h._("{width} \u00d7 {height}",[h._param("width",c),h._param("height",d)]))))};a.prototype.$18=function(){return b("React").createElement(b("FBOverlayElement.react"),{className:"_4u53",horizontal:"right",vertical:"bottom"},b("React").createElement("span",null,b("React").createElement(b("SphericalMediaGyroIcon.react"),{className:"_4u54"})))};a.prototype.$21=function(a){a=a.getCrops();if(Object.keys(a).length===0)return null;var b=Object.keys(a)[0];a=a[b];b=Math.abs(a[0][0]-a[1][0]);a=Math.abs(a[0][1]-a[1][1]);return{height:a,width:b}};a.prototype.$20=function(){var a=b("AdsImageValidationUtils").getValidationErrorMessage(this.props.imageErrors),c=this.$22(this.props.imageErrors);c=a!=null&&a!==""?a:c;if(c==null||c==="")return null;c=[c];return b("React").createElement(b("FBOverlayElement.react"),{horizontal:"left",vertical:"top"},b("React").createElement(b("AdsValidationIcon.react"),{className:this.$23(),isError:!!a,messages:[c],type:this.$24()}))};a.prototype.$8=function(){var a=b("AdsImageValidationUtils").getValidationErrorMessage(this.props.imageErrors),c=this.$22(this.props.imageErrors),d=this.$25(),e="_2npo";this.props.isIndividualUploader&&!this.props.canUpload&&(e=b("joinClasses")(e,"__07"));a!=null&&a!==""?e=b("joinClasses")(e,"_5z2c"):c!=null&&c!==""?e=b("joinClasses")(e,d?"_2p75":"_5z2d"):this.props.selected&&(e="__05");return e};a.prototype.$23=function(){var a=b("AdsImageValidationUtils").getValidationErrorMessage(this.props.imageErrors),c=this.$22(this.props.imageErrors),d="";a!=null&&a!==""?d=b("joinClasses")(d,"_5z2e"):c!=null&&c!==""&&(d=b("joinClasses")(d,"_5z2f"));return d};a.prototype.$24=function(){return b("AdsValidationIconType").ERROR_WHITE};a.prototype.$22=function(a){var c=this.$10()?[this.$26()[0]]:[];return b("AdsImageValidationUtils").getValidationWarningMessage(a,c)};a.prototype.$3=function(a,c){c=b("React").createElement(b("CenteredContainer.react"),{className:"_2npt",horizontal:!1,vertical:!0},b("React").createElement(b("AdsXUIProgressBar.react"),{className:"_3-8u",striped:this.props.progressValue===l,value:c}),b("React").createElement("div",{className:"_2npu"},a));return this.props.onRemove&&this.props.image?b("React").createElement(b("AdsXoutBox.react"),{className:"_4th8",onXoutClick:this.$15},c):c};a.prototype.$4=function(){var a=b("React").createElement("div",{className:(this.props.canUpload?"_5uvy":"")+(this.props.canUpload?"":" __0c")}),c=null;this.props.isDefaultLoading===!0?(a=b("React").createElement(b("FDSSpinner.react"),null),c=b("React").createElement("div",{className:"_5uvz"},b("React").createElement(b("SUIText.react"),{shade:"light",size:"meta1",theme:b("SUIBusinessTheme")},this.props.defaultLoadingPlaceholder))):this.props.firstLoad?c=b("React").createElement("div",{className:"_5uvz"},h._("Upload images")):c=b("React").createElement("div",{className:"_5uvz"},h._("Add more images"));var d=this.props.canUpload&&!this.props.isDefaultLoading,e=b("tooltipPropsFor")(this.props.uploadDisabledReason,"below","center"),f=d?this.props.fileInputNodeID:null;d=d?this.props.onUploadImageClick:b("emptyFunction");return b("React").createElement("label",babelHelpers["extends"]({},e,{className:"_2npv",htmlFor:f,role:"button",onClick:d}),b("React").createElement(b("CenteredContainer.react"),{className:"_2rd9",vertical:!0},a,c))};a.prototype.$5=function(){var a=b("React").createElement("div",{className:"_2npx"});this.props.uploadIcon==="image"&&(a=b("React").createElement("div",{className:"_3l-6"}));return b("React").createElement("label",{className:"_2npv",htmlFor:this.props.fileInputNodeID,role:"button",onClick:this.props.onUploadImageClick},b("React").createElement(b("CenteredContainer.react"),{className:"_2rd9",vertical:!0},a))};a.prototype.$6=function(a,c){a=a.map(function(a,c){return b("React").createElement("div",{className:"_3-8w _28kl",key:c},b("React").createElement(b("AdsValidationIcon.react"),{className:"_2xvd",messages:[a.longMessage],type:b("AdsValidationIconType").ERROR_IMAGE}),a.shortMessage)});return b("React").createElement(b("AdsXoutBox.react"),{onXoutClick:c},b("React").createElement(b("CenteredContainer.react"),{className:"_2rd9",style:this.state.size,vertical:!0},a))};a.prototype.$27=function(){var a=h._("Failed to load image."),b=h._("The stock image could not be loaded. Please remove the image and try again.");return{shortMessage:a,longMessage:b}};a.prototype.$10=function(){return!!this.state.textOverlayWarning};a.prototype.$25=function(){return this.state.textOverlayWarning!=null&&this.state.textOverlayWarning!==""&&this.state.isTextPenaltyViolation};a.prototype.$26=function(){var a;this.$25()?a=h._("{Text penalty warning}",[h._param("Text penalty warning",this.state.textOverlayWarning)]):a=h._("Ad images with text that takes up more than 20\u0025 of the image may not be approved. Use another image or {=learn more} about using text in ads.",[h._param("=learn more",b("React").createElement(b("Link.react"),{onClick:this.$12},h._("learn more")))]);return[a]};a.defaultProps={allowFlexibleImageAspectRatio:!1,canUpload:!1,disableCropping:!1,disableImageCropperUpgrade:!1,firstLoad:!0,imageErrors:[],isIndividualUploader:!1,isSingleCropMode:!1,isUsingPACPhase2:!1,selected:!1,size:b("AdsImagePanelSizes").MEDIUM,uploadErrors:null,onConfirmCropping:b("emptyFunction"),onUploadImageClick:b("emptyFunction")};e.exports=a}),null);
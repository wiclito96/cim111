if (self.CavalryLogger) { CavalryLogger.start_js(["bp883"]); }

__d("AdsSavedAudienceViewClearAudienceSaveStateDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="VIEW.CLEAR_AUDIENCE_SAVE_STATE";e.exports={actionType:a}}),null);
__d("AdsSavedAudienceViewToggleSaveDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="VIEW.TOGGLE_SAVE";e.exports={actionType:a}}),null);
__d("AdsSavedAudienceViewToggleShowAdSetsDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="SAVED_AUDIENCE.TOGGLE_AD_SETS";e.exports={actionType:a}}),null);
__d("AdsSavedAudienceViewUpdateNameDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="VIEW.UPDATE_NAME";e.exports={actionType:a}}),null);
__d("AdsSavedAudienceCreateViewStore",["AdsDataAtom","AdsPageTransitionActionFlux","AdsSavedAudienceViewClearAudienceSaveStateDataActionFlux","AdsSavedAudienceViewToggleSaveDataActionFlux","AdsSavedAudienceViewToggleShowAdSetsDataActionFlux","AdsSavedAudienceViewUpdateNameDataActionFlux","FluxStore","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("gkx")("779516");c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("AdsDataAtom")),this.$AdsSavedAudienceCreateViewStoreClass4()}a.prototype.__getActionTypes=function(){return h?[b("AdsPageTransitionActionFlux").actionType,b("AdsSavedAudienceViewClearAudienceSaveStateDataActionFlux").actionType,b("AdsSavedAudienceViewToggleSaveDataActionFlux").actionType,b("AdsSavedAudienceViewToggleShowAdSetsDataActionFlux").actionType,b("AdsSavedAudienceViewUpdateNameDataActionFlux").actionType]:null};a.prototype.__onDispatch=function(a){__p&&__p();a=a.action;switch(a.actionType){case b("AdsSavedAudienceViewUpdateNameDataActionFlux").actionType:this.$AdsSavedAudienceCreateViewStoreClass1=a.name;this.__emitChange();break;case b("AdsSavedAudienceViewToggleSaveDataActionFlux").actionType:this.$AdsSavedAudienceCreateViewStoreClass2=a.isSaveEnabled;this.__emitChange();break;case b("AdsSavedAudienceViewToggleShowAdSetsDataActionFlux").actionType:this.$AdsSavedAudienceCreateViewStoreClass3=a.isShownAdSets;this.__emitChange();break;case b("AdsSavedAudienceViewClearAudienceSaveStateDataActionFlux").actionType:case b("AdsPageTransitionActionFlux").actionType:this.$AdsSavedAudienceCreateViewStoreClass4();this.__emitChange();break}};a.prototype.getAudienceName=function(){return this.$AdsSavedAudienceCreateViewStoreClass1};a.prototype.isSaveEnabled=function(){return this.$AdsSavedAudienceCreateViewStoreClass2};a.prototype.isShownAdSets=function(){return this.$AdsSavedAudienceCreateViewStoreClass3};a.prototype.$AdsSavedAudienceCreateViewStoreClass4=function(){this.$AdsSavedAudienceCreateViewStoreClass1="",this.$AdsSavedAudienceCreateViewStoreClass2=!1};a.__moduleID=e.id;d=new a();e.exports=d}),null);
__d("AdsCFDynamicAudienceAsyncOutputPreProcessor",["regeneratorRuntime","AdObjectLevels","AdsAccountCapabilities","AdsAccountStore","AdsAccountUtils","AdsAPICampaignPaths","AdsAPIObjectives","AdsCFActiveCampaignIDStore","AdsCFCampaignStateUtils","AdsCFCampaignUtils","AdsDynamicAudienceActions","AdsDynamicAudienceDataLoader","AdsDynamicAudienceDraftStore","AdsDynamicCampaignUtils","AdsSelectorUtils","adsProductSetVerticalSelector","deleteByPath","isEmpty","nullthrows","setByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={key:"DynamicAudienceID",shouldRun:function(a){__p&&__p();if(b("isEmpty")(a[b("AdObjectLevels").CAMPAIGN]))return!1;var c=a[b("AdObjectLevels").CAMPAIGN][0];if(!c)return!1;if(a[b("AdObjectLevels").CAMPAIGN_GROUP].objective!==b("AdsAPIObjectives").PRODUCT_CATALOG_SALES)return!1;a=b("AdsCFCampaignStateUtils").getActiveCampaignIDs(b("AdsCFActiveCampaignIDStore").getState());if(b("isEmpty")(a))return!1;a=a[0];if(!b("AdsCFCampaignUtils").isNewID(a))return!1;c=(c=c.promoted_object)==null?void 0:c.product_set_id;if(b("isEmpty")(c))return!1;c=b("AdsAccountStore").getSelectedAccount_LEGACY();return!b("AdsAccountUtils").hasCapability(c,b("AdsAccountCapabilities").DAX_DYNAMIC_AUDIENCE_QUICK_SAVE)?!1:b("AdsDynamicAudienceDraftStore").hasUnpublishedDraft(a)},genPromiseObject:function(a){__p&&__p();var c,d,e,f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:d=b("AdsAccountStore").getSelectedAccountIDX();e=b("nullthrows")(a[b("AdObjectLevels").CAMPAIGN][0]);f=((c=e.promoted_object)==null?void 0:c.product_set_id)||"";g=b("AdsCFCampaignStateUtils").getActiveCampaignIDs(b("AdsCFActiveCampaignIDStore").getState());h=g[0];l.next=7;return b("regeneratorRuntime").awrap(b("AdsSelectorUtils").loadObjectSelectorToPromise(b("adsProductSetVerticalSelector"),f));case 7:i=l.sent;if(b("AdsDynamicCampaignUtils").QUICK_SAVE_ELIGIBLE_VERTICALS.includes(i)){l.next=10;break}return l.abrupt("return",null);case 10:j=b("AdsDynamicAudienceDraftStore").get(h);if(!(!j||!j.inclusions||j.inclusions.isEmpty())){l.next=13;break}return l.abrupt("return",[]);case 13:l.next=15;return b("regeneratorRuntime").awrap(b("AdsDynamicAudienceDataLoader").createDynamicAudiencePromises(d,j,f));case 15:k=l.sent;b("AdsDynamicAudienceActions").audiencesCreated(g,k,!!(j&&j.is_excluded_dynamic_audience));return l.abrupt("return",k);case 18:case"end":return l.stop()}},null,this)},mutateSpec:function(a,c){if(c==null)return a;var d=b("AdsCFCampaignStateUtils").getActiveCampaignIDs(b("AdsCFActiveCampaignIDStore").getState());d=b("AdsDynamicAudienceDraftStore").get(d[0]);var e=d&&d.is_excluded_dynamic_audience;a[b("AdObjectLevels").CAMPAIGN]=a[b("AdObjectLevels").CAMPAIGN].map(function(a){e===!0?(b("setByPath")(a,b("AdsAPICampaignPaths").TARGETING.EXCLUDED_DYNAMIC_AUDIENCE_IDS,c),b("deleteByPath")(a,b("AdsAPICampaignPaths").TARGETING.DYNAMIC_AUDIENCE_IDS)):(b("setByPath")(a,b("AdsAPICampaignPaths").TARGETING.DYNAMIC_AUDIENCE_IDS,c),b("deleteByPath")(a,b("AdsAPICampaignPaths").TARGETING.EXCLUDED_DYNAMIC_AUDIENCE_IDS));return a});return a}};e.exports=a}),null);
__d("AdsCFSavedAudienceAsyncOutputPreProcessor",["AdObjectLevels","AdsAccountStore","AdsCFActiveCampaignIDStore","AdsCFCampaignStateUtils","AdsCFCampaignUtils","AdsCFSavedAudienceUtils","AdsSavedAudienceCreateViewStore","firstx","isEmpty","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={key:"savedAudienceID",shouldRun:function(a){if(b("isEmpty")(a[b("AdObjectLevels").CAMPAIGN]))return!1;a=b("AdsSavedAudienceCreateViewStore").getAudienceName().trim();var c=b("AdsCFCampaignStateUtils").getActiveCampaignIDs(b("AdsCFActiveCampaignIDStore").getState());return b("isEmpty")(c)?!1:!!(b("AdsCFCampaignUtils").isNewID(c[0])&&b("AdsSavedAudienceCreateViewStore").isSaveEnabled()&&a)},genPromiseObject:function(a){var c=b("AdsAccountStore").getSelectedAccountIDX(),d=b("AdsSavedAudienceCreateViewStore").getAudienceName().trim();a=b("nullthrows")(a[b("AdObjectLevels").CAMPAIGN][0]);a=a.targeting;return b("AdsCFSavedAudienceUtils").createSavedAudience(c,a,d).then(function(a){return[a]})},mutateSpec:function(a,c){a[b("AdObjectLevels").CAMPAIGN]=a[b("AdObjectLevels").CAMPAIGN].map(function(a){a.saved_audience_id=b("firstx")(c);return b("AdsCFSavedAudienceUtils").processCampaignObject(a)});return a}};e.exports=a}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["nWAkN"]); }

__d("LatchBoundary.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=!1,b}a.prototype.render=function(){var a=this.props.shouldRender;this.$1=this.$1||a;return this.$1?b("React").Children.only(this.props.children):null};e.exports=a}),null);
__d("adsUEditorCanvasFromAdgroupSelector",["AdsCanvasConstants","AdsCanvasDocumentStore","adsCreateSelector","adsUEditorCanvasIDFromAdgroupSelector"],(function(a,b,c,d,e,f){"use strict";var g=b("AdsCanvasConstants").CANVAS_COPY_SUFFIX;a=b("adsCreateSelector")([b("adsUEditorCanvasIDFromAdgroupSelector"),b("AdsCanvasDocumentStore").getByID],function(a,b){if(a==null)return null;var c=b(a);return c.isLoading()||!c.hasValue()?null:b(a+g).getValue()},{name:e.id+".adsUEditorCanvasFromAdgroupSelector"});e.exports=a}),null);
__d("adsUEditorCanvasElementsFromAdgroupSelector",["AdsCanvasConstants","AdsCanvasElementStore","AdsLoadObjectUtils","adsCreateSelector","adsUEditorCanvasFromAdgroupSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCanvasConstants").CANVAS_COPY_SUFFIX;a=b("adsCreateSelector")([b("adsUEditorCanvasFromAdgroupSelector"),b("AdsCanvasElementStore").getByID],function(a,c){if(a==null)return null;a=a.elements.map(function(a){return a.id});var d=a.map(c);return b("AdsLoadObjectUtils").anyLoadingOrEmpty(d.toArray())?null:a.map(function(a){return c(a+g).getValue()})},{name:e.id+".adsUEditorCanvasElementsFromAdgroupSelector"});e.exports=a}),null);
__d("adsUEditorAdgroupCanvasSynchronizerSelector",["AdsAccountCapabilities","AdsAccountUtils","AdsBulkValueUtils","AdsUEditorAdgroupAdObjectsUtils","AdsUEditorAdgroupBulkSelectors","AdsUEditorAdgroupCreativeFormat","AdsUnifiedCreativeAPIFields","RichMediaEditorStore","adsCreateSelector","adsUEditorAccountSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorCanvasElementsFromAdgroupSelector","adsUEditorCanvasFromAdgroupSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a){return a.map(function(a){return a.adgroup.id})},{name:e.id+".adgroupIDsSelector"});c=b("adsCreateSelector")([b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageID)],function(a){return b("AdsBulkValueUtils").getUniformValue(a)},{name:e.id+".pageIDSelector"});d=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a){a=a.map(function(a){return b("AdsUEditorAdgroupAdObjectsUtils").getCreativeFormat(a,!1)});return a.every(function(a){return a===b("AdsUEditorAdgroupCreativeFormat").COLLECTIONS})},{name:e.id+".isCollectionFormatSelector"});f=b("adsCreateSelector")([b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").retailerItemIDs)],function(a){return b("AdsBulkValueUtils").getUniformValue(a)},{name:e.id+".retailerItemIDsSelector"});a=b("adsCreateSelector")([a,b("adsUEditorAccountSelector"),b("adsUEditorCanvasFromAdgroupSelector"),b("adsUEditorCanvasElementsFromAdgroupSelector"),d,c,f,b("RichMediaEditorStore").getDocumentEditState],function(a,c,d,e,f,g,h,i){c=b("AdsAccountUtils").hasCapability(c,b("AdsAccountCapabilities").SHOW_IN_FEED_MERGED_SHOPPING_TEMPLATE);return d==null||e==null?{adgroupIDs:a,canvas:null,canvasSaveState:i,elements:null,isCollectionFormat:f,pageID:g,retailerItemIDs:h,shouldSynchronizeAdgroupToCanvas:c}:{adgroupIDs:a,canvas:d,canvasSaveState:i,elements:e,isCollectionFormat:f,pageID:g,retailerItemIDs:h,shouldSynchronizeAdgroupToCanvas:c}},{name:e.id+".adsUEditorAdgroupCanvasSynchronizerSelector"});e.exports=a}),null);
__d("AdPreview.react",["cx","fbt","AdPreviewLoadingOverlayTypes","AdsPreviewApiFormats","AdsPreviewUtils","AdsSpinnerCover.react","Arbiter","BUIAdoptionUtils","DOM","FBLogger","React","ReactDOM","SUIBusinessTheme","SUINotice.react","UIPagelet","WebApiApplication","getObjectValues","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("React").PropTypes;c=babelHelpers.inherits(j,b("React").Component);i=c&&c.prototype;function j(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={isError:!1,isLoading:!1,errorLevel:null,errorMessage:null},this.$7=function(a){if(this.$1==null)return;this.$1=null;this.setState({isError:!1,isLoading:!1});a();b("Arbiter").inform("AdPreview/PageletLoadSuccess",{component:this});a=this.props.onPreviewLoadSuccess;a&&this.$2&&a({requestKey:this.$2})}.bind(this),this.$8=function(a){if(this.$1==null)return;this.$1=null;this.setState({isError:!0,isLoading:!1});a=this.props.onPreviewLoadFailure;a&&this.$2&&a({requestKey:this.$2})}.bind(this),c}j.prototype.componentDidMount=function(){this.$3(this.props)};j.prototype.componentWillUnmount=function(){this.$2=null,this.$1&&this.$1.cancel(),this.$1=null,this.$4(),b("DOM").empty(this.$5())};j.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$3(a)};j.prototype.render=function(){var a=!this.state.isError,c=this.state.isError&&!this.state.isLoading,d=this.state.errorLevel?this.state.errorLevel:"warn",e=this.state.errorMessage?this.state.errorMessage:h._("Unable to display a preview for this ad.");return b("React").createElement("div",{className:"_2hm6"+(this.state.isLoading?" _2hm7":"")},b("React").createElement("div",{className:this.props.className},b("React").createElement(b("AdsSpinnerCover.react"),{className:"_4fap",show:this.state.isLoading}),b("React").createElement("div",{className:c?"":"hidden_elem"},b("React").createElement(b("SUINotice.react"),{theme:b("SUIBusinessTheme"),type:b("BUIAdoptionUtils").convertUseToType(d)},e)),b("React").createElement("div",{className:a?"":"hidden_elem",ref:"pageletContainer"})))};j.prototype.$3=function(a){__p&&__p();var c=a.adAccountID,d=a.adgroupID,e=a.creativeID,f=a.creative,g=a.customPlayMode,h=a.lastForceUpdateTimeStamp,i=a.linkShareData,k=a.mockupID,l=a.apiFormat,m=a.appID,n=a.borderStyle,o=a.objective,p=a.productItemIDs,q=a.projectAccessToken,r=a.placePageID;a=a.postData;var s=this.$6(c,d,e,f,g,l==b("AdsPreviewApiFormats").RIGHT_COLUMN_STANDARD?void 0:i,l,m,n,o,p,r,a);if(s===this.$2&&(!h||this.props.lastForceUpdateTimeStamp===h))return;this.$1&&this.$1.cancel();this.$1=null;this.$2=s;l!==this.props.apiFormat&&(this.$4(),b("DOM").empty(this.$5()));if(!d&&!f){b("FBLogger")("ads").mustfix("AdPreview.react must be passed either adgroupID or creativeID");this.setState({isError:!0,isLoading:!1});return}if(this.props.onValidate){h=this.props.onValidate(f,l);if(h.length){s=null;var t=null;h=h.filter(function(a){return a.field===j.PREVIEW_MESSAGE_FIELD_NAME});h.length&&(s=h[0].level,t=h[0].message);this.setState({isError:!0,isLoading:!1,errorLevel:s,errorMessage:t});return}}this.setState({isError:!1,isLoading:!0,errorLevel:null,errorMessage:null});this.$4();m||(m=b("WebApiApplication").getClientID());h=!!d;s=this.props.onPreviewLoadStart;s&&this.$2&&s({requestKey:this.$2});this.$1=b("UIPagelet").loadFromEndpoint(this.props.mockupID?"CrStAdPreviewPageletContainer":"AdPreviewPageletController",this.$5(),{adaccountid:c,adid:h?d:null,appid:m,creativeid:e,creative:h?null:f,customplaymode:g===void 0?null:g,linksharedata:l==b("AdsPreviewApiFormats").RIGHT_COLUMN_STANDARD?void 0:i,loadingoverlay:this.props.loadingOverlay,skipDisclaimerForAN:this.props.skipDisclaimerForAN,mockupID:k,projectAccessToken:q,videodata:{ad_objective:o},format:l,borderstyle:n,productitemids:p,editable:this.props.editable,placePageID:r,postdata:a,version:this.props.apiVersion?this.props.apiVersion:b("AdsPreviewUtils").getPageletAPIVersion()},{append:!1,crossPage:!0,displayCallback:this.$7,errorHandler:this.$8,transportErrorHandler:this.$8,bundle:this.props.bundle!==void 0?this.props.bundle:!0})};j.prototype.$4=function(){var a=b("ReactDOM").findDOMNode(this.refs.pageletContainer);if(!a.querySelector)return;a=a.querySelectorAll(".UFILikeLink, .UFIList, .UFIBlingBox");for(var c=0,d=a.length;c<d;c++)b("ReactDOM").unmountComponentAtNode(a[c].parentNode)};j.prototype.$5=function(){return b("ReactDOM").findDOMNode(this.refs.pageletContainer)};j.prototype.$6=function(a,b,c,d,e,f,g,h,i,j,k,l,m){return[a,g,b,c,JSON.stringify(d),e,JSON.stringify(f),h,i,j,JSON.stringify(k),l,JSON.stringify(m)].join(":")};j.PREVIEW_MESSAGE_FIELD_NAME="PREVIEW_MESSAGE_FIELD_NAME";j.propTypes={adAccountID:a.string.isRequired,adgroupID:a.string,apiFormat:a.string.isRequired,apiVersion:a.string,appID:a.string,borderStyle:a.string,bundle:a.bool,creative:a.object,creativeID:a.string,customPlayMode:a.number,editable:a.bool,lastForceUpdateTimeStamp:a.number,linkShareData:a.object,loadingOverlay:a.oneOf(b("getObjectValues")(b("AdPreviewLoadingOverlayTypes"))),objective:a.string,placePageID:a.string,productItemIDs:a.array,projectAccessToken:a.string,onPreviewLoadFailure:a.func,onPreviewLoadStart:a.func,onPreviewLoadSuccess:a.func,onValidate:a.func};j.defaultProps={appID:b("WebApiApplication").getClientID(),editable:!1};e.exports=j}),null);
__d("SpecsUtils",["distinctArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="offsite_conversion";function h(a){return Array.isArray(a)?a:[a]}function i(a){__p&&__p();var b=a.reduce(function(a,b){return a.set(b,JSON.stringify(b))},new Map());return a.sort(function(a,c){a=b.get(a);c=b.get(c);if(a===c)return 0;else if(a<c)return-1;else return 1})}function a(a){return i(h(a).map(j))}function j(a){var b=Object.keys(a);b.sort();var c={};b.forEach(function(b){c[b]=a[b]});return c}function k(a,b){__p&&__p();if(a===b)return!0;if(!(a instanceof Object)||!(b instanceof Object))return!1;if(a.constructor!==b.constructor)return!1;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;var c={},d=0;for(var e=0,f=a.length;e<f;e++){var g=d;for(var h=0,i=b.length;h<i&&g===d;h++){if(c[h])continue;k(a[e],b[h])&&(c[h]=!0,d++)}}return d===a.length}else{for(var j in a){if(!Object.prototype.hasOwnProperty.call(a,j))continue;if(!Object.prototype.hasOwnProperty.call(b,j))return!1;if(a[j]===b[j])continue;if(typeof a[j]!=="object")return!1;if(!k(a[j],b[j]))return!1}for(j in b)if(Object.prototype.hasOwnProperty.call(b,j)&&!Object.prototype.hasOwnProperty.call(a,j))return!1}return!0}function l(a,b,c){h(a).forEach(function(a){if(!Object.prototype.hasOwnProperty.call(a,"action.type"))return;var d=h(a["action.type"]);d.forEach(function(d){b.call(c,d,a)})},this)}function c(a,c,d){__p&&__p();var e=[];a&&a.length&&(e=e.concat(a));c&&c.length&&(e=e.concat(c));var f=d?d.slice():[];l(e,function(a,b){if(a!==g)return;if(b.offsite_pixel!=null)a=b.offsite_pixel;else if(b.fb_pixel!=null)a=b.fb_pixel;else return;Array.isArray(a)?f=f.concat(a):f=f.push(a)});f=b("distinctArray")(f);return f}f.deepCompare=k;f.OFFSITE_ACTION_TYPE=g;f.getArrayField=h;f.sortSpecsByKeys=a;f.getTrackingPixels=c}),null);
__d("MouseEventAccumulator.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={hover:!1,clicked:!1},b}a.prototype.render=function(){var a=this.props,c=a.render;a=babelHelpers.objectWithoutPropertiesLoose(a,["render"]);return b("React").createElement("span",babelHelpers["extends"]({},a,{onMouseEnter:function(){return this.setState({hover:!0})}.bind(this),onMouseLeave:function(){return this.setState({hover:!1})}.bind(this),onClick:function(){return this.setState({clicked:!0})}.bind(this)}),c(this.state))};e.exports=a}),null);
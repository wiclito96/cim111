if (self.CavalryLogger) { CavalryLogger.start_js(["ZCCAY"]); }

__d("AdAccountIDConverter",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={toActID:function(a){if(a.startsWith("act_"))return a;else return"act_"+a},toActIDs:function(a){return a.map(function(a){return this.toActID(a)},this)},toID:function(a){return a.replace(/^act_/,"")},toIDs:function(a){return a.map(function(a){return this.toID(a)},this)}};e.exports=a}),null);
__d("AdsValidator",["invariant","emptyFunction","forEachObject"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this.propertySpecs=a,this.validators={},this.transforms={},this.nullables={},this.conditionals={},this.defaultErrorMessages={},this._initialize()}a.prototype.isDeclaredProperty=function(a){return this.propertySpecs[a]!==void 0};a.prototype.validateProperty=function(a,b,c,d){a=this._validate(a,b,!1,c,d);return a};a.prototype.validateProperties=function(a,b,c){return this._validateProperties(a,a,c,b,!1)};a.prototype.transformAndValidateProperties=function(a,b,c){return this._validateProperties(a,a,c,b,!0)};a.prototype.transformAndValidateEditedProperties=function(a,b){return this._validateProperties(a,b,a,!1,!0)};a.prototype._validateProperties=function(a,b,c,d,e){var f={};d=d?Object.keys(this.propertySpecs):Object.keys(a);d.forEach(function(d){if(!this.isDeclaredProperty(d))return;var g=a[d];g=this._validate(d,g,e,b||a,c);(e||!g.isValid||g.hasWarning)&&(f[d]=g)}.bind(this));return Object.keys(f).length?f:null};a.prototype.transformAndValidateProperty=function(a,b,c,d){return this._validate(a,b,!0,c,d)};a.prototype._initialize=function(){function a(a){if(!Array.isArray(a)){typeof a==="function"||g(0,4129);return[a]}return a}b("forEachObject")(this.propertySpecs,function(c,d){c.validators&&(this.validators[d]=a(c.validators)),c.transforms&&(this.transforms[d]=a(c.transforms)),c.isNullable&&(this.nullables[d]=typeof c.isNullable==="function"?c.isNullable:b("emptyFunction").thatReturns(c.isNullable)),c.conditional&&(this.conditionals[d]=c.conditional),c.defaultErrorMessage&&(this.defaultErrorMessages[d]=typeof c.defaultErrorMessage==="function"?c.defaultErrorMessage:b("emptyFunction").thatReturns(c.defaultErrorMessage))}.bind(this),this)};a.prototype._validate=function(a,b,c,d,e){__p&&__p();this.propertySpecs[a]||g(0,4130,a);if(b===void 0)return{isValid:!1,text:a+" can never be undefined",value:b};var f=this.conditionals[a];if(f&&!f(b,d,e))return this._validResult(b);if(b===null){f=this.defaultErrorMessages[a]?this.defaultErrorMessages[a](d):null;f=f||a+" cannot be null";var h=this.nullables[a];return h&&h(d)?this._validResult(b):{isValid:!1,text:f,value:b}}h=this.validators[a]||[];f=this.transforms[a];c&&f&&(h=f.concat(h));return this._applyValidators(a,b,h,d,e)};a.prototype._applyValidators=function(a,b,c,d,e){c=c.reduce(function(a,b){if(!a.isValid||a.hasWarning)return a;b=b(a.value,d,e);Object.prototype.hasOwnProperty.call(b,"value")||(b.value=a.value);return b},this._validResult(b));b=this.defaultErrorMessages[a];!c.isValid&&!c.text&&b&&b(d)&&(c.text=b(d));return c};a.prototype._validResult=function(a){return{isValid:!0,value:a,hasWarning:!1}};e.exports=a}),null);
__d("AdsValidatorTransforms",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b=typeof a==="string"?parseFloat(a):a;return{isValid:b==a,text:"is not a floating point number",value:b}}function b(a){var b=typeof a==="string"?parseInt(a,10):a;return{isValid:b==a,text:"is not a number",value:b}}function c(a){a=""+a;return{isValid:!0,value:a}}function d(a){return{isValid:!0,value:a.trim()}}function f(a,b){b=Math.floor(Math.abs(b||0));a&&b>a&&(b=a);return{isValid:!0,value:b}}e.exports={toFloat:a,toInteger:b,toPositiveInteger:f,toString:c,trim:d}}),null);
__d("ApiErrorHandler.brands",["Bootloader","ReactComponentRenderer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=null,i={setDefaultHandler:function(a){g=a;return i},handleApiError:function(a){a=a.error;if(!a)return;var b=i._getErrorCodeToHandler(a.code+"");b?b(a):g&&g(a)},_getErrorCodeToHandler:function(a){var b={190:i._handleTokenExpire};return b[a]},_handleTokenExpire:function(a){var c=i.getOrCreateDialogRoot();b("Bootloader").loadModules(["SessionExpiredDialog.brands"],function(a){a=new(b("ReactComponentRenderer"))(a,c);a.setProps({shown:!0})},"ApiErrorHandler.brands")},getOrCreateDialogRoot:function(){h||(h=document.createElement("div"),document.body.appendChild(h));return h}};e.exports=i}),null);
__d("LoggingConstants.brands",[],(function(a,b,c,d,e,f){e.exports={GET_OBJECT_API_ENDPOINT:"get_object",GET_OBJECT_BY_NEGATIVE_ID_API_ENDPOINT:"get_object_by_negative_id"}}),null);
__d("AnalyticsLogger.brands",["AdsPerfTiming","ApiErrorHandler.brands","AppLogger.brands","GraphAPI","LoggingConstants.brands","ads-lib-connect_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h={logHomePageInteractive:function(){h.logInteractive(b("AppLogger.brands").CATEGORY.HOMEPAGE_V3)},logNewHomePageInteractive:function(a){var c=b("AppLogger.brands").CATEGORY.HOMEPAGE_V4;h.logInteractive(c,{pane:a})},logSettingsPageInteractive:function(a){var c=b("AppLogger.brands").CATEGORY.SETTINGS_V2;h.logInteractive(c,{pane:a})},logInteractive:function(a,c){if(g)return;g=!0;var d=Date.now()-b("AdsPerfTiming").start;b("AppLogger.brands").logForAnalytics(a,b("AppLogger.brands").EVENT.APP_INIT,Object.assign({current_action_time:d,actual_event_time:Date.now(),extra:window.performance&&window.performance.now&&window.performance.now()},c))},logPaneChange:function(a,c){if(a===c)return;var d=b("AppLogger.brands").CATEGORY.SETTINGS_V2;b("AppLogger.brands").logForAnalytics(d,b("AppLogger.brands").EVENT.CHANGE_PANE,{previous_tab:a,tab:c})},logJSError:function(a){if(a&&a.type==="http"&&a.message==="unknown error")return;b("AppLogger.brands").logError(b("AppLogger.brands").EVENT.JAVASCRIPT_ERROR,{error_message:a.message,error_type:a.name,stack_trace:a.stack,error_data:JSON.stringify(a)})},logApiCall:function(a,c){if(!b("ads-lib-connect_DEPRECATED").isError(a))return;a=a.error;if(!a)return;b("AppLogger.brands").logForAnalytics(b("AppLogger.brands").CATEGORY.API_CALL,b("AppLogger.brands").EVENT.API_CALL_FAILED,{api_fields:c.fields&&JSON.stringify(c.fields),api_endpoint:this._getAPIEndPoint(c.endpoint),raw_endpoint:c.endpoint,error_code:a.code,error_sub_code:a.subcode,error_message:a.message,error_type:a.type})},_getAPIEndPoint:function(a){__p&&__p();if(!a||a.length===0||a==="/")return a;a[0]==="/"&&(a=a.slice(1));a[a.length-1]==="/"&&(a=a.slice(0,-1));var c,d;c=/^[a-z\/\_]+$/;d=a.match(c);if(d)return d[0];c=/^[0-9\_]+$/;d=a.match(c);if(d)return b("LoggingConstants.brands").GET_OBJECT_API_ENDPOINT;c=/^[0-9\-]+$/;d=a.match(c);if(d)return b("LoggingConstants.brands").GET_OBJECT_BY_NEGATIVE_ID_API_ENDPOINT;c=/^act\_[0-9]+\/(.+)+$/;d=a.match(c);if(d)return d[1];c=/^[0-9]+\/(.+)+$/;d=a.match(c);if(d)return d[1];c=/.*facebook.com\/[0-9]*\/*(.+)\?/;d=a.match(c);return d?d[1]:a}};b("GraphAPI").hasCustomErrorHandler()||b("GraphAPI").addErrorHandler(b("ApiErrorHandler.brands").setDefaultHandler(h.logJSError).handleApiError);e.exports=h}),null);
__d("BrandAgencyAPIConverter.brands",["AdAccountIDConverter","AppConstants.brands"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AppConstants.brands").CLIENT_AGENCY_STATUS;function a(a){return{id:a.id+"",pagePermissions:i(a.page_permissions),adAccountPermissions:j(a.adaccount_permissions),productCatalogPermissions:h(a.productcatalog_permissions),applicationPermissions:k(a.application_permissions),sharedAudiencePermissions:l(a.shared_ca_count)}}function h(a){return!a?[]:a.map(function(a){return{id:a.id+"",accessRequestedTime:a.access_requested_time,accessStatus:a.access_status,accessUpdatedTime:a.access_updated_time,permittedRoles:a.permitted_roles}})}function i(a){return!a?[]:a.map(function(a){return{id:a.id+"",accessRequestedTime:a.access_requested_time,accessStatus:a.access_status,accessUpdatedTime:a.access_updated_time,permittedRoles:a.permitted_roles}})}function j(a){return!a?[]:a.map(function(a){return{id:b("AdAccountIDConverter").toID(a.id),accessRequestedTime:a.access_requested_time,accessStatus:a.access_status,accessUpdatedTime:a.access_updated_time,permittedRoles:a.permitted_roles}})}function k(a){return!a?[]:a.map(function(a){return{id:a.id+"",accessStatus:g.CONFIRMED}})}function l(a){return!a?[]:[{count:a,accessStatus:g.CONFIRMED}]}function c(a,b,c){return{brandId:a,business:b,handleError:c}}function d(a,b,c,d,e,f){a={acting_brand_id:a,business:b,accountId:c,handleError:f};d&&(a=babelHelpers["extends"]({},a,{permitted_roles:d}));e&&(a=babelHelpers["extends"]({},a,{permitted_tasks:e}));return a}function f(a,b,c,d){return{acting_brand_id:a,business:b,accountId:c,handleError:d}}function m(a,b,c,d,e,f){a={acting_brand_id:a,business:b,pageId:c,handleError:f};d&&(a=babelHelpers["extends"]({},a,{permitted_roles:d}));e&&(a=babelHelpers["extends"]({},a,{permitted_tasks:e}));return a}function n(a,b,c,d){return{acting_brand_id:a,business:b,pageId:c,handleError:d}}function o(a,b,c,d){return{acting_brand_id:a,business:b,accountId:c,handleError:d}}function p(a,b,c,d){return{acting_brand_id:a,business:b,pageId:c,handleError:d}}function q(a,b,c,d,e,f){a={acting_brand_id:a,business:b,productCatalogId:c,handleError:f};d&&(a=babelHelpers["extends"]({},a,{permitted_roles:d}));e&&(a=babelHelpers["extends"]({},a,{permitted_tasks:e}));return a}function r(a,b,c,d,e){return{acting_brand_id:a,business:b,ownedDomainId:c,permitted_roles:d,handleError:e}}function s(a,b,c,d){return{acting_brand_id:a,business:b,productCatalogId:c,handleError:d}}function t(a,b,c,d){return{acting_brand_id:a,business:b,productCatalogId:c,handleError:d}}e.exports={fromAPI:a,getDAOParamsForDeleteAdAccountPermission:o,getDAOParamsForAcceptPagePermRequest:m,getDAOParamsForAcceptAdAccountPermRequest:d,getDAOParamsForAcceptOwnedDomainPermRequest:r,getDAOParamsForDeletePagePermission:p,getDAOParamsForDeleteAgency:c,getDAOParamsForRejectAdAccountPermRequest:f,getDAOParamsForRejectPagePermRequest:n,getDAOParamsForDeleteProductCatalogPermission:t,getDAOParamsForAcceptProductCatalogPermRequest:q,getDAOParamsForRejectProductCatalogPermRequest:s}}),null);
__d("UserValidator.brands",["AdsValidator","AdsValidatorTests","AdsValidatorTransforms"],(function(a,b,c,d,e,f){"use strict";a=new(b("AdsValidator"))({id:{isNullable:!1,transforms:b("AdsValidatorTransforms").toString,validators:[b("AdsValidatorTests").isFBIDString]},name:{isNullable:!0,validators:[b("AdsValidatorTests").isLengthyString]},link:{isNullable:!0,validators:[b("AdsValidatorTests").isLengthyString]}});e.exports=a}),null);
__d("ValidatorTests.brands",["UserValidator.brands","CreditCardTypeEnum"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="CONFIRMED",h="SUSPENDED",i="CLIENT_RESPONSE_PENDING",j="AGENCY_RESPONSE_PENDING";function a(a){return{isValid:!b("UserValidator.brands").validateProperties(a),text:"must be a valid user"}}function c(a){return{isValid:Object.prototype.hasOwnProperty.call(b("CreditCardTypeEnum"),a),text:"credit card type "+a+" does not exist."}}function d(a){return{isValid:new Date().getFullYear()<=a,text:"card has already expired"}}function f(a){return{isValid:a>=1&&a<=12,text:"invalid month"}}function k(a){a=!!(a===g||a===h||a===i||a===j);return{isValid:a,text:"must be an access status of CONFIRMED, SUSPENDED, CLIENT_RESPONSE_PENDING, or AGENCY_RESPONSE_PENDING"}}e.exports={isUser:a,isValidCreditCardType:c,isValidCreditCardExpirationYear:d,isValidCreditCardMonth:f,isValidAccessStatus:k}}),null);
__d("ClientAgencyPermissionValidator.brands",["AdsValidator","AdsValidatorTests","AdsValidatorTransforms","ValidatorTests.brands"],(function(a,b,c,d,e,f){"use strict";a=new(b("AdsValidator"))({id:{isNullable:!1,validators:b("AdsValidatorTests").isFBIDString,transforms:b("AdsValidatorTransforms").toString},accessRequestedTime:{isNullable:!1,validators:b("AdsValidatorTests").isLengthyString},accessStatus:{isNullable:!1,validators:b("ValidatorTests.brands").isValidAccessStatus},accessUpdatedTime:{isNullable:!1,validators:b("AdsValidatorTests").isLengthyString},permittedRoles:{isNullable:!1,validators:b("AdsValidatorTests").isValidArray}});e.exports=a}),null);
__d("BrandAgencyValidator.brands",["AdsValidator","AdsValidatorTests","AdsValidatorTransforms","ClientAgencyPermissionValidator.brands"],(function(a,b,c,d,e,f){"use strict";a=new(b("AdsValidator"))({id:{validators:b("AdsValidatorTests").isFBIDString,transforms:b("AdsValidatorTransforms").toString,isNullable:!1},pagePermissions:{validators:b("AdsValidatorTests").isValidCollection.bind(null,b("AdsValidatorTests").isValidObject.bind(null,b("ClientAgencyPermissionValidator.brands"))),isNullable:!1},adAccountPermissions:{validators:b("AdsValidatorTests").isValidCollection.bind(null,b("AdsValidatorTests").isValidObject.bind(null,b("ClientAgencyPermissionValidator.brands"))),isNullable:!1}});e.exports=a}),null);
__d("GraphDAO.brands",["AdsAPISpec","AdsDao","AdsDaoGraph","AdsDaoGraphDataProvider","AdsUtils","BrandsAppConfig","adsDaoGraphDataMutator","adsDaoUtils","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("AdsAPISpec").ACCOUNT_FIELDS;c=b("AdsAPISpec").BRAND_APP_FIELDS.map(b("AdsUtils").underscoreKey);d=b("AdsAPISpec").BRAND_PAGE_FIELDS.map(b("AdsUtils").underscoreKey);f=b("adsDaoGraphDataMutator").GraphDataMutator;var g=b("AdsDao").TransformParameterValue,h={},i={accountsForUser:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{optionalParameters:{fields:!0},constantParameters:{endpoint:"/me/adaccounts",fields:a}}),adAccountCreationRequest:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/adaccountcreationrequests"})}}),agenciesForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/agencies"})}}),appsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/apps"}),fields:c}}),assignedAdAccountsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/assigned_ad_accounts"})}}),assignedUsersForAdAccount:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{adAccountID:!0,business:!0},constantParameters:{endpoint:new g(function(a){return"/act_"+a.adAccountID+"/assigned_users"})}}),adaccountsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},optionalParameters:{summary:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/adaccounts"})}}),assignedUsersForPage:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{pageId:!0,business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.pageId+"/assigned_users"})}}),assignedUsersForPixel:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{pixelId:!0,business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.pixelId+"/assigned_users"})}}),assignedUsersForInstagramAccount:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{instagramAccountId:!0,business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.instagramAccountId+"/assigned_users"})}}),businessSettingLogForObject:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{objectId:!0},optionalParameters:{business:!0,since:!0,until:!0,limit:!0,after:!0},constantParameters:{endpoint:new g(function(a){if(b("gkx")("678236"))return"/"+a.objectId+"/business_activities";else return"/"+a.objectId+"/businesssettinglogs"}),date_format:"U"},processData:function(a){return a.data}}),clientsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/clients"})}}),clientAdAccountsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/client_ad_accounts"})}}),clientAdAccountRequestsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/pending_client_ad_accounts"})}}),clientLeadsAccessForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/client_leads_access"})}}),clientLiftStudyForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/client_lift_study"})}}),clientPagesForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/client_pages"})}}),clientPageRequestsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/pending_client_pages"})}}),clientPixelsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/client_pixels"})}}),clientProductCatalogsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/client_product_catalogs"})}}),fundingSourcesForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/creditcards"})}}),ownedAdAccountsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/owned_ad_accounts"})}}),ownedAdAccountRequestsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/pending_owned_ad_accounts"})}}),ownedLiftStudyForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/owned_lift_study"})}}),ownedPagesForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/owned_pages"})}}),ownedPageRequestsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/pending_owned_pages"})}}),ownedPixelsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/owned_pixels"})}}),ownedProductCatalogsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/owned_product_catalogs"})}}),pagesForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/pages"}),fields:d}}),productCatalogsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/product_catalogs"})}}),projectsForAsset:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{assetID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.assetID+"/businessprojects"}),date_format:"U"}}),projectsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/businessprojects"}),date_format:"U"}}),userPermissionsForAccount:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{accountId:!0},optionalParameters:{business:!0},constantParameters:{endpoint:new g(function(a){return"/act_"+a.accountId+"/userpermissions"})}}),userPermissionsForBrand:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{brandID:!0},optionalParameters:{user:!0,fields:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/userpermissions"})},processData:function(a){return a.data}}),userPermissionsForEventSourceGroup:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{eventSourceGroupId:!0},optionalParameters:{business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.eventSourceGroupId+"/userpermissions"})}}),userPermissionsForLiftStudy:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{liftStudyId:!0},optionalParameters:{business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.liftStudyId+"/userpermissions"})}}),userPermissionsForOfflineConversionDataSet:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{offlineConversionDataSetId:!0},optionalParameters:{business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.offlineConversionDataSetId+"/userpermissions"})}}),userPermissionsForPage:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{pageId:!0},optionalParameters:{business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.pageId+"/userpermissions"})}}),userPermissionsForProductCatalog:b("adsDaoUtils").createDataCommand(b("AdsDaoGraphDataProvider"),{requiredParameters:{productCatalogId:!0},optionalParameters:{business:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.productCatalogId+"/userpermissions"})}})},j={acceptAgencyAdAccountPermRequest:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{accountId:!0,business:!0},optionalParameters:{acting_brand_id:!0,permitted_roles:!0,permitted_tasks:!0},constantParameters:{endpoint:new g(function(a){return"/act_"+a.accountId+"/agencies"})}}),acceptAgencyPagePermRequest:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{pageId:!0,business:!0},optionalParameters:{acting_brand_id:!0,permitted_roles:!0,permitted_tasks:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.pageId+"/agencies"})}}),acceptAgencyProductCatalogPermRequest:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{productCatalogId:!0,business:!0,permitted_roles:!0},optionalParameters:{acting_brand_id:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.productCatalogId+"/agencies"})}}),createBusinessRequest:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandId:!0,object_id:!0},optionalParameters:{request_type:!0,request_status:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandId+"/sent_requests"})}}),createProjectForBrand:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandID:!0,name:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/businessprojects"})}}),createProductCatalog:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandID:!0,name:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/owned_product_catalogs"})}}),createSystemUserForBrand:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandID:!0,name:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/system_users"})}}),generateTokenForSystemUser:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{systemUserID:!0,business_app:!0,scope:!0,appsecret_proof:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.systemUserID+"/access_tokens"})}}),installAppForSystemUser:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{systemUserID:!0,business_app:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.systemUserID+"/applications"})}}),updateBrand:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandID:!0},constantParameters:{endpoint:new g(function(a){var b=a.brandID;delete a.brandID;return"/"+b})}}),updateBrandUserPermission:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandID:!0},optionalParameters:{user:!0,email:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/userpermissions"})}}),updateProject:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{projectID:!0},optionalParameters:{name:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.projectID})}}),updateSystemUserForBrand:b("adsDaoUtils").createDataCommand(f,{requiredParameters:{brandID:!0,system_user_id:!0,name:!0},constantParameters:{endpoint:new g(function(a){return"/"+a.brandID+"/system_users"})}})};for(var k in i){a=i[k];a&&(a.commandName="fetch"+k)}for(var l in j){c=j[l];c&&(c.commandName="add_"+l)}d={forBrand:function(a){if(Object.prototype.hasOwnProperty.call(h,a))return h[a];var c=b("BrandsAppConfig").locale,d=b("adsDaoUtils").primeDao(i,{constantParameters:{brandID:a,locale:c}},{appsForBrand:!0,adaccountsForBrand:!0,productCatalogsForBrand:!0,agenciesForBrand:!0,clientsForBrand:!0,clientBusinessesForBrand:!0,fundingSourcesForBrand:!0,projectsForBrand:!0,userPermissionsForAccount:!0,userPermissionsForPage:!0,userPermissionsForBrand:!0,businessSettingLogForObject:!0}),e=b("adsDaoUtils").primeDao(j,{constantParameters:{brandID:a,locale:c}},{acceptAgencyAdAccountPermRequest:!0,acceptAgencyPagePermRequest:!0,createProjectForBrand:!0,createSystemUserForBrand:!0,createProductCatalog:!0,updateBrand:!0,updateBrandUserPermission:!0});c=b("AdsDaoGraph").primedForBrand(a,c);e=babelHelpers["extends"]({},c,{add:e,fetch:babelHelpers["extends"]({},c.fetch,d)});h[a]=e;return e}};e.exports=d}),null);
__d("BrandAgencyResourceRequests.brands",["AnalyticsLogger.brands","AppLogger.brands","BrandAgencyAPIConverter.brands","BrandAgencyValidator.brands","GraphDAO.brands","ImmutableObject","forEachObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=100;function a(a,c,d){var e=b("GraphDAO.brands").forBrand(a);a={limit:g,brandID:a,handleError:function(a,c,e){b("AnalyticsLogger.brands").logApiCall(c,e),h(d,[])}};c!=null&&(a.fields=c);e.fetch.agenciesForBrand.accumulate(function(a){h(d,a),e.fetch.agenciesForBrand.clearCache()},a)}function h(a,c){var d={};c.forEach(function(a){a=b("BrandAgencyAPIConverter.brands").fromAPI(a);i(a);d[a.id]=new(b("ImmutableObject"))(a)});a(d)}function i(a){var c=b("BrandAgencyValidator.brands").validateProperties(a);c&&b("forEachObject")(c,function(c,d){b("AppLogger.brands").logForAnalytics(b("AppLogger.brands").CATEGORY.ERROR,b("AppLogger.brands").EVENT.BRAND_AGENCY_RES_REQ_FAILURE,{agency_id:a.id,prop_name:d,error:c})})}e.exports={fetchAllAgenciesForBrand:a}}),null);
__d("StoreObjectMerger.brands",["ImmutableObject"],(function(a,b,c,d,e,f){"use strict";a={selectAndMerge:function(a,c){a=a.filter(function(a){return!!c[a.id]}).map(function(a){return b("ImmutableObject").set(a,c[a.id])});return a},merge:function(a,c){return new(b("ImmutableObject"))(babelHelpers["extends"]({},a,c))}};e.exports=a}),null);
__d("BrandAgencyStore.brands",["AdAccountIDConverter","AdsDataAtom","AppConstants.brands","ArbiterMixin","BrandAgencyResourceRequests.brands","ImmutableObject","StoreObjectMerger.brands","forEachObject","mixin","unionArrays"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("AppConstants.brands").AGENCY_PERMISSION_ACTION,i=b("AppConstants.brands").AGENCY_ACTION,j=b("AppConstants.brands").AGENCY_REQUEST,k=b("AppConstants.brands").ASSET_TYPE,l=b("AppConstants.brands").BRAND_ACTION,m=b("AppConstants.brands").CLIENT_AGENCY_STATUS,n=b("AppConstants.brands").OBJECT_STATUS,o={},p={},q=!1;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.dispatchToken=b("AdsDataAtom").register(function(a){__p&&__p();var c=!1;a=a.action;switch(a.type){case b("AppConstants.brands").ACTION.FLUSH:E.flush();break;case h.UPDATE_START:r(a);c=!0;break;case h.UPDATE_SUCCESS:s(a);c=!0;break;case h.UPDATE_ERROR:t(a);c=!0;break;case h.DELETE_START:u(a);c=!0;break;case h.DELETE_SUCCESS:B(a);break;case h.DELETE_ERROR:C(a);c=!0;break;case i.DELETE_START:y(a);c=!0;break;case i.DELETE_SUCCESS:A(a);break;case i.DELETE_ERROR:z(a);c=!0;break;case j.ACCEPT_START:w(a);c=!0;break;case j.ACCEPT_ERROR:x(a);c=!0;break;case j.REJECT_START:u(a);c=!0;break;case j.REJECT_ERROR:v(a);c=!0;break;case l.MIGRATE_SUCCESS:case l.DELETE_SUCCESS:E.flush();c=!1;break}c&&E.inform("change")}),c}a.prototype.$BrandAgencyStoreImpl1=function(){return{$BrandAgencyStoreImpl2:o,$BrandAgencyStoreImpl3:p}};a.prototype.flush=function(){q=!0;return this};a.prototype.getRequestedObjectByAgencyID=function(a,b){return p[a]&&p[a][b]||null};a.prototype.getRequests=function(a,c){this.getAllAgenciesByBrandID(a,function(a){var d=[];b("forEachObject")(a,function(a){var c=this.$BrandAgencyStoreImpl4(a.pagePermissions,a.id,k.PAGE),e=this.$BrandAgencyStoreImpl4(a.adAccountPermissions,a.id,k.AD_ACCOUNT);a=this.$BrandAgencyStoreImpl4(a.productCatalogPermissions,a.id,k.PRODUCT_CATALOG);d=b("unionArrays")(d,c.requests,e.requests,a.requests)}.bind(this));c(d)}.bind(this))};a.prototype.$BrandAgencyStoreImpl4=function(a,b,c){var d=[],e=[];a=a.filter(function(a){return a.accessStatus===m.CLIENT_RESPONSE_PENDING});a.forEach(function(a){var f={brandID:b,requestInfo:a,assetType:c};e.push(f);d.push(a.id)});return{requests:e,IDsToFetch:d}};a.prototype.$BrandAgencyStoreImpl5=function(a){__p&&__p();if(Object.prototype.hasOwnProperty.call(o,a)&&!q){var c={};b("forEachObject")(o[a],function(a,b){if(a.objectStatus===n.DELETING||a.objectStatus===n.DELETED)return;if(a.pagePermissions.length===0&&a.adAccountPermissions.length===0&&a.productCatalogPermissions.length===0&&a.applicationPermissions.length===0&&(!a.sharedAudiencePermissions||a.sharedAudiencePermissions.length===0))return;c[b]=a});return c}else return null};a.prototype.getAllAgenciesByBrandID=function(a,c){var d=this.$BrandAgencyStoreImpl5(a);if(d){c(d);return}b("BrandAgencyResourceRequests.brands").fetchAllAgenciesForBrand(a,null,function(b){q=!1,o[a]=b,c(b)})};a.prototype.getAllAgenciesByBrandIDWithCatalogPermission=function(a,c){var d=this.$BrandAgencyStoreImpl5(a);if(d){c(d);return}d=["id","name","productcatalog_permissions"];b("BrandAgencyResourceRequests.brands").fetchAllAgenciesForBrand(a,d,function(b){q=!1,o[a]=b,c(b)})};a.prototype.getAgenciesByPageID=function(a,c,d){this.getAllAgenciesByBrandID(a,function(a){var e={};b("forEachObject")(a,function(a){a.pagePermissions.length&&a.pagePermissions.forEach(function(d){d.id===c&&(a=b("StoreObjectMerger.brands").merge(a,{accessStatus:d.accessStatus,permittedRoles:d.permittedRoles}),e[a.id]=a)})});d(e)})};a.prototype.getAgenciesByProductCatalogID=function(a,c,d){this.getAllAgenciesByBrandIDWithCatalogPermission(a,function(a){var e={};b("forEachObject")(a,function(a){a.productCatalogPermissions.length&&a.productCatalogPermissions.forEach(function(d){d.id===c&&(a=b("StoreObjectMerger.brands").merge(a,{accessStatus:d.accessStatus,permittedRoles:d.permittedRoles}),e[a.id]=a)})});d(e)})};a.prototype.getAgenciesByAdAccountID=function(a,c,d){this.getAllAgenciesByBrandID(a,function(a){var e={};a&&b("forEachObject")(a,function(a){a.adAccountPermissions.length&&a.adAccountPermissions.forEach(function(d){(b("AdAccountIDConverter").toActID(c)===d.id||c===d.id)&&(e[a.id]=a)})});d(e)})};a.prototype.$BrandAgencyStoreImpl6=function(a,c){var d={};b("forEachObject")(a,function(a){a.applicationPermissions.length&&a.applicationPermissions.forEach(function(b){b.id===c&&(d[a.id]=a)})});return d};a.prototype.getAgenciesByAppID=function(a,b,c){this.getAllAgenciesByBrandID(a,function(a){return c(this.$BrandAgencyStoreImpl6(a,b))}.bind(this))};a.prototype.hasAgencies=function(a,b){__p&&__p();this.getAllAgenciesByBrandID(a,function(a){for(var c in a){var d=a[c].pagePermissions.concat(a[c].adAccountPermissions);for(var e in d)if(d[e].accessStatus===m.CONFIRMED){b(!0);return}}b(!1)}.bind(this))};function r(a){__p&&__p();var c=a.brandID,d=a.agency;Object.prototype.hasOwnProperty.call(p,c)||(p[c]={});switch(a.assetType){case k.AD_ACCOUNT:p[c][d.id]={id:d.id,name:d.name,adAccountPermissions:[{id:b("AdAccountIDConverter").toActID(a.assetID),permittedRoles:a.permittedRoles,accessStatus:m.CONFIRMED}],pagePermissions:[],objectStatus:n.UPDATING};break;case k.PAGE:p[c][d.id]={id:d.id,name:d.name,adAccountPermissions:[],pagePermissions:[{id:a.assetID,permittedRoles:a.permittedRoles,accessStatus:m.CONFIRMED}],objectStatus:n.UPDATING};break;case k.PRODUCT_CATALOG:p[c][d.id]={id:d.id,name:d.name,adAccountPermissions:[],pagePermissions:[],productCatalogPermissions:[{id:a.assetID,permittedRoles:a.permittedRoles,accessStatus:m.CONFIRMED}],objectStatus:n.UPDATING};break;case k.APP:p[c][d.id]={id:d.id,name:d.name,adAccountPermissions:[],pagePermissions:[],productCatalogPermissions:[],applicationPermissions:[{id:a.assetID}],objectStatus:n.UPDATING}}}function s(a){__p&&__p();var c=a.brandID,d=a.agency,e=a.assetID,f=a.assetType;a=a.permittedRoles;p[c][d.id].objectStatus=n.UPDATE_SUCCESS;if(Object.prototype.hasOwnProperty.call(o[c],d.id))switch(f){case k.AD_ACCOUNT:var g={id:b("AdAccountIDConverter").toActID(e),permittedRoles:a,accessStatus:m.CONFIRMED},h=(o[c][d.id].adAccountPermissions||[]).filter(function(a){return a.id!=g.id&&b("AdAccountIDConverter").toActID(a.id)!=g.id});h.push(g);o[c][d.id]=b("ImmutableObject").set(o[c][d.id],{adAccountPermissions:h,objectStatus:n.SYNCED});break;case k.PAGE:var i={id:e,permittedRoles:a,accessStatus:m.CONFIRMED};h=(o[c][d.id].pagePermissions||[]).filter(function(a){return a.id!=i.id});h.push(i);o[c][d.id]=b("ImmutableObject").set(o[c][d.id],{pagePermissions:h,objectStatus:n.SYNCED});break;case k.PRODUCT_CATALOG:var j={id:e,permittedRoles:a,accessStatus:m.CONFIRMED};h=(o[c][d.id].productCatalogPermissions||[]).filter(function(a){return a.id!=j.id});h.push(j);o[c][d.id]=b("ImmutableObject").set(o[c][d.id],{productCatalogPermissions:h,objectStatus:n.SYNCED});break;case k.APP:var l={id:e};h=(o[c][d.id].applicationPermissions||[]).filter(function(a){return a.id!=l.id});h.push(l);o[c][d.id]=b("ImmutableObject").set(o[c][d.id],{applicationPermissions:h,objectStatus:n.SYNCED})}else switch(f){case k.AD_ACCOUNT:h=new(b("ImmutableObject"))({id:d.id,name:d.name,adAccountPermissions:[{id:b("AdAccountIDConverter").toActID(e),permittedRoles:a,accessStatus:m.CONFIRMED}],pagePermissions:[],productCatalogPermissions:[],applicationPermissions:[],objectStatus:n.SYNCED});o[c][d.id]=h;break;case k.PAGE:h=new(b("ImmutableObject"))({id:d.id,name:d.name,adAccountPermissions:[],pagePermissions:[{id:e,permittedRoles:a,accessStatus:m.CONFIRMED}],productCatalogPermissions:[],applicationPermissions:[],objectStatus:n.SYNCED});o[c][d.id]=h;break;case k.PRODUCT_CATALOG:h=new(b("ImmutableObject"))({id:d.id,name:d.name,adAccountPermissions:[],pagePermissions:[],productCatalogPermissions:[{id:e,permittedRoles:a,accessStatus:m.CONFIRMED}],applicationPermissions:[],objectStatus:n.SYNCED});o[c][d.id]=h;break;case k.APP:h=new(b("ImmutableObject"))({id:d.id,name:d.name,adAccountPermissions:[],pagePermissions:[],productCatalogPermissions:[],applicationPermissions:[{id:e}],objectStatus:n.SYNCED});o[c][d.id]=h;break}}function t(a){var b=a.brandID,c=a.agencyID;p[b][c]=babelHelpers["extends"]({},p[b][c],{errorMessage:a.errorMessage,objectStatus:n.UPDATE_ERROR})}function u(a){__p&&__p();var c=o[a.brandID][a.agencyID],d;switch(a.assetType){case k.PAGE:d="pagePermissions";break;case k.AD_ACCOUNT:d="adAccountPermissions";break;case k.PRODUCT_CATALOG:d="productCatalogPermissions";break;case k.APP:d="applicationPermissions";break;default:}var e={};e[d]=c[d].filter(function(c){var d;a.assetType===k.AD_ACCOUNT?d=b("AdAccountIDConverter").toID(c.id):d=c.id;return d!==a.assetID});Object.prototype.hasOwnProperty.call(e,d)||(e[d]=[]);D(a.brandID,a.agencyID,e)}function v(a){}function w(a){__p&&__p();var c=o[a.brandID][a.agencyID],d;switch(a.assetType){case k.PAGE:d="pagePermissions";break;case k.AD_ACCOUNT:d="adAccountPermissions";break;case k.PRODUCT_CATALOG:d="productCatalogPermissions";break;default:}var e=c[d].find(function(b){return b.id===a.assetID}),f={};f[d]=c[d].filter(function(c){var d;a.assetType===k.AD_ACCOUNT?d=b("AdAccountIDConverter").toID(c.id):d=c.id;return d!==a.assetID});f[d]===void 0&&(f[d]=[]);c={accessStatus:m.CONFIRMED,id:a.assetID,accessRequestedTime:e.accessRequestedTime,accessUpdatedTime:e.accessUpdatedTime,permittedRoles:e.permittedRoles};f[d].push(c);D(a.brandID,a.agencyID,f)}function x(a){}function y(a){D(a.brandID,a.agencyID,{objectStatus:n.DELETING})}function z(a){D(a.brandID,a.agencyID,{objectStatus:n.SYNCED})}function A(a){D(a.brandID,a.agencyID,{adAccountPermissions:[],pagePermissions:[],objectStatus:n.DELETED})}function B(a){}function C(a){}function D(a,c,d){var e=o[a][c];o[a][c]=b("ImmutableObject").set(e,d)}var E=new a();e.exports=E}),null);
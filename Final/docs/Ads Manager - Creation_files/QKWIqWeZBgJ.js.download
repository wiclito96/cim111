if (self.CavalryLogger) { CavalryLogger.start_js(["ZU1ro"]); }

__d("BanzaiStream",["Promise","Banzai","BanzaiStreamPayloads","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=4294967296,h="banzai_stream_route",i=250*1e3;a={post:function(a,c,d){__p&&__p();var e=JSON.stringify({stream_route:a,payload:c});if(e.length<i){b("Banzai").post(a,c,d);return}var f=Math.floor(Math.random()*g)+"_"+Date.now();b("BanzaiStreamPayloads").addPayload(f,{route:a,payload:c});a=[];var j=Math.ceil(e.length/i);for(var c=0;c<j;c++)a.push(e.substr(c*i,i));b("promiseDone")(a.reduce(function(a,c,e){var g={id:f,index:e,count:j,chunk_data:c};return a.then(function(){return new(b("Promise"))(function(a,c){return b("Banzai").post(h,g,babelHelpers["extends"]({},d||{},{callback:a}))})})},b("Promise").resolve()),function(){b("BanzaiStreamPayloads").removePayload(f)})}};e.exports=a}),null);
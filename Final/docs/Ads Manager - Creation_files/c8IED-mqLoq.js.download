if (self.CavalryLogger) { CavalryLogger.start_js(["yM6+c"]); }

__d("AdsCanvasCollectionsCoverMediaLoadFailDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"CANVAS.COLLECTIONS.COVER_MEDIA_LOAD_FAIL");e.exports=a}),null);
__d("AdsCanvasCollectionsCoverMediaLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"CANVAS.COLLECTIONS.COVER_MEDIA_LOADED");e.exports=a}),null);
__d("AdsCanvasCollectionsFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COLLECTION_HERO_IMAGE:"collection_hero_image",COLLECTION_HERO_VIDEO:"collection_hero_video",COLLECTION_THUMBNAILS:"collection_thumbnails",ELEMENT_CHILD_INDEX:"element_child_index",ELEMENT_ID:"element_id",HEIGHT:"height",ID:"id",PHOTO:"photo",IMAGES:"images",WIDTH:"width"})}),null);
__d("AdsCanvasCollectionsDataLoader",["AdsCanvasCollectionsFields","AdsGraphAPI","GraphAPIFieldUtils"],(function(a,b,c,d,e,f){"use strict";var g=[b("GraphAPIFieldUtils").getFieldWithSubfields(b("AdsCanvasCollectionsFields").COLLECTION_THUMBNAILS,[b("AdsCanvasCollectionsFields").ELEMENT_CHILD_INDEX,b("AdsCanvasCollectionsFields").ELEMENT_ID,b("GraphAPIFieldUtils").getFieldWithSubfields(b("AdsCanvasCollectionsFields").PHOTO,[b("AdsCanvasCollectionsFields").HEIGHT,b("AdsCanvasCollectionsFields").ID,b("AdsCanvasCollectionsFields").WIDTH])])],h=[b("GraphAPIFieldUtils").getFieldWithSubfields(b("AdsCanvasCollectionsFields").COLLECTION_HERO_IMAGE,[b("AdsCanvasCollectionsFields").IMAGES]),b("AdsCanvasCollectionsFields").COLLECTION_HERO_VIDEO];a.prototype.getCanvasCollectionsThumbnails=function(a){return b("AdsGraphAPI").get(e.id+".getCanvasCollectionsThumbnails").object("canvas",a).batched().get({fields:[].concat(g,[b("GraphAPIFieldUtils").getFieldWithSubfields("dynamic_setting",[b("GraphAPIFieldUtils").getFieldWithSubfields("child_documents",g)])])})};a.prototype.getCanvasCollectionsHeroMedia=function(a){return b("AdsGraphAPI").get(e.id+".getCanvasCollectionsHeroMedia").object("canvas",a).batched().get({fields:[].concat(h,[b("GraphAPIFieldUtils").getFieldWithSubfields("dynamic_setting",[b("GraphAPIFieldUtils").getFieldWithSubfields("child_documents",h)])])})};function a(){}e.exports=new a()}),null);
__d("AdsCanvasCollectionsThumbnailLoadFailedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"CANVAS.COLLECTIONS.THUMBNAIL_LOAD_FAILED");e.exports=a}),null);
__d("AdsCanvasCollectionsThumbnailsLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"CANVAS.COLLECTIONS.THUMBNAILS_LOADED");e.exports=a}),null);
__d("AdsCanvasCollectionsDataDispatcher",["AdsCanvasCollectionsCoverMediaLoadedDataAction","AdsCanvasCollectionsCoverMediaLoadFailDataAction","AdsCanvasCollectionsDataLoader","AdsCanvasCollectionsThumbnailLoadFailedDataAction","AdsCanvasCollectionsThumbnailsLoadedDataAction","AdsCanvasCollectionsUtils","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List;a.prototype.getCanvasCollectionsThumbnails=function(a){b("promiseDone")(b("AdsCanvasCollectionsDataLoader").getCanvasCollectionsThumbnails(a),function(c){c=b("AdsCanvasCollectionsUtils").convertThumbnailsFromAPI(c);b("AdsCanvasCollectionsThumbnailsLoadedDataAction").dispatch({canvasID:a,collectionThumbnails:c},{line:"38",module:"AdsCanvasCollectionsDataDispatcher.js"})},function(c){return b("AdsCanvasCollectionsThumbnailLoadFailedDataAction").dispatch({canvasID:a,error:c},{line:"44",module:"AdsCanvasCollectionsDataDispatcher.js"})})};a.prototype.getCanvasCollectionsHeroMedia=function(a){b("promiseDone")(b("AdsCanvasCollectionsDataLoader").getCanvasCollectionsHeroMedia(a),function(c){var d=this.$1(c);c=this.$2(c);d=d||c;b("AdsCanvasCollectionsCoverMediaLoadedDataAction").dispatch({canvasID:a,coverMedia:d},{line:"58",module:"AdsCanvasCollectionsDataDispatcher.js"})}.bind(this),function(c){return b("AdsCanvasCollectionsCoverMediaLoadFailDataAction").dispatch({canvasID:a,error:c},{line:"64",module:"AdsCanvasCollectionsDataDispatcher.js"})})};a.prototype.$1=function(a){var b=g([]);a.collection_hero_image!=null&&a.collection_hero_image.images!=null&&a.collection_hero_image.images.length>0&&(b=b.push({height:a.collection_hero_image.images[0].height,source:a.collection_hero_image.images[0].source,type:"image",width:a.collection_hero_image.images[0].width}));a.dynamic_setting&&a.dynamic_setting.child_documents.map(function(a){a.collection_hero_image!=null&&a.collection_hero_image.images!=null&&a.collection_hero_image.images.length>0&&(b=b.push({height:a.collection_hero_image.images[0].height,source:a.collection_hero_image.images[0].source,type:"image",width:a.collection_hero_image.images[0].width}))});return b.count()===0?null:b};a.prototype.$2=function(a){var b=g([]);a.collection_hero_video&&(b=b.push({type:"video",id:a.collection_hero_video.id}));a.dynamic_setting&&a.dynamic_setting.child_documents.map(function(a){a.collection_hero_video&&(b=b.push({type:"video",id:a.collection_hero_video.id}))});return b.count()===0?null:b};function a(){}e.exports=new a()}),null);
__d("AdsCanvasCollectionsRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record({collectionThumbnails:void 0,editorDialogThumbnails:void 0,selectedThumbnails:void 0});g=babelHelpers.inherits(a,c);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("AdsDynamicAdCustomizationConstants",[],(function(a,b,c,d,e,f){"use strict";a={MAX_ADDITIONAL_LANGUAGES:48};e.exports=a}),null);
__d("AdsCanvasCollectionsSetThumbnailEditorThumbnailsDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="CANVAS.COLLECTIONS.SET_THUMBNAIL_EDITOR_THUMBNAILS";e.exports={actionType:a}}),null);
__d("AdsCanvasCollectionsSetThumbnailsForCanvasDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="CANVAS.COLLECTIONS.SET_THUMBNAILS_FOR_CANVAS";e.exports={actionType:a}}),null);
__d("AdsCanvasCollectionsStore",["AdsCanvasCollectionsDataDispatcher","AdsCanvasCollectionsRecord","AdsCanvasCollectionsSetThumbnailEditorThumbnailsDataActionFlux","AdsCanvasCollectionsSetThumbnailsForCanvasDataActionFlux","AdsCanvasCollectionsThumbnailLoadFailedDataActionFlux","AdsCanvasCollectionsThumbnailsLoadedDataActionFlux","AdsCanvasDocumentSaveSuccessDataActionFlux","AdsDataAtom","FluxLoadObjectStore","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("gkx")("779516");g=babelHelpers.inherits(a,b("FluxLoadObjectStore"));g&&g.prototype;a.prototype.__getActionTypes=function(){return h?[b("AdsCanvasCollectionsSetThumbnailEditorThumbnailsDataActionFlux").actionType,b("AdsCanvasCollectionsSetThumbnailsForCanvasDataActionFlux").actionType,b("AdsCanvasCollectionsThumbnailLoadFailedDataActionFlux").actionType,b("AdsCanvasCollectionsThumbnailsLoadedDataActionFlux").actionType,b("AdsCanvasDocumentSaveSuccessDataActionFlux").actionType]:null};a.prototype.reduce=function(a,c){__p&&__p();c=c.action;var d,e,f;switch(c.type){case b("AdsCanvasCollectionsThumbnailsLoadedDataActionFlux").actionType:e=c.canvasID;f=c.collectionThumbnails;var g=new(b("AdsCanvasCollectionsRecord"))({collectionThumbnails:f,editorDialogThumbnails:b("immutable").List([]),selectedThumbnails:f.slice(0,4)});return this.__handleOne(a,e,g);case b("AdsCanvasCollectionsThumbnailLoadFailedDataActionFlux").actionType:e=c.canvasID;g=c.error;return this.__handleOne(a,e,g);case b("AdsCanvasCollectionsSetThumbnailsForCanvasDataActionFlux").actionType:e=c.canvasID;g=c.selectedThumbnails;d=this.get(e).getValueEnforcing();f=d.get("collectionThumbnails");g.map(function(a){var b=f.findIndex(function(b){return b.element_id===a.element_id&&b.element_child_index===a.element_child_index});f=f.set(b,a)});return this.__handleOne(a,e,d.set("collectionThumbnails",f).set("selectedThumbnails",g).set("editorDialogThumbnails",b("immutable").List([])));case b("AdsCanvasCollectionsSetThumbnailEditorThumbnailsDataActionFlux").actionType:e=c.canvasID;g=c.thumbnails;d=this.get(e).getValueEnforcing();return this.__handleOne(a,e,d.set("editorDialogThumbnails",g));case b("AdsCanvasDocumentSaveSuccessDataActionFlux").actionType:return this.__setEmpty(a,[c.canvasID]);default:return a}};a.prototype.__load=function(a){b("AdsCanvasCollectionsDataDispatcher").getCanvasCollectionsThumbnails(a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("AdsUEditorCollectionCoverMediaChangeIndexActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="COLLETION.COVER_MEDIA_CHANGE_INDEX";e.exports={actionType:a}}),null);
__d("AdsCanvasCollectionsUIStore",["AdsCanvasCollectionsToggleThumbnailSelectorDialogDataActionFlux","AdsDataAtom","AdsUEditorCollectionCoverMediaChangeIndexActionFlux","FluxReduceStore","adsCreateStoreSelector","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("gkx")("779516");g=babelHelpers.inherits(j,b("immutable").Record({selectedCanvasIndex:0,showThumbnailSelectorDialog:!1}));g&&g.prototype;function j(){g.apply(this,arguments)}c=babelHelpers.inherits(a,b("FluxReduceStore"));h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];return c=(a=h.constructor).call.apply(a,[this].concat(f)),this.getSelectedCanvasIndex=b("adsCreateStoreSelector")([this],function(){return this.getState().selectedCanvasIndex}.bind(this),e.id),c}a.prototype.getInitialState=function(){return new j()};a.prototype.__getActionTypes=function(){return i?[b("AdsCanvasCollectionsToggleThumbnailSelectorDialogDataActionFlux").actionType,b("AdsUEditorCollectionCoverMediaChangeIndexActionFlux").actionType]:null};a.prototype.reduce=function(a,c){c=c.action;switch(c.actionType){case b("AdsCanvasCollectionsToggleThumbnailSelectorDialogDataActionFlux").actionType:return a.set("showThumbnailSelectorDialog",c.showDialog);case b("AdsUEditorCollectionCoverMediaChangeIndexActionFlux").actionType:return a.set("selectedCanvasIndex",c.index);default:return a}};a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("adsUEditorAdgroupIsDynamicCanvasSelector",["AdsBulkValueUtils","AdsCanvasAdUtils","AdsCanvasDocumentStore","AdsUEditorSelectorUtils","adsCreateSelector","adsCreateStoreSelector","adsUEditorSelectedAdgroupsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("adsCreateSelector")([b("adsUEditorSelectedAdgroupsSelector")],b("AdsUEditorSelectorUtils").memoizeBulkAggregation(function(a){return a.map(function(a){return b("AdsCanvasAdUtils").getCanvasID(b("AdsCanvasAdUtils").getDestinationLinkFromAdgroup(a))})}),{name:e.id+".bulkCanvasIDSelector"});a=b("adsCreateStoreSelector")(function(a){return[].concat(g.getStores(a),[b("AdsCanvasDocumentStore")])},function(a){a=b("AdsBulkValueUtils").getUniformValue(g(a));if(a==null||a==="")return{isCanvasLoaded:!0,isDynamicCanvas:!1};a=b("AdsCanvasDocumentStore").get(a);if(!a.hasValue())return{isCanvasLoaded:!1,isDynamicCanvas:!1};a=a.getValueEnforcing();return{isCanvasLoaded:!0,isDynamicCanvas:!!a.dynamicSetting}},e.id+".selector");e.exports=a}),null);
__d("adsUEditorAdgroupCanvasCollectionsFieldSelector",["AdsAdgroupSpecUtils","AdsAPIAdgroupRecordUtils","AdsBulkValueUtils","AdsCanvasAdUtils","AdsCanvasCollectionsConstants","AdsCanvasCollectionsStore","AdsStoreUtils","AdsUEditorAdgroupBulkSelectors","AdsUEditorAdgroupSpecPathPluginAdObjectsUtils","AdsUEditorSelectorUtils","AdsUnifiedCreativeAPIFields","adsCreateSelector","adsUEditorAdgroupIsDynamicCanvasSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorSelectedAdgroupIDsSelector","adsUEditorSelectedAdgroupsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsUEditorSelectedAdgroupsSelector")],b("AdsUEditorSelectorUtils").memoizeBulkAggregation(function(a){return a.map(function(a){return b("AdsCanvasAdUtils").getCanvasID(b("AdsCanvasAdUtils").getDestinationLinkFromAdgroup(a))})}),{name:e.id+".bulkCanvasIDSelector"});c=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],b("AdsUEditorSelectorUtils").memoizeBulkAggregation(function(a){return a.map(function(a){var c=b("AdsUEditorAdgroupSpecPathPluginAdObjectsUtils").getAdgroupSpecPathPlugin(a);a=b("AdsAPIAdgroupRecordUtils").getCollectionThumbnails(a.adgroup,c);return a?a:b("AdsCanvasCollectionsConstants").EMPTY_COLLECTION_THUMBNAILS})}),{name:e.id+".bulkCollectionThumbnailsSelector"});d=b("adsCreateSelector")([b("adsUEditorSelectedAdgroupsSelector")],b("AdsUEditorSelectorUtils").memoizeBulkAggregation(function(a){return a.map(function(a){return b("AdsAdgroupSpecUtils").isVideoAd(a)})}),{name:e.id+".bulkIsVideoMediaSelected"});f=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],b("AdsUEditorSelectorUtils").memoizeBulkAggregation(function(a){return a.map(function(a){var c=b("AdsUEditorAdgroupSpecPathPluginAdObjectsUtils").getAdgroupSpecPathPlugin(a);return!!b("AdsAPIAdgroupRecordUtils").getCollectionThumbnails(a.adgroup,c)})}),{name:e.id+".bulkIsCanvasCollectionAdSelector"});var g=b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").videoID);a=b("adsCreateSelector")([b("adsUEditorSelectedAdgroupIDsSelector"),a,c,d,g,f,b("AdsStoreUtils").toSelector(b("AdsCanvasCollectionsStore")),b("adsUEditorAdgroupIsDynamicCanvasSelector")],function(a,c,d,e,f,g,h,i){__p&&__p();h=i.isCanvasLoaded;i=i.isDynamicCanvas;c=b("AdsBulkValueUtils").getUniformValue(c,null);d=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(d,b("AdsCanvasCollectionsConstants").EMPTY_COLLECTION_THUMBNAILS);g=b("AdsBulkValueUtils").getUniformValue(g,!1);f=b("AdsBulkValueUtils").getUniformValue(f,null);var j=!1,k=!0,l=!1;if(c!=null&&c!==""){var m=b("AdsCanvasCollectionsStore").get(c);l=b("AdsCanvasCollectionsStore").get(c).hasError();var n=b("AdsCanvasCollectionsStore").get(c).hasValue();k=l||n;if(n){n=m.getValueEnforcing();j=n.get("collectionThumbnails").count()>=b("AdsCanvasCollectionsConstants").MAX_COLLECTION_THUMBNAILS}}m=b("AdsBulkValueUtils").getUniformValue(e,!1);return{adgroupIDs:a,canvasID:c,collectionThumbnails:d,hasLoadErrors:l,isCanvasCollectionAd:g,isCanvasCollectionsEligible:j,isDynamicCanvas:i,isReady:k&&h,isVideoMediaSelected:m,videoID:f}},{name:e.id+".selector"});e.exports=a}),null);
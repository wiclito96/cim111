if (self.CavalryLogger) { CavalryLogger.start_js(["zbzLS"]); }

__d("AdPreviewMode",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({AD_VIEW:null,POST_CLICK:null});e.exports=a}),null);
__d("tabSwitched",["AdPreviewMode","Arbiter","CSS","DOMQuery"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Arbiter").inform("AdPreview/TabSwitched",a)}function c(a){var c=b("DOMQuery").getRootElement(),d=b("DOMQuery").find(c,"iframe[id='"+a.adViewElementID+"']");c=b("DOMQuery").find(c,"div[id='"+a.postClickElementID+"']");a.tabName===b("AdPreviewMode").AD_VIEW?(b("CSS").show(d),b("CSS").hide(c)):a.tabName===b("AdPreviewMode").POST_CLICK&&(b("CSS").hide(d),b("CSS").show(c))}e.exports={informTabSwitched:a,handleTabSwitched:c}}),null);
__d("PixelNumConverter",[],(function(a,b,c,d,e,f){function g(a){return a!=null&&!isNaN(a)&&isFinite(a)&&a!==""}a={pixelValue:function(a){return g(a)?Number(a)+"px":"auto"},numValue:function(a){a=a.replace("px","");return g(a)?Number(a):0}};e.exports=a}),null);
__d("stopIframe",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.contentWindow;a.stop?a.stop():a.document.execCommand&&a.document.execCommand("Stop")}e.exports=a}),null);
__d("AdPreviewIFramePOSTRequest",["Arbiter","CSS","DOM","DOMEventListener","Form","lowerFacebookDomain","stopIframe","tabSwitched"],(function(a,b,c,d,e,f){__p&&__p();var g=b("tabSwitched").handleTabSwitched;function h(a,c){if(!c)return;var d=b("DOMEventListener").add(a,"load",function(){if(!c)return;b("CSS").hide(c);d.remove();b("Arbiter").inform("AdPreview/IFrameLoadSuccess",{iframe:a})});b("CSS").show(c)}a={init:function(a,c,d,e,f){__p&&__p();function i(){h(e,f),b("Form").post(a,c,d)}b("lowerFacebookDomain")();i();return b("Arbiter").subscribe(["contextualLayer/toggle","AdPreview/TabSwitched"],function(a,c){switch(a){case"contextualLayer/toggle":if(!b("DOM").contains(c.contentRoot,e))break;c.show?i():b("stopIframe")(e);break;case"AdPreview/TabSwitched":g(c);break}})}};e.exports=a}),null);
__d("AdPreviewIFrameResizeListener",["Arbiter","DOM","PixelNumConverter","Style","lowerFacebookDomain"],(function(a,b,c,d,e,f){__p&&__p();a={listen:function(a,c,d,e){__p&&__p();var f=!1;b("lowerFacebookDomain")();return b("Arbiter").subscribe(["iframe/resize","contextualLayer/toggle"],function(g,h){__p&&__p();if(g==="iframe/resize"){if(f||h.frame!==a)return;c.height=h.frameHeight;if(!d)return;g=!e||!h.storyHeight?h.frameHeight:h.storyHeight-1;b("Style").set(d,"height",b("PixelNumConverter").pixelValue(g))}else{if(!b("DOM").contains(h.contentRoot,c))return;h.show?f=!1:f=!0}})}};e.exports=a}),null);
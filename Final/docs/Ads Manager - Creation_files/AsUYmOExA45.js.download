if (self.CavalryLogger) { CavalryLogger.start_js(["4Iq+8"]); }

__d("AdsPaymentsInfraTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:AdsPaymentsInfraLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:AdsPaymentsInfraLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:AdsPaymentsInfraLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAccountID=function(a){this.$1.account_id=a;return this};a.prototype.setAmount=function(a){this.$1.amount=a;return this};a.prototype.setBrandID=function(a){this.$1.brand_id=a;return this};a.prototype.setCompanyID=function(a){this.$1.company_id=a;return this};a.prototype.setCredentialID=function(a){this.$1.credential_id=a;return this};a.prototype.setCurrency=function(a){this.$1.currency=a;return this};a.prototype.setElapsedMs=function(a){this.$1.elapsed_ms=a;return this};a.prototype.setErrorMsg=function(a){this.$1.error_msg=a;return this};a.prototype.setExceptionMsg=function(a){this.$1.exception_msg=a;return this};a.prototype.setInvoiceID=function(a){this.$1.invoice_id=a;return this};a.prototype.setJobName=function(a){this.$1.job_name=a;return this};a.prototype.setLimitID=function(a){this.$1.limit_id=a;return this};a.prototype.setOrgID=function(a){this.$1.org_id=a;return this};a.prototype.setReadOnly=function(a){this.$1.read_only=a;return this};a.prototype.setRequestIDString=function(a){this.$1.request_id_string=a;return this};a.prototype.setResults=function(a){this.$1.results=a;return this};a.prototype.setStackTrace=function(a){this.$1.stack_trace=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setStepMsg=function(a){this.$1.step_msg=a;return this};a.prototype.setStepName=function(a){this.$1.step_name=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={account_id:!0,amount:!0,brand_id:!0,company_id:!0,credential_id:!0,currency:!0,elapsed_ms:!0,error_msg:!0,exception_msg:!0,invoice_id:!0,job_name:!0,limit_id:!0,org_id:!0,read_only:!0,request_id_string:!0,results:!0,stack_trace:!0,step_msg:!0,step_name:!0,time:!0,weight:!0};e.exports=a}),null);
__d("PaymentsFlowsUIConstants",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD_CREDITS_BUTTON:"add_credits",BANK_POPUP_BLOCK_MESSAGE:"popup_message",SECURITY_VERI_TEXT:"password_popup",SECURITY_VERI_FAILED_TEXT:"password_failed",BANK_PRICEPOINTS:"payment_pricepoints",ITEM_ID:"fbpayments_item",ITEM_PRICE_ID:"fbpayments_item_price",MOBILE_DROPDOWN_CONTAINER:"mobile_dropdown_container",MOBILE_INPUT_CONTAINER:"mobile_input_container",BOOST_PRICE:"boost_price",BOOST_BUTTON:"boost",BUY_BUTTON:"buy",IFRAME_CHANGE_PM_LINK:"iframe_change_pm_link"});e.exports=a}),null);
__d("NewCreditCardInline",["errorCode","fbt","AdsPaymentsInfraTypedLogger","AsyncRequest","Banzai","CSS","Form","PaymentsFlowsUIConstants","PaymentTokenProxyUtils","$","ge"],(function(a,b,c,d,e,f,g,h){__p&&__p();c={endpoint:"/ajax/payments/credit_card/",cc_form:null,data_form:null,waterfall_data:null,test_mode:null,initSubmit:function(a,b,c){this.cc_form=a,this.data_form=b,this.context_id=c},onSubmit:function(){__p&&__p();if(!this.cc_form){this.completePayment(1);return!1}var c=new Error(),d=new(b("AdsPaymentsInfraTypedLogger"))();d.setExceptionMsg(c.stack);d.setJobName("ppp");d.log();this.cc_form.onSubmit();c=b("Form").serialize(this.data_form);if(!this.cc_form.validate()){a.PaymentsFlows.enableButton(b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON);return!1}this.startLoading();d=b("PaymentTokenProxyUtils").getURI({tpe:this.endpoint});c=new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setData(c).setHandler(this.requestHandler.bind(this)).setTransportErrorHandler(this.transportErrorHandler.bind(this.cc_form,this)).setURI(d).setRelativeTo(this.data_form);c.send()},requestHandler:function(a){a=a.getPayload();if(a.has_errors){this.stopLoading();return!1}a=a.cc_id;this.completePayment(a)},completePayment:function(b){b={success:!0,cc_id:b,credit_card_added:!0,context_id:this.context_id};a.PaymentsFlows.processPopup(b)},transportErrorHandler:function(a,c){var d;this.stopLoading();c.payload={error_codes:(d={},d[1383001]=h._("There was a problem with your request. Please try again."),d)};c.payload.button_to_enable_on_error=b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON;a.errorHandler(c)},startLoading:function(){b("ge")("loading_payment")&&b("CSS").show(b("$")("loading_payment")),b("ge")("inline_cc_body")&&b("CSS").hide(b("$")("inline_cc_body"))},stopLoading:function(){b("ge")("loading_payment")&&b("CSS").hide(b("$")("loading_payment")),b("ge")("inline_cc_body")&&b("CSS").show(b("$")("inline_cc_body")),a.PaymentsFlows.enableButton(b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON)},initWaterfallLog:function(a,b){this.waterfall_data=a,this.test_mode=b},setWaterfallLog:function(){var a={step_id:"prompt_purchase_fullpage",data:this.waterfall_data,is_test:this.test_mode};b("Banzai").post("payments_waterfall",a,b("Banzai").VITAL)}};e.exports=c}),null);
__d("XAdsPaymentsGetPricepointController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/payments/pricepoint/",{context_id:{type:"Int",required:!0},amount:{type:"String",required:!0},require_async_response:{type:"Bool",defaultValue:!1}})}),null);
__d("PaymentsFlowsBase",["csx","fbt","AdsCurrencyFormatter","AdsPaymentFlowBanzaiEvents","AdsPaymentFlowBanzaiEventTypes","AdsPaymentFlowBanzaiLogger","Arbiter","AsyncRequest","Banzai","CSS","Dialog","DocRPC","DOM","NewCreditCardInline","PaymentsFlow","PaymentsFlowsUIConstants","XAdsPaymentsGetPricepointController","$","ge"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("AdsCurrencyFormatter").parsePECurrency;function a(a,c,d){this.context_id=a,this.orderId=c,this._clickLogs=[],this._hasCanceled=!1,this.trackingID=d,b("Arbiter").subscribe("layer_hidden",this.onClose.bind(this)),b("DocRPC").publish(this,"paymentFlowAPI"),Object.assign(this,b("PaymentsFlowsUIConstants"))}Object.assign(a.prototype,{DIALOG_ENDPOINT:"/fbml/ajax/dialog/",ASYNC_ENDPOINT:"/ajax/flows/",oscifPrices:{},methodConfigs:{},itemUpdateNeeded:!1,context_id:null,anySelectedMethod:{},useIconRendering:!1,renderNewCCInline:!1,cancelSurveyDialog:null,cancelConfirmationDialog:null,isPaymentsRedesign:!1,logActivity:function(a){b("Banzai").post("payments",a,b("Banzai").VITAL)},onClose:function(a,b){b.type=="Dialog"&&!this._hasCanceled&&(this.saveMethodActivityLog("cancel"),this._hasCanceled=!0)},onPurchaseSubmit:function(a,c){__p&&__p();this.disableButton(b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON);this.updateCouponStatus();a||(a=this.getPaymentMethod());this.logMethodSubmit(a);this.saveMethodActivityLog("submit",a);var d=this.methodConfigs[a];if(d&&d.open_popup){c.add_num_credits||(c.add_num_credits=this.getAddNumCredits());a=="new_cc"&&this.renderNewCCInline?b("NewCreditCardInline").onSubmit():this.openPopup(d,c);return!1}d=this.getPricepointDropdown(a);c={};d&&(c.provider_add_num_credits=d.value);c.should_update_country=!1;this.submitDialogRequest(c);return!1},updateCountryRefresh:function(a){this.submitDialogRequest({selected_country:a,should_update_country:!0})},onUserClickCancel:function(){this.submitDialogRequest({cancel:!0});this.cancelSurveyDialog&&this.cancelSurveyDialog.show();this.closePopup(!1);return!1},onDecisionSubmit:function(a){this.submitDialogRequest({decision:a});return!1},onAmountSubmit:function(a){var b=document.getElementById("amount-entered");a=i(a,b.value);this.submitDialogRequest({amount:a,decision:!0});return!1},calculateFee:function(a,c,d,e,f,g){__p&&__p();var i=document.getElementById("amount-entered");c=document.getElementById("fee-amount");d=document.getElementById("balance-amount");var j=document.getElementById("amount-warning");e=document.getElementById("budget-warning");var k=h._("--");b("DOM").setContent(c,k);b("DOM").setContent(d,k);b("DOM").empty(j);b("DOM").empty(e);c=function(c){b("DOM").setContent(j,f.generalError),b("AdsPaymentFlowBanzaiLogger").log(b("AdsPaymentFlowBanzaiEvents").CALCULATE_ALTPAY_FEE_FAILURE,b("AdsPaymentFlowBanzaiEventTypes").FACEBOOK,a.toString(),g,b("PaymentsFlow").getSelectedPaymentMethod())};d=function(c){c.payload&&c.payload.amount&&(i.value=c.payload.amount,b("AdsPaymentFlowBanzaiLogger").log(b("AdsPaymentFlowBanzaiEvents").CALCULATE_ALTPAY_FEE_SUCCESS,b("AdsPaymentFlowBanzaiEventTypes").FACEBOOK,a.toString(),g,b("PaymentsFlow").getSelectedPaymentMethod(),{fee_amount:c.payload.fee_amount}))};k=b("XAdsPaymentsGetPricepointController").getURIBuilder().setInt("context_id",a).setString("amount",i.value).getURI();new(b("AsyncRequest"))().setURI(k).setMethod("POST").setStatusElement("fee-spinner").setErrorHandler(c.bind(this)).setHandler(d.bind(this)).send();b("AdsPaymentFlowBanzaiLogger").log(b("AdsPaymentFlowBanzaiEvents").SUBMIT_CALCULATE_ALTPAY_FEE,b("AdsPaymentFlowBanzaiEventTypes").USER,a.toString(),g,b("PaymentsFlow").getSelectedPaymentMethod(),{amount:i.value})},setSize:function(a){__p&&__p();if(this.isPaymentsRedesign){b("PaymentsFlow").setSize(a);return}if(a.frame!="partner_iframe")return;var c=b("$")("partner_iframe"),d=Number(a.width);a=Number(a.height);c.style.overflowY="hidden";a&&!isNaN(a)&&(c.style.height=a+"px");if(d&&!isNaN(d)){c.style.width=d+"px";a=c.parentNode;(a.scrollWidth&&d!=a.scrollWidth||a.clientWidth&&d!=a.clientWidth)&&b("Dialog").getCurrent().setContentWidth(d)}},forceFlowStep:function(a,b){b=b?b:{};b.force_flow_step=a;this.submitDialogRequest(b);return!1},updatePricepoints:function(){var a=this.getFormData(),c=function(a){b("DOM").setContent(b("ge")(b("PaymentsFlowsUIConstants").BANK_PRICEPOINTS),a.getPayload())};if(!a.currency)return;this.submitAsyncRequest({currency:a.currency,update_pricepoints:1},c)},updateItem:function(a){a=typeof a!=="undefined"?a:this.getPaymentMethod();var c=function(a){b("DOM").setContent(b("ge")(b("PaymentsFlowsUIConstants").ITEM_ID),a.getPayload())};this.submitAsyncRequest({payment_method:a,amount:this.getAddNumCredits(),country_update:this.getCountryUpdate(a),update_item:1},c)},oscifUpdateMobileCountry:function(){__p&&__p();var a=function(a){__p&&__p();a=a.getPayload();if(a){var c=a.item_update,d=a.dropdowns_update,e=a.mobile_input_update;a=a.is_price_only?b("ge")(b("PaymentsFlowsUIConstants").ITEM_PRICE_ID):b("ge")(b("PaymentsFlowsUIConstants").ITEM_ID);a&&b("DOM").setContent(a,c);a=b("ge")(b("PaymentsFlowsUIConstants").MOBILE_DROPDOWN_CONTAINER);a&&b("DOM").replace(a,d);c=b("ge")(b("PaymentsFlowsUIConstants").MOBILE_INPUT_CONTAINER);c&&b("DOM").replace(c,e)}},c=this.getPaymentMethod(),d=this.getCountryUpdate(c);this.submitAsyncRequest({payment_method:c,amount:this.getAddNumCredits(),country_update:d,update_item_and_dropdowns:1},a)},onUpdatePaymentMethod:function(a,c){__p&&__p();this.anySelectedMethod[a]=1;for(var d in this.anySelectedMethod){var e=this.getDropdownContainer(d);e&&b("CSS").conditionShow(e,a==d);e=b("ge")(b("PaymentsFlowsUIConstants").MOBILE_INPUT_CONTAINER);e&&b("CSS").conditionShow(e,a=="mobile");e=b("DOM").scry(document.body,"div._5179")[0];e&&b("CSS").conditionShow(e,a=="mobile");e=b("DOM").scry(document.body,"div._55wj")[0];e&&(b("CSS").conditionShow(e,a=="new_cc"),a=="new_cc"&&(this.renderNewCCInline=!0,b("NewCreditCardInline").setWaterfallLog()))}e=b("DOM").scry(this.getContainer(),".selected");if(e.length>0)for(var f=0;f<e.length;f++)b("CSS").removeClass(e[f],"selected");if(c)this.itemUpdateNeeded&&this.updateItem(a);else{e=this.getContainer();c=b("DOM").scry(e,".default_pricepoint");var g=!1;for(var f=0;f<c.length;f++)g=g||c[f].id.lastIndexOf(a)!=-1;c=b("DOM").scry(e,".local_cur_amt");for(var f=0;f<c.length;f++)b("CSS").conditionShow(c[f],g)}this.logMethodClick(a)},saveMethodActivityLog:function(a,b){a={e:"payment_method_behavior",act:a,act_m:b,tid:this.trackingID,logs:this._clickLogs};this.logActivity(a);this._clickLogs=[]},logMethodClick:function(a){a={timestamp:Date.now(),method:a};this._clickLogs.push(a)},logMethodSubmit:function(a){a={timestamp:Date.now(),method:a,action:"submit"};this._clickLogs.push(a)},logRevealFlowsClick:function(a){a={method:a,action:"reveal_flows"};this._clickLogs.push(a)},logPayWithGameCardClick:function(){this.logActivity({e:"pay_with_game_card_behavior",act:"click",tid:this.trackingID})},setPaymentMethodConfig:function(a){this.methodConfigs=a},setItemUpdateNeeded:function(a){this.itemUpdateNeeded=a},setUseIconRendering:function(a){this.useIconRendering=a},updateCouponStatus:function(){if(!b("ge")("coupon_checkbox"))return;var a={context_id:this.context_id,var_name:"show_coupon_flow",var_value:document.getElementById("coupon_checkbox").checked};b("Banzai").post("flow_context",a,b("Banzai").VITAL)},updateCouponMessage:function(){document.getElementById("coupon_checkbox").checked?b("CSS").show(b("$")("flows_message")):b("CSS").hide(b("$")("flows_message"))},hideCouponCheckbox:function(){var a="coupon_checkbox_label";b("ge")(a)&&b("CSS").hide(a);a="coupon_learn_more_link";b("ge")(a)&&b("CSS").show(a)},setPaymentMethod:function(a){this.paymentMethod=a,b("ge")("payment_method_input")&&(b("ge")("payment_method_input").value=a),b("ge")("payment_option_input")&&(b("ge")("payment_option_input").value=a)},getPaymentMethod:function(){__p&&__p();if(this.paymentMethod)return this.paymentMethod;else{var a=this.getFormData();if(a.payment_method)return a.payment_method;else if(a.payment_option)return a.payment_option;else{a=b("DOM").scry(b("$")("payment_options"),'input[type="radio"]');var c=null;for(var d=0;d<a.length;d++)if(a[d].checked){c=a[d].value;break}return c}}},getAddNumCredits:function(){var a=this.getFormData();return a.add_num_credits?a.add_num_credits:this.getOscifAddNumCredits()},getOscifAddNumCredits:function(){var a=this.getPaymentMethod();a=this.getPricepointDropdown(a);if(!a)return this.oscifPrices.price;else return parseInt(a.value,10)},revealPurchaseItemPMSelection:function(){b("ge")("flows_body_content")&&b("CSS").show(b("$")("flows_body_content")),b("ge")("flows_default_button_message")&&b("CSS").hide(b("$")("flows_default_button_message")),b("ge")("country_test_area")&&b("CSS").show(b("$")("country_test_area"))},getCountryUpdate:function(a){a=b("ge")(a+"_country_dropdown");a&&(a=a.value);return a},getContainer:function(){return b("ge")("payment_body_and_buttons")},getPricepointDropdown:function(a){return b("ge")(a+"_dropdown")},getDropdownContainer:function(a){return b("ge")(a+"_dropdown_container")},revealFlows:function(a,c){c&&this.logRevealFlowsClick(a),b("ge")("flows_content")&&b("CSS").show(b("$")("flows_content")),b("ge")("flows_show_more")&&b("CSS").hide(b("$")("flows_show_more")),this.useIconRendering&&a!="mobile"&&this.hideButton(b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON),this.submitAsyncRequest({change_payment_method:!0})},showCountryDropdown:function(){b("ge")("country_test_message")&&b("CSS").hide(b("$")("country_test_message")),b("ge")("country_test_dropdown")&&b("CSS").show(b("$")("country_test_dropdown"))},submitAsyncRequest:function(a,c){a.context=this.getFormData().context,new(b("AsyncRequest"))().setURI(this.ASYNC_ENDPOINT).setHandler(c).setData(a).send()},openPopup:function(a,b){},closePopup:function(a){},processPopup:function(a){},processIFrame:function(a){},getFormData:function(){},submitDialogRequest:function(a){},enableButton:function(a){},disableButton:function(a){},showButton:function(a){},hideButton:function(a){},changeButtonText:function(a,b){},showSecurityVeriFailed:function(){b("ge")(b("PaymentsFlowsUIConstants").SECURITY_VERI_TEXT)&&b("CSS").hide(b("PaymentsFlowsUIConstants").SECURITY_VERI_TEXT),b("ge")(b("PaymentsFlowsUIConstants").SECURITY_VERI_FAILED_TEXT)&&b("CSS").show(b("PaymentsFlowsUIConstants").SECURITY_VERI_FAILED_TEXT)},handleSelectingOtherAmount:function(){var a=b("$")("select_amount"),c=b("$")("other_amount");if(a.checked)c.readOnly=!1,c.focus();else{a=parseFloat(c.value);a&&(c.value="")}},OtherAmount:function(){var a=b("$")("select_amount"),c=b("$")("other_amount");a.checked=!0;c.readOnly=!1},iFrameTimerId:0,iFrameTimeout:5e3,checkPayThreshold:10,checkPayInterval:2e3,checkPayCount:0,checkPaymentStatus:function(){var a=function(){b("ge")("checking_payment_status")&&b("CSS").show(b("$")("checking_payment_status"));var a=this.checkPayCount>=this.checkPayThreshold,d={force_async_notify:+a,payment_provider_completed:1,check_pay_count:this.checkPayCount};a?(this.checkPayCount=0,this.submitDialogRequest(d,"checkPayment")):this.submitAsyncRequest(d,c)}.bind(this),c=function(c){c=c.getPayload();b("ge")("checking_payment_status")&&b("CSS").hide(b("$")("checking_payment_status"));this.checkPayCount++;c.awaiting_payment?(b("ge")("payment_progress_bar")&&b("DOM").setContent(b("$")("payment_progress_bar"),c.progress_bar),setTimeout(a,this.checkPayInterval)):(this.checkPayCount=0,new(b("Dialog"))().setTitle(c.title).setBody(c.body).setButtons(c.buttons).setWideDialog(!0).show())}.bind(this);setTimeout(a,this.checkPayInterval)},iFrameInit:function(a){if(a){var c=function(){d.unsubscribe(),clearTimeout(this.iFrameTimerId)}.bind(this),d=b("Arbiter").subscribe("Connect.Unsafe.PAYMENT_PROVIDER_INIT",c);a=function(){c();var a={payment_provider_error:1,payment_provider_ec:1,payment_provider_msg:"Provider timed out"};this.forceFlowStep("WalletFlow",a)}.bind(this);setTimeout(a,this.iFrameTimeout)}},_lockedForProviderProcessing:!1,iFrameChangePaymentMethod:function(){if(this._lockedForProviderProcessing)return;this.submitDialogRequest({change_payment_method:1})},lockForProviderProcessing:function(){this._lockedForProviderProcessing=!0;var a=b("ge")(b("PaymentsFlowsUIConstants").IFRAME_CHANGE_PM_LINK);a&&b("CSS").addClass(a,"uiLinkSubtle")},unlockForProviderProcessing:function(){this._lockedForProviderProcessing=!1;var a=b("ge")(b("PaymentsFlowsUIConstants").IFRAME_CHANGE_PM_LINK);a&&b("CSS").removeClass(a,"uiLinkSubtle")}});e.exports=a}),null);
__d("PaymentsFlowsAsync",["Button","CSS","Dialog","DOM","Form","FullScreen","PaymentsFlow","PaymentsFlowsBase","PaymentsFlowsUIConstants","URI","Vector","ge"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("PaymentsFlowsBase"));h=g&&g.prototype;a.prototype.forceFlowStep=function(a,c){"use strict";if(this.isPaymentsRedesign){b("PaymentsFlow").handleProviderIframeResponse({back:"back"});return}this.closePopup();return h.forceFlowStep.call(this,a,c)};a.prototype._setupPopupOpenChecks=function(a,b){"use strict";this.popupTimerId=setInterval(function(){a()||this.onPopupClose(b)}.bind(this),this.pollingInterval),!a()?(this.showBlockedPopupMessage(),this.enableButton(b)):this.hideBlockedPopupMessage()};a.prototype._showPopup=function(a,c){"use strict";__p&&__p();var d=800,e=500,f=1,g=1,h=1;c!=null&&(c.is_paypal_digital_goods_flow?(d=420,e=550,f=0,g=0,h=0):c.is_paypal?(d=955,e=750):c.is_promotion&&(d=550,e=800));c=0;var i=0;window.screenLeft?(c=window.screenLeft,i=window.screenTop):window.screenX&&(c=window.screenX,i=window.screenY);var j=b("Vector").getViewportDimensions().x,k=b("Vector").getViewportDimensions().y;c=c+(j-d)/2;i=i+(k-e)/2;j="";b("FullScreen").isFullScreen()||(j="top="+i+",left="+c+",width="+d+",height="+e+",");this.popup=window.open(a.toString(),"CreditsFlowPopupWindow","location=yes,"+j+"resizable="+f+",toolbar="+g+",menubar="+h+",scrollbars=yes",!0)};a.prototype.openPopup=function(a,c){"use strict";__p&&__p();var d=a.popup_url;d=new(b("URI"))(d);a.use_payment_engine||(d.addQueryData(c),d.addQueryData({use_payment_engine:a.use_payment_engine}));c=b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON;this.disableButton(c);this._showPopup(d,a);this._setupPopupOpenChecks(function(){return this.popup&&!this.popup.closed}.bind(this),c);return!1};a.prototype.onPopupClose=function(a){"use strict";this.popupTimerId!==0&&(clearInterval(this.popupTimerId),this.popupTimerId=0),this.enableButton(a)};a.prototype.closePopup=function(a){"use strict";__p&&__p();this.onPopupClose(b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON);if(this.popup){this.popup.close();if(!this.popup.closed){var c=new(b("URI"))("/payments/message.php");a||c.addQueryData("cancel",1);this.popup.location=c.toString()}this.popup=null}};a.prototype.processGiftcardIFrame=function(a){"use strict";if(a.gc_result_code==="0"&&a.gc_fwd_url){window.goURI(a.gc_fwd_url);return!1}return!0};a.prototype.processIFrame=function(a){"use strict";__p&&__p();if(this.isPaymentsRedesign){b("PaymentsFlow").handleProviderIframeResponse(a);return}if(!this.processGiftcardIFrame(a))return;this.closePopup(!a.cancel);this.enableButton(b("PaymentsFlowsUIConstants").ADD_CREDITS_BUTTON);if(!a.cancel)a.change_method?this.forceFlowStep("WalletFlow"):this.submitDialogRequest(a);else{if(a.cancel_dialog){this.submitDialogRequest({cancel:"cancel"});return!1}this.showSecurityVeriFailed()}};a.prototype.processPopup=function(a){"use strict";if(!a.cancel&&a.context_id!=this.context_id)return;this.processIFrame(a)};a.prototype.getFormData=function(){"use strict";var a=b("Dialog").getCurrent();return a.getFormData()};a.prototype.submitDialogRequest=function(a){"use strict";if(this.isPaymentsRedesign){b("PaymentsFlow").handleProviderIframeResponse(a);return}var c=b("Dialog").getCurrent(),d=c.getBody(),e=Math.floor(Math.random()*Math.pow(2,32)).toString();a.form_post_key=e;b("Form").createHiddenInputs(a,d);c._submitForm("POST",this.DIALOG_ENDPOINT)};a.prototype.getButtonElem=function(a){"use strict";var c=b("Dialog").getCurrent();return c.getButtonElement(a)};a.prototype.enableButton=function(a){"use strict";a=this.getButtonElem(a);a&&b("Button").setEnabled(a,!0)};a.prototype.disableButton=function(a){"use strict";a=this.getButtonElem(a);a&&b("Button").setEnabled(a,!1)};a.prototype.showButton=function(a){"use strict";a=this.getButtonElem(a);a&&b("CSS").show(b("DOM").find(a,"^.uiButton"))};a.prototype.hideButton=function(a){"use strict";a=this.getButtonElem(a);a&&b("CSS").hide(b("DOM").find(a,"^.uiButton"))};a.prototype.changeButtonText=function(a,c){"use strict";var d=b("Dialog").getCurrent();d=d.getButtonElement(a);d&&b("Button").setLabel(d,c)};a.prototype.showBlockedPopupMessage=function(){"use strict";var a=b("ge")(b("PaymentsFlowsUIConstants").BANK_POPUP_BLOCK_MESSAGE);a&&b("CSS").show(a)};a.prototype.hideBlockedPopupMessage=function(){"use strict";var a=b("ge")(b("PaymentsFlowsUIConstants").BANK_POPUP_BLOCK_MESSAGE);a&&b("CSS").hide(a)};function a(){"use strict";g.apply(this,arguments)}Object.assign(a.prototype,{popup:null,pollingInterval:100,popupTimerId:0});e.exports=a}),null);
__d("PaymentsFlowsInstance",["Event"],(function(a,b,c,d,e,f){__p&&__p();var g;c={setInstance:function(b){g=b,a.PaymentsFlows=b},initCountryDropdown:function(a){a.subscribe("change",function(){g.updateCountryRefresh(a._input.value)})},setCancelSurveyDialog:function(a){g.cancelSurveyDialog=a},initCalculateFee:function(a,c,d,e,f,h,i){b("Event").listen(a,"click",function(){g.calculateFee(c,d,e,f,h,i)})},setUpPayWithGameCardClickLogger:function(a){b("Event").listen(a,"click",function(){g.logPayWithGameCardClick()})},setIsPaymentsRedesign:function(){g.isPaymentsRedesign=!0}};e.exports=c}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["2NvfG"]); }

__d("AdsCreateSavedAudienceDialog.react",["cx","fbt","AdsCCCategory","AdsCommonTargetingSentencesRenderer.react","AdsInfoTable.react","AdsInfoTableRow.react","AdsInfoTableSection.react","AdsIntelligentNotificationContainer.react","AdsInterfacesLogger","AdsLoadState_LEGACY","AdsSavedAudienceLoggingEvents","AdsTextInput.react","BUIAdoptionDialogButton.react","FDSSpinner.react","LayerFadeOnHide","LayerHideOnEscape","React","ScrollableArea.react","SUIBusinessTheme","SUIModal.react","SUIModalFooter.react","SUIModalHeader.react","SUIText.react","ads-lib-formatters"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ads-lib-formatters").createLimitedSigFigNumberFormatter(0,2);c=b("React").PropTypes;var k=600;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var event=this.props.isSaveAs?b("AdsSavedAudienceLoggingEvents").SAVE_AS_COMPLETE:b("AdsSavedAudienceLoggingEvents").SAVE_TARGETING_COMPLETE;b("AdsInterfacesLogger").log({eventName:event},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP);this.props.onSave()}.bind(this),this.$3=function(){b("AdsInterfacesLogger").log({eventName:b("AdsSavedAudienceLoggingEvents").SAVE_AS_CANCEL},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP),this.props.onCancel()}.bind(this),this.$7=function(a){this.props.onAudienceNameChange(a)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("SUIModal.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")},footer:b("React").createElement(b("SUIModalFooter.react"),{primaryButton:b("React").createElement(b("BUIAdoptionDialogButton.react"),{disabled:!this.$1(),label:h._("Save"),layerAction:"confirm",use:"confirm",onClick:this.$2}),secondaryButton:b("React").createElement(b("BUIAdoptionDialogButton.react"),{label:h._("Cancel"),use:"default",onClick:this.$3}),theme:b("SUIBusinessTheme")}),header:b("React").createElement(b("SUIModalHeader.react"),{theme:b("SUIBusinessTheme"),title:h._("Save Audience")}),isShown:this.props.isShown,key:"dialog",theme:b("SUIBusinessTheme"),width:k,onHide:this.$3},this.$4())};a.prototype.$1=function(){return this.props.isValidSpec&&this.props.audienceName.trim().length>0};a.prototype.$5=function(){return this.props.sentences.loadState===b("AdsLoadState_LEGACY").ERROR||!this.props.sentences.sentenceLines};a.prototype.$6=function(){return this.props.reach.loadState===b("AdsLoadState_LEGACY").ERROR||!this.props.reach.users};a.prototype.$4=function(){if(this.props.isLoading)return b("React").createElement(b("FDSSpinner.react"),null);else if(this.$5()){var a=h._("Could not retrieve targeting information.");return b("React").createElement(b("AdsIntelligentNotificationContainer.react"),{ccCardProps:{category:b("AdsCCCategory").ERROR,messageID:"save_audience_with_invalid_targeting_spec",textData:[{type:"PARAGRAPH",data:{text:a}}]}})}return b("React").createElement(b("ScrollableArea.react"),{className:"_3qgi",maxHeight:400},b("React").createElement(b("AdsInfoTable.react"),null,b("React").createElement(b("AdsInfoTableSection.react"),null,b("React").createElement(b("AdsInfoTableRow.react"),{label:h._("Audience Name")},b("React").createElement(b("AdsTextInput.react"),{placeholder:"Name your audience",value:this.props.audienceName,onChange:this.$7})),b("React").createElement(b("AdsInfoTableRow.react"),null,this.$8(),b("React").createElement(b("AdsCommonTargetingSentencesRenderer.react"),{sentences:this.props.sentences.sentenceLines})))))};a.prototype.$8=function(){return this.$6()?null:b("React").createElement(b("SUIText.react"),{size:"meta1",theme:b("SUIBusinessTheme")},b("React").createElement(b("SUIText.react"),{shade:"light",size:"meta1"},h._("Size:"))," ",h._("{number of people can be reached} people",[h._param("number of people can be reached",j(this.props.reach.users))]))};a.propTypes={audienceName:c.string.isRequired,isLoading:c.bool.isRequired,isSaveAs:c.bool,isShown:c.bool.isRequired,isValidSpec:c.bool.isRequired,onAudienceNameChange:c.func.isRequired,onCancel:c.func.isRequired,onSave:c.func.isRequired,reach:c.object.isRequired,sentences:c.object.isRequired};e.exports=a}),null);
__d("AdsCreateSavedAudienceDialogContainer.react",["AdsCreateSavedAudienceDialog.react","AdsLoadState_LEGACY","AdsNewIDs","AdsProductAudienceSpecsUtils","AdsSavedAudienceActions","AdsTargetingSentenceLinesStore","FluxMixinLegacy","React","isValidTargetingSpec"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"AdsCreateSavedAudienceDialogContainer",mixins:[b("FluxMixinLegacy")([b("AdsTargetingSentenceLinesStore")],{withProps:!0})],getInitialState:function(){return{audienceName:this.props.defaultName||""}},statics:{calculateState:function(a,c){a=b("AdsProductAudienceSpecsUtils").targetingWithoutProductAudience(c.targetingAPISpec);var d=!0,e;!b("isValidTargetingSpec")(a)?(e={loadState:b("AdsLoadState_LEGACY").ERROR},d=!1):e=b("AdsTargetingSentenceLinesStore").getTargeting(c.accountID,a,{discardPlacement:!0});c={loadState:b("AdsLoadState_LEGACY").ERROR};a=e.loadState===b("AdsLoadState_LEGACY").LOADING||c.loadState===b("AdsLoadState_LEGACY").LOADING;return{isLoading:a,isValidSpec:d,reach:c,sentences:e}}},propTypes:{accountID:a.string.isRequired,isSaveAs:a.bool,isShown:a.bool.isRequired,targetingAPISpec:a.object.isRequired,defaultName:a.node,onClose:a.func.isRequired,onSavedAudienceChange:a.func.isRequired},render:function(){return b("React").createElement(b("AdsCreateSavedAudienceDialog.react"),{audienceName:this.state.audienceName,isLoading:this.state.isLoading,isSaveAs:!!this.props.isSaveAs,isShown:this.props.isShown,isValidSpec:this.state.isValidSpec,reach:this.state.reach,sentences:this.state.sentences,onAudienceNameChange:this._onAudienceNameChange,onCancel:this.props.onClose,onSave:this._onSave})},_onAudienceNameChange:function(a){this.setState({audienceName:a})},_onSave:function(){var a=b("AdsProductAudienceSpecsUtils").targetingWithoutProductAudience(this.props.targetingAPISpec),c=b("AdsNewIDs").newNegativeID().toString();b("AdsSavedAudienceActions").createSavedAudiences([{accountID:this.props.accountID,name:this.state.audienceName,targeting:a,tempID:c}]);this.props.onSavedAudienceChange({id:c,name:this.state.audienceName,targeting:a});this.props.onClose()}});e.exports=c}),null);
__d("AdsTargetingSavedAudienceSaveButton.react",["fbt","AdsCreateSavedAudienceDialogContainer.react","FDSButton.react","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").Component;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(a){h.constructor.call(this,a),this.$3=function(){this.setState({showSaveAudienceDialog:!0})}.bind(this),this.$4=function(){this.setState({showSaveAudienceDialog:!1})}.bind(this),this.state={showSaveAudienceDialog:!1}}a.prototype.$1=function(){return this.props.targetingAPISpec.prospecting_audience!=null&&this.props.targetingAPISpec.prospecting_audience.sources!=null&&this.props.targetingAPISpec.prospecting_audience.sources.length!=0};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("FDSButton.react"),{isDisabled:this.$1(),label:g._("Save This Audience"),size:"medium",tooltip:this.$2(),use:"default",onClick:this.$3}),this.renderDialog())};a.prototype.renderDialog=function(){return!this.state.showSaveAudienceDialog?null:b("React").createElement(b("AdsCreateSavedAudienceDialogContainer.react"),{accountID:this.props.accountID,defaultName:this.props.defaultName,isShown:this.state.showSaveAudienceDialog,targetingAPISpec:this.props.targetingAPISpec,onClose:this.$4,onSavedAudienceChange:this.props.onSaveAudience})};a.prototype.$2=function(){return this.$1()?g._("Your automatic lookalike audience is optimized for your current campaign and can't be saved for future campaigns."):null};e.exports=a}),null);
__d("TargetingSectionDivider.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").Component;h=babelHelpers.inherits(a,c);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("hr",{className:"_3nv9"})};function a(){h.apply(this,arguments)}a.displayName="TargetingSectionDivider";a.targetingSpecFields={};e.exports=a}),null);
__d("AdsCommonTargetingDisableLookalikeLocationViewDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";a="ADS_COMMON_TARGETING.DISABLE_LOOKALIKE_LOCATION_VIEW";e.exports={actionType:a}}),null);
__d("AdsLookalikeLocationStore",["AdsBulkValueUtils","AdsCommonTargetingDisableLookalikeLocationViewDataActionFlux","AdsCommonTargetingTargetingChangeActionFlux","AdsCommonTargetingViewActionType","AdsDataAtom","AdsInterfacesLogEvents","AdsInterfacesLogger","AdsLookalikeTargetCountryUtils","AdsTargetingSetTargetingBulkApiSpecDataActionFlux","FluxReduceStore","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("AdsInterfacesLogEvents").Event,j=b("gkx")("779516");g=babelHelpers.inherits(k,b("immutable").Record({disableLookalikeLocationView:!1}));g&&g.prototype;function k(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new k()};a.prototype.__getActionTypes=function(){return j?[b("AdsCommonTargetingDisableLookalikeLocationViewDataActionFlux").actionType,b("AdsCommonTargetingTargetingChangeActionFlux").actionType,b("AdsTargetingSetTargetingBulkApiSpecDataActionFlux").actionType]:null};a.prototype.reduce=function(a,c){c=c.action;if(!c.actionType)return a;switch(c.actionType){case b("AdsCommonTargetingDisableLookalikeLocationViewDataActionFlux").actionType:this.$AdsLookalikeLocationStore1(i.TARGETING_LOOKALIKE_LOCATION_VIEW_DISMISSED);return a.set("disableLookalikeLocationView",!0);case b("AdsCommonTargetingTargetingChangeActionFlux").actionType:return c.methodName?this.$AdsLookalikeLocationStore2(a,c):a;case b("AdsTargetingSetTargetingBulkApiSpecDataActionFlux").actionType:return c.spec?this.$AdsLookalikeLocationStore3(a,c):a;default:return a}};a.prototype.$AdsLookalikeLocationStore2=function(a,c){if(a.disableLookalikeLocationView)return a;var d=!1;(c.methodName===b("AdsCommonTargetingViewActionType").includeAudience||c.methodName===b("AdsCommonTargetingViewActionType").changeCustomAudiences)&&(c.customAudiences&&!c.customAudiences.every(function(a){return a.lookalike_spec})&&(d=!0,this.$AdsLookalikeLocationStore1(i.TARGETING_LOOKALIKE_LOCATION_VIEW_HIDDEN)));return a.set("disableLookalikeLocationView",d)};a.prototype.$AdsLookalikeLocationStore3=function(a,c){__p&&__p();var d=c.spec.custom_audiences;c=c.spec.geo_locations;if(!d||!c)return a.set("disableLookalikeLocationView",!1);var e=!1;d=b("AdsBulkValueUtils").getUniformValue(d);c=b("AdsBulkValueUtils").getUniformValue(c);if(d&&c&&d.length>0&&d.every(function(a){return a.lookalike_spec})){c=b("AdsLookalikeTargetCountryUtils").areConsistent(d,c);c||(e=!0,this.$AdsLookalikeLocationStore1(i.TARGETING_LOOKALIKE_LOCATION_VIEW_HIDDEN))}else d&&d.length===0?e=!1:(e=!0,this.$AdsLookalikeLocationStore1(i.TARGETING_LOOKALIKE_LOCATION_VIEW_HIDDEN));return a.set("disableLookalikeLocationView",e)};a.prototype.$AdsLookalikeLocationStore1=function(a){b("AdsInterfacesLogger").log({eventName:a},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
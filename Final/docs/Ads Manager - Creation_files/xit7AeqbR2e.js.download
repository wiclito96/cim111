if (self.CavalryLogger) { CavalryLogger.start_js(["+g7mu"]); }

__d("AdsMessengerPartialAutomatedCreationTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({INTRO_MESSAGE:"introMessage",QUESTIONS:"questions",CONFIRMATION_MESSAGE:"confirmationMessage",REMINDER:"reminder",PRIVACY_POLICY:"privacyPolicy"});b=Object.freeze({IN_PROGRESS:"inProgress",ERROR:"error",NO_ERROR:"noError"});c=Object.freeze({MULTIPLE_CHOICE:"multipleChoice",CUSTOM:"custom"});d=Object.freeze({NON_LIVE_AGENT:"nonLiveAgent",LIVE_AGENT:"liveAgent"});e.exports={AdsMessengerPartialAutomatedCreationNonPrefillAnswer:c,AdsMessengerPartialAutomatedCreationSections:a,AdsMessengerPartialAutomatedCreationSectionStatus:b,AdsMessengerPartialAutomatedCreationReminderTextOption:d}}),null);
__d("AdsMessengerPartialAutomatedLoggerEvents",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({MPA_SUCCUSS_CREATE_FORM:"mpa_succuss_create_form",MPA_ERROR_CREATE_FORM:"mpa_error_create_form",MPA_SUCCUSS_PREVIEW_FORM:"mpa_success_preview_form"});e.exports=a}),null);
__d("MessengerAdsPartialAutomatedPrefillType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ZIP_CODE:"ZIP_CODE",CITY:"CITY",STATE:"STATE",COUNTRY:"COUNTRY",EMAIL:"EMAIL",PHONE:"PHONE",JOB_TITLE:"JOB_TITLE",COMPANY_NAME:"COMPANY_NAME",GENDER:"GENDER",DOB:"DOB",NONE:"NONE"})}),null);
__d("MessengerAdsPartialAutomatedReplyType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({QUICK_REPLIES:"QUICK_REPLIES",TEXT:"TEXT",NONE:"NONE",PREFILL:"PREFILL",ICE_BREAKERS:"ICE_BREAKERS",APPOINTMENT:"APPOINTMENT"})}),null);
__d("MessengerAdsPartialAutomatedStepType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({QUESTION:"QUESTION",CONFIRMATION:"CONFIRMATION",INTRO:"INTRO"})}),null);
__d("AdsMessengerPartialAutomatedCreationUtils",["fbt","AdsMessengerPartialAutomatedCreationTypes","ApiPageFields","MessengerAdsPartialAutomatedPrefillType","MessengerAdsPartialAutomatedReplyType","MessengerAdsPartialAutomatedStepType","ads-lib-urllib"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer,i=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationReminderTextOption,j=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationSections,k=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationSectionStatus,l=10,m=g._("Not a valid URL"),n=/^http(s)?:\/\/([\w-]+\.)+[\w-]*([/\?].*)?$/i;function o(a){return{step_id:0,message:a,step_type:b("MessengerAdsPartialAutomatedStepType").INTRO,reply_type:b("MessengerAdsPartialAutomatedReplyType").NONE,next_step_ids:[1],crm_field_id:null}}function p(a,c){return{step_id:c,message:a,step_type:b("MessengerAdsPartialAutomatedStepType").CONFIRMATION,reply_type:b("MessengerAdsPartialAutomatedReplyType").NONE,crm_field_id:null}}function q(a,c){if(!a.answers)return null;var d=a.answers&&a.answers.map(function(a){return c+2}),e=a.answers&&a.answers.map(function(a){return a.value}),f=a.answers&&a.answers.map(function(a){return a.fieldID});return{step_id:c+1,step_type:b("MessengerAdsPartialAutomatedStepType").QUESTION,reply_type:b("MessengerAdsPartialAutomatedReplyType").QUICK_REPLIES,message:a.questionMessage,answers:e,answer_crm_field_ids:f,next_step_ids:d,crm_field_id:a.fieldID===""?null:a.fieldID}}var r={EMPTY_QUESTION_SECTION_ERROR_MESSAGE:g._("At least one question is required"),EMPTY_FIELD_ERROR_MESSAGE:g._("This field is required"),getMaxQuestionNumber:function(){return l},getMaxOptionNumber:function(){return l},getHeaderName:function(a){switch(a){case j.INTRO_MESSAGE:return g._("Intro");case j.QUESTIONS:return g._("Questions");case j.CONFIRMATION_MESSAGE:return g._("Thank You Message");case j.REMINDER:return g._("Completion Reminder");case j.PRIVACY_POLICY:return g._("Privacy Policy and Terms");default:return""}},getReminderText:function(a){switch(a){case i.NON_LIVE_AGENT:return g._("You only have a few questions left to answer. Finish now.");case i.LIVE_AGENT:return g._("Finish your last few questions to speak with one of our live agents.");default:return""}},getSectionStatus:function(a,b){return b===!1?k.IN_PROGRESS:a===null?k.NO_ERROR:k.ERROR},getRequiredTextFieldErrorMessage:function(a,b){return a&&/\S/.test(a.toString())||!b?null:r.EMPTY_FIELD_ERROR_MESSAGE},getQuestionsSectionErrorMessage:function(a,b){if(!b)return null;if(a.length===0)return r.EMPTY_QUESTION_SECTION_ERROR_MESSAGE;return!r.validateEachQuestionItem(a)?r.EMPTY_FIELD_ERROR_MESSAGE:null},getPrivacyPolicyLinkURLErrorMessage:function(a,c){if(!c)return null;if(!a)return r.EMPTY_FIELD_ERROR_MESSAGE;return!b("ads-lib-urllib").isUrl(a)||!n.test(a)?m:null},getAnswerTypeName:function(a){__p&&__p();switch(a){case h.MULTIPLE_CHOICE:return g._("Options");case h.CUSTOM:return g._("Short Answer");case b("MessengerAdsPartialAutomatedPrefillType").ZIP_CODE:return g._("Zip Code");case b("MessengerAdsPartialAutomatedPrefillType").CITY:return g._("City");case b("MessengerAdsPartialAutomatedPrefillType").STATE:return g._("State");case b("MessengerAdsPartialAutomatedPrefillType").COUNTRY:return g._("Country");case b("MessengerAdsPartialAutomatedPrefillType").EMAIL:return g._("Email");case b("MessengerAdsPartialAutomatedPrefillType").PHONE:return g._("Phone number");case b("MessengerAdsPartialAutomatedPrefillType").JOB_TITLE:return g._("Job title");case b("MessengerAdsPartialAutomatedPrefillType").COMPANY_NAME:return g._("Company name");case b("MessengerAdsPartialAutomatedPrefillType").GENDER:return g._("Gender");case b("MessengerAdsPartialAutomatedPrefillType").DOB:return g._("Date of birth")}return""},validateEachQuestionItem:function(a){return a.every(function(a,b){if(!a.questionMessage||a.answerType===null||!/\S/.test(a.questionMessage.toString()))return!1;return a.answerType!==h.MULTIPLE_CHOICE?!0:a.answers&&a.answers[0]&&a.answers[0].value&&a.answers[1]&&a.answers[1].value})},validatePartialAutomatedCreationData:function(a,c,d,e,f){e=r.getPrivacyPolicyLinkURLErrorMessage(e,!0);return a!==""&&c.length>0&&r.validateEachQuestionItem(c)&&/\S/.test(d.toString())&&e==null&&f!=null&&f[b("ApiPageFields").LEADGEN_TOS_ACCEPTED]},getPostData:function(a,c,d,e,f){__p&&__p();var g=1,i=[],j=c.length+1;if(a){a=o(a);g=a.step_id;i.push(a)}c.forEach(function(a,c){switch(a.answerType){case h.MULTIPLE_CHOICE:var d=q(a,c);d!==null&&i.push(d);break;case h.CUSTOM:i.push({step_id:c+1,step_type:b("MessengerAdsPartialAutomatedStepType").QUESTION,reply_type:b("MessengerAdsPartialAutomatedReplyType").TEXT,message:a.questionMessage,next_step_ids:[c+2],crm_field_id:a.fieldID===""?null:a.fieldID});break;case b("MessengerAdsPartialAutomatedPrefillType").ZIP_CODE:case b("MessengerAdsPartialAutomatedPrefillType").CITY:case b("MessengerAdsPartialAutomatedPrefillType").STATE:case b("MessengerAdsPartialAutomatedPrefillType").COUNTRY:case b("MessengerAdsPartialAutomatedPrefillType").EMAIL:case b("MessengerAdsPartialAutomatedPrefillType").PHONE:case b("MessengerAdsPartialAutomatedPrefillType").JOB_TITLE:case b("MessengerAdsPartialAutomatedPrefillType").COMPANY_NAME:case b("MessengerAdsPartialAutomatedPrefillType").GENDER:case b("MessengerAdsPartialAutomatedPrefillType").DOB:i.push({step_id:c+1,step_type:b("MessengerAdsPartialAutomatedStepType").QUESTION,reply_type:b("MessengerAdsPartialAutomatedReplyType").PREFILL,prefill_type:a.answerType,message:a.questionMessage,next_step_ids:[c+2],crm_field_id:a.fieldID===""?null:a.fieldID});break;default:break}});i.push(p(d,j));a=r.getReminderText(e);return{first_step_id:g,privacy_url:"www.example.com",step_list:i,is_preview:f,reminder_text:a.toString()}},getStateData:function(a,c){__p&&__p();var d="",e="",f=[];a.forEach(function(a){__p&&__p();if(!a)return;switch(a.step_type){case b("MessengerAdsPartialAutomatedStepType").INTRO:d=a.message;break;case b("MessengerAdsPartialAutomatedStepType").QUESTION:var c;switch(a.reply_type){case b("MessengerAdsPartialAutomatedReplyType").ICE_BREAKERS:case b("MessengerAdsPartialAutomatedReplyType").QUICK_REPLIES:c=h.MULTIPLE_CHOICE;break;case b("MessengerAdsPartialAutomatedReplyType").TEXT:c=h.CUSTOM;break;case b("MessengerAdsPartialAutomatedReplyType").PREFILL:c=a.prefill_type;break;default:c=null;break}if(c){var g=a.answers&&a.answers.map(function(b,c){return{fieldID:a.answer_crm_field_ids?a.answer_crm_field_ids[c]:"",value:b}});f.push({questionMessage:a.message,answerType:c,answers:g,fieldID:(g=a.crm_field_id)!=null?g:""})}break;case b("MessengerAdsPartialAutomatedStepType").CONFIRMATION:e=a.message;break}});a=r.getReminderText(i.LIVE_AGENT);c=c===a.toString()?i.LIVE_AGENT:i.NON_LIVE_AGENT;return{introMessage:d,questionItems:f,confirmationMessage:e,selectedReminderTextOption:c}},getPlaceholderFieldID:function(a){return a.split(" ").join("_").toLowerCase()}};e.exports=r}),null);
__d("MessengerDestinationPartialAutomatedCreationPreview.react",["cx","fbt","AdsMessengerConstants","AdsMessengerPartialAutomatedCreationTypes","AdsMessengerPartialAutomatedCreationUtils","CurrentUser","FDSText.react","ImmutableObject","MercuryIDs","MessengerAdsPartialAutomatedPrefillType","MessengerConversation.react","MessengerDetailViewHeaderReact.bs","MessengerEnvironment","MessengerPlatformXMDType","MessengerReadReceipt.bs","React","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer,k=b("MessengerDetailViewHeaderReact.bs").jsComponent;function l(a,c,d,e,f){if(d==null)return b("immutable").List();d="fbid:"+d;var g=[];g.push(m(c,d,f));g=g.concat(q(a,d,e,f));return b("immutable").List(g)}function m(a,c,d){return new(b("ImmutableObject"))({body:a,author:c,timestamp:Date.now()-1,message_id:"intro:"+Date.now().toString(),key:Date.now()-1,thread_id:d})}function n(a){var c;if(a==null)return null;a=a.map(function(a){return{title:a,content_type:"text"}});a=(c={},c[b("MessengerPlatformXMDType").QUICK_REPLIES]=a,c);return JSON.stringify(a)}function o(a,c,d){var e;switch(c.answerType){case j.MULTIPLE_CHOICE:return new(b("ImmutableObject"))({body:c.questionMessage,author:d,timestamp:Date.now()-1,message_id:"question_"+a.toString()+":"+Date.now().toString(),key:Date.now()-1,thread_id:b("MercuryIDs").getThreadIDFromUserID(b("CurrentUser").getAccountID()),platform_xmd:n(c.answers?c.answers.map(function(a){return a.value}):null)});case b("MessengerAdsPartialAutomatedPrefillType").ZIP_CODE:case b("MessengerAdsPartialAutomatedPrefillType").CITY:case b("MessengerAdsPartialAutomatedPrefillType").STATE:case b("MessengerAdsPartialAutomatedPrefillType").COUNTRY:case b("MessengerAdsPartialAutomatedPrefillType").EMAIL:case b("MessengerAdsPartialAutomatedPrefillType").PHONE:case b("MessengerAdsPartialAutomatedPrefillType").JOB_TITLE:case b("MessengerAdsPartialAutomatedPrefillType").COMPANY_NAME:case b("MessengerAdsPartialAutomatedPrefillType").GENDER:case b("MessengerAdsPartialAutomatedPrefillType").DOB:return new(b("ImmutableObject"))({body:c.questionMessage,author:d,timestamp:Date.now()-1,message_id:"question_"+a.toString()+":"+Date.now().toString(),key:Date.now()-1,thread_id:b("MercuryIDs").getThreadIDFromUserID(b("CurrentUser").getAccountID()),platform_xmd:n([b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName((e=c.answerType)!=null?e:"").toString()])});case j.CUSTOM:default:return new(b("ImmutableObject"))({body:c.questionMessage,author:d,timestamp:Date.now()-1,message_id:"question_"+a.toString()+":"+Date.now().toString(),key:Date.now()-1})}}function p(a,c,d){d=b("CurrentUser").getAccountID();return new(b("ImmutableObject"))({body:c.answerType?b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(c.answerType).toString():"",author:"fbid:"+d,timestamp:Date.now()-1,message_id:"answer_"+a.toString()+":"+Date.now().toString(),key:Date.now()-1})}function q(a,b,c,d){var e=c.filter(function(b,c){return c<=a&&b.answerType!==null&&b.questionMessage!==""}),f=[];e.forEach(function(a,c){f.push(o(c,a,b)),c!==e.length-1&&f.push(p(c,a,b))});return f}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=b("React").createElement(b("FDSText.react"),{color:"placeholder",size:"body1",weight:"bold"},h._("Messenger Preview")),c=b("CurrentUser").getAccountID(),d=b("MercuryIDs").getThreadIDFromUserID(c);b("MessengerEnvironment").setMessengerUI(!0);return b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_6z1d"},a),b("React").createElement("div",{className:"_6z1e"},b("React").createElement("div",{className:"_1ist"},b("React").createElement(k,{infoPanelCollapsed:!0,maxTitle:b("AdsMessengerConstants").PREVIEW_PAGENAME_MAX_LENGTH,participants:b("immutable").Map({}),thread:new(b("ImmutableObject"))({name:this.props.pageName||"",participants:[]}),viewer:c,onInfoPanelToggle:b("emptyFunction")})),b("React").createElement(b("MessengerConversation.react"),{className:"_6z1f",deliveryTimestamp:0,fetchMessages:b("emptyFunction"),innerClassName:"_1ist",isCanonical:!0,isMessengerAdPreview:!0,messages:l(this.props.focusedIndex,this.props.introMessage,this.props.pageID,this.props.questionItems,d),readReceipts:b("MessengerReadReceipt.bs").emptyReadReceipts,threadID:d,viewer:c,onRead:b("emptyFunction")}),b("React").createElement("div",{className:"_6z1g"},h._("Type a message..."))))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerDestinationPartialAutomatedCreationPreviewContainer.react",["AdsFluxContainer","MessengerDestinationPartialAutomatedCreationPreview.react","PagesReplyComposerActions","PagesReplyComposerDispatcher","PagesReplyComposerStore","PagesReplyComposerTextUtilities","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="MPAPreview";g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){return[b("PagesReplyComposerStore").getByKey(h)]};a.calculateState=function(){var a=b("PagesReplyComposerStore").getByKey(h).getState();return{composerState:a}};a.prototype.UNSAFE_componentWillMount=function(){b("PagesReplyComposerDispatcher").getByKey(h).explicitlyRegisterStore(b("PagesReplyComposerStore").getByKey(h)),b("PagesReplyComposerActions").getActionsByKey(h).initializeStoreWithConfig({composerKey:h,initialReply:"",initialDisabled:!1,isAdsInterfaceSource:!0,pageID:this.props.pageID||"",placeholderText:""})};a.prototype.render=function(){var a=b("PagesReplyComposerTextUtilities").processMessage(this.props.introMessage||"",this.state.composerState.supportedMacros);return b("React").createElement(b("MessengerDestinationPartialAutomatedCreationPreview.react"),{confirmationMessage:this.props.confirmationMessage,focusedIndex:this.props.focusedIndex,introMessage:a,pageID:this.props.pageID,pageName:this.props.pageName,questionItems:this.props.questionItems})};function a(){g.apply(this,arguments)}e.exports=b("AdsFluxContainer").create(a,{name:e.id+".exports"})}),null);
__d("reverseArgs",[],(function(a,b,c,d,e,f){function a(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return a.apply(void 0,c.reverse())}}e.exports=a}),null);
__d("curryRight",["curry","reverseArgs"],(function(a,b,c,d,e,f){"use strict";function a(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("reverseArgs")(b("curry").apply(void 0,[b("reverseArgs")(a)].concat(d)))}e.exports=a}),null);
__d("MessengerDestinationPartialAutomatedCreationQuestionItem.react",["ix","cx","fbt","AdsMessengerConstants","AdsMessengerPartialAutomatedCreationTypes","AdsMessengerPartialAutomatedCreationUtils","ClickableArea.react","FDSDropdownMenu.react","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","FDSDropdownSelectorOptionGroup.react","FDSSimplePopover.react","FDSText.react","Grid.react","GridItem.react","Image.react","LeftRight.react","Link.react","MessengerAdsPartialAutomatedPrefillType","React","ShimButton.react","SUIRadioList.react","SUITextArea.react","SUITextInput.react","asset","curry","curryRight","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer,l=b("SUIRadioList.react").Item;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={autoFocus:!1,showFieldID:!1,showMoreOptions:!0},this.$9=function(a){var b=a===k.MULTIPLE_CHOICE?[{fieldID:"",value:""},{fieldID:"",value:""}]:null;a={fieldID:this.props.questionItem.fieldID,questionMessage:this.props.questionItem.questionMessage,answerType:a,answers:b};this.props.onQuestionItemChange(a,this.props.questionIndex)}.bind(this),this.$8=function(a){a=babelHelpers["extends"]({},this.props.questionItem,{questionMessage:a});this.props.onQuestionItemChange(a,this.props.questionIndex)}.bind(this),this.$15=function(a,b){var c=Object.assign({},this.props.questionItem);if(!c.answers)return;c.answers[b].value=a;this.props.onQuestionItemChange(c,this.props.questionIndex)}.bind(this),this.$16=function(a){var b=Object.assign({},this.props.questionItem);if(!b.answers)return;b.answers=b.answers.filter(function(b,c){return c!==a});this.props.onQuestionItemChange(b,this.props.questionIndex)}.bind(this),this.$19=function(){if(!this.props.questionItem.answers)return;var a=this.props.questionItem.answers.concat({fieldID:"",value:""});a=babelHelpers["extends"]({},this.props.questionItem,{answers:a});this.setState({autoFocus:!0});this.props.onQuestionItemChange(a,this.props.questionIndex)}.bind(this),this.$1=function(){this.props.onRemoveQuestion(this.props.questionIndex)}.bind(this),this.$17=function(a){a=babelHelpers["extends"]({},this.props.questionItem,{fieldID:a});this.props.onQuestionItemChange(a,this.props.questionIndex)}.bind(this),this.$18=function(a,b){var c=Object.assign({},this.props.questionItem);if(!c.answers)return;c.answers[b].fieldID=a;this.props.onQuestionItemChange(c,this.props.questionIndex)}.bind(this),this.$10=function(){this.setState(function(a){return{showMoreOptions:!a.showMoreOptions}})}.bind(this),this.$1=function(){this.props.onRemoveQuestion(this.props.questionIndex)}.bind(this),this.$20=function(){this.setState({showFieldID:!0})}.bind(this),b}a.prototype.render=function(){var a=b("React").createElement(b("FDSText.react"),{display:"block",size:"body3",weight:"bold"},i._("Question #"),(this.props.questionIndex+1).toString()),c=b("React").createElement(b("Link.react"),{onClick:this.$1},i._("Remove")),d=b("React").createElement(b("FDSSimplePopover.react"),{content:i._("Choose how you'd like people to respond. For user information questions, you can use a preset answer format like city or email."),contentWidthUseSparingly:288}),e=b("React").createElement(b("FDSText.react"),{display:"inline",margin:"_3-95",size:"body3",weight:"bold"},i._("Answer Type"));return b("React").createElement(b("ClickableArea.react"),{onClick:this.props.onClick},b("React").createElement("div",{className:(this.props.isFocused?"":"_6kg6")+(this.props.isFocused?" _6zbd":"")},b("React").createElement(b("LeftRight.react"),{className:"_2pin"},b("React").createElement("div",null,a),b("React").createElement("div",null,this.props.isFieldIDEnabled?this.$2():c)),this.$3(),e,d,this.props.isBetaDesign?this.$4():this.$5(),this.$6(),this.$7()))};a.prototype.$3=function(){var a=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-95",size:"body3",weight:"bold"},i._("Question Text")),c=b("AdsMessengerPartialAutomatedCreationUtils").getRequiredTextFieldErrorMessage(this.props.questionItem.questionMessage,this.props.showError);c=b("React").createElement(b("SUITextArea.react"),{autoFocus:this.props.isFocused,errorMessage:c,margin:"_3-95",maxLength:b("AdsMessengerConstants").WELCOME_MESSAGE_MAX_LENGTH,placeholder:i._("Enter the text for your question"),value:this.props.questionItem.questionMessage,onChange:this.$8});return b("React").createElement("div",null,a,c)};a.prototype.$4=function(){var a=[b("MessengerAdsPartialAutomatedPrefillType").CITY,b("MessengerAdsPartialAutomatedPrefillType").GENDER,b("MessengerAdsPartialAutomatedPrefillType").PHONE,b("MessengerAdsPartialAutomatedPrefillType").ZIP_CODE,b("MessengerAdsPartialAutomatedPrefillType").STATE,b("MessengerAdsPartialAutomatedPrefillType").COUNTRY,b("MessengerAdsPartialAutomatedPrefillType").EMAIL,b("MessengerAdsPartialAutomatedPrefillType").JOB_TITLE,b("MessengerAdsPartialAutomatedPrefillType").COMPANY_NAME];a=a.map(function(a,c){return b("React").createElement(b("FDSDropdownSelectorOption.react"),{key:c,value:a},b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(a))});var c=i._("Choose an answer type"),d=i._("User Infomation"),e=this.props.questionItem.answerType||!this.props.showError?null:i._("Choose an answer type");return b("React").createElement("div",null,b("React").createElement(b("FDSDropdownSelector.react"),{errorMessage:e,placeholder:c,value:this.props.questionItem.answerType,onChange:this.$9},b("React").createElement(b("FDSDropdownSelectorOption.react"),{value:k.CUSTOM},b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(k.CUSTOM)),b("React").createElement(b("FDSDropdownSelectorOption.react"),{value:k.MULTIPLE_CHOICE},b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(k.MULTIPLE_CHOICE)),b("React").createElement(b("FDSDropdownSelectorOptionGroup.react"),{isExpandedInitially:!0,label:d},a)))};a.prototype.$5=function(){var a=b("React").createElement(b("Link.react"),{onClick:this.$10},this.state.showMoreOptions?i._("Fewer options"):i._("Show more options"));return b("React").createElement("div",null,this.$11(),a,this.$12())};a.prototype.$11=function(){var a=[k.MULTIPLE_CHOICE,k.CUSTOM,b("MessengerAdsPartialAutomatedPrefillType").CITY,b("MessengerAdsPartialAutomatedPrefillType").GENDER,b("MessengerAdsPartialAutomatedPrefillType").PHONE,b("MessengerAdsPartialAutomatedPrefillType").ZIP_CODE];a=a.map(function(a,c){return b("React").createElement(b("GridItem.react"),{key:c},b("React").createElement(l,{selectedValue:this.props.questionItem.answerType,value:a,onSelect:this.$9},b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(a)))}.bind(this));return b("React").createElement(b("Grid.react"),{alignh:"left",alignv:"top",cols:3,fixed:!0},a)};a.prototype.$12=function(){if(!this.state.showMoreOptions)return null;var a=[b("MessengerAdsPartialAutomatedPrefillType").STATE,b("MessengerAdsPartialAutomatedPrefillType").COUNTRY,b("MessengerAdsPartialAutomatedPrefillType").EMAIL,b("MessengerAdsPartialAutomatedPrefillType").JOB_TITLE,b("MessengerAdsPartialAutomatedPrefillType").COMPANY_NAME];a=a.map(function(a,c){return b("React").createElement(b("GridItem.react"),{key:c},b("React").createElement(l,{selectedValue:this.props.questionItem.answerType,value:a,onSelect:this.$9},b("AdsMessengerPartialAutomatedCreationUtils").getAnswerTypeName(a)))}.bind(this));return b("React").createElement(b("Grid.react"),{alignh:"left",alignv:"top",className:"_6kj7",cols:3,fixed:!0},a)};a.prototype.$6=function(){if(this.props.questionItem.answerType!==k.MULTIPLE_CHOICE)return null;var a=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x _3-95",size:"body3",weight:"bold"},i._("Answer Text"));return b("React").createElement("div",null,a,this.$13(),this.$14())};a.prototype.$13=function(){return!this.props.questionItem.answers?null:this.props.questionItem.answers.map(function(a,c){var d=b("AdsMessengerPartialAutomatedCreationUtils").getRequiredTextFieldErrorMessage(a.value,this.props.showError);return b("React").createElement(b("SUITextInput.react"),{autoFocus:this.state.autoFocus,display:"block",errorMessage:c===0||c===1?d:null,key:c,margin:"_3-95",maxLength:b("AdsMessengerConstants").OPTION_MAX_LENGTH,placeholder:i._("Enter the text for your answer"),value:a.value,onChange:b("curryRight")(this.$15,c),onRemove:c>1?b("curry")(this.$16,c):void 0})}.bind(this))};a.prototype.$7=function(){if(!this.state.showFieldID||!this.props.isFieldIDEnabled)return null;var a=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x _3-95",size:"body3",weight:"bold"},i._("Field IDs")),c=b("React").createElement(b("SUITextInput.react"),{display:"block",placeholder:b("AdsMessengerPartialAutomatedCreationUtils").getPlaceholderFieldID(this.props.questionItem.questionMessage),value:this.props.questionItem.fieldID,onChange:this.$17}),d=this.props.questionItem.answers&&this.props.questionItem.answers.map(function(a,c){return b("React").createElement(b("SUITextInput.react"),{display:"block",key:c,margin:"_3-8x",placeholder:b("AdsMessengerPartialAutomatedCreationUtils").getPlaceholderFieldID(a.value),value:a.fieldID,onChange:b("curryRight")(this.$18,c)})}.bind(this));return b("React").createElement("div",null,a," ",c," ",d)};a.prototype.$14=function(){if(this.props.questionItem.answers&&this.props.questionItem.answers.length>=b("AdsMessengerPartialAutomatedCreationUtils").getMaxOptionNumber())return null;var a=i._("+ Add option");return b("React").createElement(b("ShimButton.react"),{className:"_6kj8",onClick:this.$19},b("React").createElement("span",null,a))};a.prototype.$2=function(){var a=[{type:"item",label:i._("Remove"),icon:b("React").createElement(b("Image.react"),{src:g("555427")}),onClick:this.$1},{type:"item",label:i._("Edit Field ID"),icon:b("React").createElement(b("Image.react"),{src:g("495519")}),onClick:this.$20}];return b("React").createElement(b("FDSDropdownMenu.react"),{buttonUse:"flat",items:a,label:i._("Answer type"),useEllipsisIcon:!0})};e.exports=a}),null);
__d("MessengerDestinationPartialAutomatedCreationQuestionsSection.react",["cx","fbt","AdsMessengerPartialAutomatedCreationUtils","MessengerDestinationPartialAutomatedCreationQuestionItem.react","React","ShimButton.react","curry"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_6kgq"},this.$1(),this.$2())};a.prototype.$1=function(){return!this.props.questionItems?null:this.props.questionItems.map(function(a,c){return b("React").createElement("div",{key:c},b("React").createElement(b("MessengerDestinationPartialAutomatedCreationQuestionItem.react"),{isBetaDesign:this.props.isBetaDesign,isFieldIDEnabled:this.props.isFieldIDEnabled,isFocused:this.props.focusedIndex===c,questionIndex:c,questionItem:a,showError:this.props.showError,onClick:b("curry")(this.props.onClick,c),onQuestionItemChange:this.props.onQuestionItemChange,onRemoveQuestion:this.props.onRemoveQuestion}))}.bind(this))};a.prototype.$2=function(){var a=h._("+ Add question");return!this.props.questionItems||this.props.questionItems.length<b("AdsMessengerPartialAutomatedCreationUtils").getMaxQuestionNumber()?b("React").createElement(b("ShimButton.react"),{className:"_6klg",onClick:this.props.onAddQuestion},b("React").createElement("span",null,a)):null};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerDestinationPartialAutomatedCreationTOSAgreement.react",["fbt","AdsCCCategory","AdsIntelligentNotificationContainer.react","AdsLeadGenTOSDialog.react","AdsPageSignLeadgenTosDataAction","ApiPageFields","DateTime","LeadGenTOSAcceptanceDetailsGatekeeper","React","emptyFunction","formatDate","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i="M j, Y g:i A";function j(a){var c;if(!a.account||!a.selectedPage)return null;if(!a.selectedPage[b("ApiPageFields").LEADGEN_TOS_ACCEPTED])return b("React").createElement(b("AdsIntelligentNotificationContainer.react"),{ccCardProps:{category:b("AdsCCCategory").WARNING,ctaData:[{type:"LINK",data:{href:"",text:g._("View Terms"),onCallToAction:a.showTOSDialog}}],messageID:"ads_u_editor_campaign_lead_gen_tos_agreement",textData:[{type:"PARAGRAPH",data:{text:g._("Please read and accept Facebook's Lead Ads Terms before creating your ad for this page.")}}]}});c=(c=a.selectedPage[b("ApiPageFields").LEADGEN_TOS_ACCEPTING_USER])==null?void 0:c.name;a=a.selectedPage[b("ApiPageFields").LEADGEN_TOS_ACCEPTANCE_TIME]?b("DateTime").createFromISOString(a.selectedPage[b("ApiPageFields").LEADGEN_TOS_ACCEPTANCE_TIME],a.account.timezone_id).toDate():null;a=a&&!isNaN(a.getTime())?b("formatDate")(a,i):null;return b("React").createElement(b("AdsIntelligentNotificationContainer.react"),{ccCardProps:{category:b("AdsCCCategory").ACTIVE_FEEDBACK,ctaData:[{type:"LINK",data:{href:"https://www.facebook.com/ads/leadgen/tos",text:g._("View Terms"),onCallToAction:b("emptyFunction")}}],messageID:"ads_u_editor_campaign_lead_gen_tos_agreement",textData:[{type:"PARAGRAPH",data:{text:c&&a!=null&&a!==""&&b("LeadGenTOSAcceptanceDetailsGatekeeper").in_gk?g._("Terms of Service for this page were accepted by {Name of user who accepted the TOS} on {Date and time the user accepted the TOS}.",[g._param("Name of user who accepted the TOS",c),g._param("Date and time the user accepted the TOS",a)]):g._("You've accepted Facebook's Lead Ads Terms for this page.")}}]}})}c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={shouldShowLeadGenTOSDialog:!1},this.$1=function(){this.setState({shouldShowLeadGenTOSDialog:!0})}.bind(this),this.$3=function(){b("AdsPageSignLeadgenTosDataAction").dispatch({adObjectIDs:[],pageID:b("nullthrows")(this.props.pageID)},{line:"186",module:"MessengerDestinationPartialAutomatedCreationTOSAgreement.react.js"}),this.setState({shouldShowLeadGenTOSDialog:!1})}.bind(this),this.$2=function(){this.setState({shouldShowLeadGenTOSDialog:!1})}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(j,{account:this.props.account,selectedPage:this.props.page,showTOSDialog:this.$1}),b("React").createElement(b("AdsLeadGenTOSDialog.react"),{pageID:this.props.pageID,shown:this.state.shouldShowLeadGenTOSDialog,onCancel:this.$2,onConfirm:this.$3}))};e.exports=a}),null);
__d("MessengerDestinationPartialAutomatedCreationDialog.react",["cx","errorCode","errorDesc","fbt","AdsCCCategory","AdsError","AdsIntelligentNotificationContainer.react","AdsLeadGenBigTextInput.react","AdsLearnMore.react","AdsMessengerPartialAutomatedCreationTypes","AdsMessengerPartialAutomatedCreationUtils","AdsMessengerVisualEditorUtils","DialogFitHeightToContent","FDSSimplePopover.react","FDSText.react","LayerFadeOnHide","LeftRight.react","MessengerDestinationPartialAutomatedCreationPreviewContainer.react","MessengerDestinationPartialAutomatedCreationQuestionsSection.react","MessengerDestinationPartialAutomatedCreationTOSAgreement.react","MessengerExperienceCancelDialog.react","MessengerExperienceConfirmDialog.react","PagesReplyComposerEditorContainer.react","PagesReplyComposerToolbarContainer.react","React","SUIRadioList.react","SUITextArea.react","SUITextInput.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","emptyFunction","suiMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationReminderTextOption,m=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationSections,n=b("SUIRadioList.react").Item;c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.state={isValidSpec:!1,showCancelDialog:!1,showConfirmDialog:!1},this.$16=function(a){a||this.props.onCloseErrorDialog()}.bind(this),this.$28=function(){this.setState({showCancelDialog:!0})}.bind(this),this.$29=function(){this.state.isValidSpec?this.setState({showConfirmDialog:!0}):this.props.onShowError()}.bind(this),this.$10=function(){this.setState({showConfirmDialog:!1})}.bind(this),this.$11=function(){this.setState({showCancelDialog:!1}),this.props.onCancelButtonClicked()}.bind(this),this.$12=function(a){this.setState({showCancelDialog:a})}.bind(this),this.$7=function(){this.setState({showConfirmDialog:!1})}.bind(this),this.$8=function(){this.setState({showConfirmDialog:!1}),this.props.onFinishButtonClicked()}.bind(this),this.$9=function(a){this.setState({showConfirmDialog:a})}.bind(this),b}a.getDerivedStateFromProps=function(a,c){a=b("AdsMessengerPartialAutomatedCreationUtils").validatePartialAutomatedCreationData(a.introMessage,a.questionItems,a.confirmationMessage,a.privacyPolicyURL,a.page);return babelHelpers["extends"]({},c,{isValidSpec:a})};a.prototype.render=function(){this.$1={composerKey:"introMessageCTMLeadGen",initialDisabled:!1,initialReply:this.props.introMessage||"",isAdsInterfaceSource:!0,pageID:this.props.pageID||"",placeholderText:""};var a=j._("Create Chat");return b("React").createElement("div",null,b("React").createElement(b("XUIDialog.react"),babelHelpers["extends"]({behaviors:{DialogFitHeightToContent:b("DialogFitHeightToContent"),LayerFadeOnHide:b("LayerFadeOnHide")},destroyonhide:!0,layerHideOnBlur:!1,shown:this.props.shown,width:950,onHide:this.props.onToggle},this.props),b("React").createElement(b("XUIDialogTitle.react"),{className:"_1wrq",showCloseButton:!1},a),b("React").createElement(b("XUIDialogBody.react"),{useCustomPadding:!0},this.$2()),b("React").createElement(b("XUIDialogFooter.react"),null,this.$3(),this.$4(),this.$5())),this.$6(),b("React").createElement(b("MessengerExperienceConfirmDialog.react"),{shown:this.state.showConfirmDialog,onCancel:this.$7,onCreateConfirm:this.$8,onToggle:this.$9}),b("React").createElement(b("MessengerExperienceCancelDialog.react"),{isStandardTemplate:!1,shown:this.state.showCancelDialog,onCancel:this.$10,onConfirm:this.$11,onToggle:this.$12}),b("AdsMessengerVisualEditorUtils").showMessengerPreviewSuccessDialog(this.props.showPreviewSuccessDialog,this.props.pageName,this.props.onPreviewSuccessDialogToggle))};a.prototype.$13=function(){var a=j._("Give your template a name"),c=this.$14();return b("React").createElement("div",{className:"_19yp"},b("React").createElement(b("AdsLeadGenBigTextInput.react"),{className:"_5jqd",error:c&&c.message,placeholder:a,value:this.props.templateName,onBlur:b("emptyFunction"),onChange:this.props.onTemplateNameChange,onFocus:b("emptyFunction")}))};a.prototype.$6=function(){var a=j._("Error"),b=this.props.errorMessage;return this.$15(a,b,this.props.showErrorDialog,this.props.onCloseErrorDialog,this.$16)};a.prototype.$2=function(){return b("React").createElement("div",{className:"_6h1q"},this.props.isBetaDesign?this.$13():null,b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_6kgs"},this.$17(),this.$18(),this.$19(),this.$20(),this.props.isBetaDesign&&this.$21()),b("React").createElement("div",{className:"_6kg7"},this.props.isBetaDesign?b("React").createElement(b("MessengerDestinationPartialAutomatedCreationPreviewContainer.react"),{confirmationMessage:this.props.confirmationMessage,focusedIndex:this.props.focusedIndex,introMessage:this.props.introMessage,pageID:this.props.pageID,pageName:this.props.pageName,questionItems:this.props.questionItems}):this.$22())))};a.prototype.$22=function(){var a=j._("Inline previews are not yet supported for lead generation conversations. To see a preview of your questions, you can send a test version to yourself in Messenger."),c=j._("Preview in Messenger");return b("React").createElement("div",{className:"_6q4d"},b("React").createElement(b("AdsIntelligentNotificationContainer.react"),{ccCardProps:{category:b("AdsCCCategory").ACTIVE_FEEDBACK,ctaData:[{type:"LINK",data:{text:c,onCallToAction:this.props.onPreviewButtonClicked}}],messageID:"ctm_lead_gen_form_preview_info",textData:[{type:"PARAGRAPH",data:{text:a}}]}}))};a.prototype.$17=function(){var a=b("AdsMessengerPartialAutomatedCreationUtils").getRequiredTextFieldErrorMessage(this.props.introMessage,this.props.showError);return b("React").createElement("div",{className:"_6jlz"},this.$23(m.INTRO_MESSAGE),this.$24(a))};a.prototype.$24=function(a){a=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x",size:"body3"},j._("Welcome people to the conversation after they click on your ad and set up the questions you'll ask."));var c=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x",size:"body3",weight:"bold"},j._("Text"));return b("React").createElement("div",{className:"_6kg8"},a,c,b("React").createElement("div",{className:"_6t0z"},b("React").createElement(b("PagesReplyComposerEditorContainer.react"),{config:this.$1,welcomeString:this.props.introMessage,onReplyChange:this.props.onIntroMessageChange}),b("React").createElement(b("PagesReplyComposerToolbarContainer.react"),{className:"_3w-l",config:this.$1})))};a.prototype.$18=function(){return b("React").createElement("div",{className:"_6jlz"},this.$23(m.QUESTIONS),b("React").createElement(b("MessengerDestinationPartialAutomatedCreationQuestionsSection.react"),{focusedIndex:this.props.focusedIndex,isBetaDesign:this.props.isBetaDesign,isFieldIDEnabled:this.props.isFieldIDEnabled,questionItems:this.props.questionItems,showError:this.props.showError,onAddQuestion:this.props.onAddQuestion,onClick:this.props.onClick,onQuestionItemChange:this.props.onQuestionItemChange,onRemoveQuestion:this.props.onRemoveQuestion}))};a.prototype.$19=function(){var a=b("AdsMessengerPartialAutomatedCreationUtils").getRequiredTextFieldErrorMessage(this.props.confirmationMessage,this.props.showError);return b("React").createElement("div",{className:"_6jlz"},this.$23(m.CONFIRMATION_MESSAGE),this.$25(a))};a.prototype.$25=function(a){var c=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x",size:"body3"},j._("Thank people for answering your questions and let them know what happens next.")),d=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x",size:"body3",weight:"bold"},j._("Text"));return b("React").createElement("div",{className:"_6kg8"},c,d,b("React").createElement(b("SUITextArea.react"),{errorMessage:a,margin:"_3-8x",value:this.props.confirmationMessage,onChange:this.props.onConfirmationMessageChange}))};a.prototype.$20=function(){return b("React").createElement("div",{className:"_6jlz"},this.$23(m.REMINDER),this.$26())};a.prototype.$26=function(){var a=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x",size:"body3"},j._("Send an automated message to people who haven't finished all of your questions within 24 hours. {=Learn more}",[j._param("=Learn more",b("React").createElement(b("AdsLearnMore.react"),{cmsID:"592240724554522"}))])),c=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8x",size:"body3",weight:"bold"},j._("Reminder Text")),d=b("React").createElement(b("SUIRadioList.react"),{margin:"_3-8x",value:this.props.selectedReminderTextOption,onChange:this.props.onReminderTextChange},b("React").createElement(n,{value:l.NON_LIVE_AGENT},b("AdsMessengerPartialAutomatedCreationUtils").getReminderText(l.NON_LIVE_AGENT)),b("React").createElement(n,{value:l.LIVE_AGENT},b("AdsMessengerPartialAutomatedCreationUtils").getReminderText(l.LIVE_AGENT)));return b("React").createElement("div",{className:"_6kg8"},a,c,d)};a.prototype.$21=function(){return b("React").createElement("div",{className:"_6v96"},this.$23(m.PRIVACY_POLICY),this.$27())};a.prototype.$27=function(){var a=b("React").createElement(b("FDSText.react"),{display:"block",margin:"_3-8z",size:"body3"},j._("Since you'll be collecting customer information, you need to include a link to your business' privacy policy. {=Learn more}",[j._param("=Learn more",b("React").createElement(b("AdsLearnMore.react"),{cmsID:"592240724554522"}))])),c=b("React").createElement(b("FDSText.react"),{display:"inline",margin:"_3-8x",size:"body3",weight:"bold"},j._("Your Privacy Policy URL")),d=b("React").createElement(b("FDSSimplePopover.react"),{content:j._("This link to your privacy policy will appear on your Chat Details screen in Messenger and within your Facebook Page's About section. {=Learn more}",[j._param("=Learn more",b("React").createElement(b("AdsLearnMore.react"),{cmsID:"592240724554522"}))]),contentWidthUseSparingly:288}),e=b("AdsMessengerPartialAutomatedCreationUtils").getPrivacyPolicyLinkURLErrorMessage(this.props.privacyPolicyURL,this.props.showError);return b("React").createElement("div",{className:"_3-8k"},b("React").createElement(b("MessengerDestinationPartialAutomatedCreationTOSAgreement.react"),{account:this.props.account,page:this.props.page,pageID:this.props.pageID}),a,c,d,b("React").createElement(b("SUITextInput.react"),{display:"block",errorMessage:e,margin:"_3-8x",placeholder:"https://www.yourprivacypolicy.com/",value:this.props.privacyPolicyURL,onChange:this.props.onPrivacyPolicyURLChange}))};a.prototype.$23=function(a){return b("React").createElement("div",{className:"_6jfw"},b("AdsMessengerPartialAutomatedCreationUtils").getHeaderName(a))};a.prototype.$3=function(){var a=j._("Cancel");return b("React").createElement(b("XUIDialogButton.react"),{label:a,onClick:this.$28})};a.prototype.$4=function(){var a=j._("Preview in Messenger");return b("React").createElement(b("XUIDialogButton.react"),{disabled:this.props.showError&&!this.state.isValidSpec,label:a,onClick:this.props.onPreviewButtonClicked})};a.prototype.$5=function(){var a=j._("Finish");return b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",disabled:this.props.showError&&!this.state.isValidSpec,label:a,use:"confirm",onClick:this.$29})};a.prototype.$15=function(a,c,d,e,f){return b("React").createElement(b("XUIDialog.react"),{height:200,shown:d,width:500,onToggle:f},b("React").createElement(b("XUIDialogTitle.react"),null,a),b("React").createElement(b("XUIDialogBody.react"),null,c),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogOkayButton.react"),{action:"cancel",use:"confirm",onClick:e})))};a.prototype.$14=function(){return this.props.isBetaDesign&&!this.props.templateName?new(b("AdsError"))(1815895,i._(function(a,b){return a._("Please enter a template name")},{}),{level:b("AdsError").Level.WARN}):null};e.exports=a}),null);
__d("AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin",[],(function(a,b,c,d,e,f){"use strict";a={initialState:{errorMessage:""}};e.exports=a}),null);
__d("AdsMessengerPartialAutomatedCreationErrorDataProvider",["AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin","Laminar"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin"),"AdsMessengerPartialAutomatedCreationErrorDataProviderPlugin")}),null);
__d("AdsMessengerPartialAutomatedCreationErrorDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{errorMessage:b.errorMessage}}};e.exports=a}),null);
__d("AdsMessengerPartialAutomatedCreationErrorDataAction",["Laminar","AdsMessengerPartialAutomatedCreationErrorDataReducerPlugin","AdsMessengerPartialAutomatedCreationErrorDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPartialAutomatedCreationErrorDataReducerPlugin"),b("AdsMessengerPartialAutomatedCreationErrorDataProvider"),{})]},function(){return[]},"ADS_MESSENGER_PARTIAL_AUTOMATED_CREATION_ERROR");e.exports=a}),null);
__d("AdsPageSetPrivacyPolicyURLDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"PAGE.SET_PRIVACY_POLICY_URL");e.exports=a}),null);
__d("XMessengerAdsSetPrivacyPolicyURLController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/set_privacy_policy_url/",{page_id:{type:"FBID"},privacy_info_url:{type:"String"}})}),null);
__d("XMessengerPartialAutomatedPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/ctm_lead_gen/preview/",{page_welcome_message:{type:"String"},page_id:{type:"FBID"}})}),null);
__d("AdsMessengerPartialAutomatedCreationDataManager",["fbt","AdsGraphAPI","AdsInterfacesLogger","AdsMessengerPageWelcomeMessageDataManager","AdsMessengerPartialAutomatedCreationErrorDataAction","AdsMessengerPartialAutomatedCreationUtils","AdsMessengerPartialAutomatedLoggerEvents","AdsMessengerVisualEditorLandingScreenType","AdsMessengerVisualEditorUtils","AdsPageSetPrivacyPolicyURLDataAction","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AsyncRequest","MessengerContentEditorSurface","XMessengerAdsSetPrivacyPolicyURLController","XMessengerPartialAutomatedPreviewController","promiseAsyncRequest","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("Not a valid URL"),i={generatePreview:function(a,c,d,f,g,h,j){c=b("AdsMessengerPartialAutomatedCreationUtils").getPostData(c,d,f,g,!0);b("promiseDone")(b("AdsGraphAPI").get(e.id+".generatePreview").object("page",a).edge("messenger_lead_forms").post(c),function(b){i._sendCTMLeadGenPreviewFromResponse(b,a,h,j)},function(a){return i._errorHandler(a)})},createForm:function(a,c,d,f,g,j,k,l,m,n){var o=b("AdsMessengerPartialAutomatedCreationUtils").getPostData(f,g,j,l,!1);b("promiseDone")(b("promiseAsyncRequest")(b("XMessengerAdsSetPrivacyPolicyURLController").getURIBuilder().setFBID("page_id",d).setString("privacy_info_url",k).getURI()),function(f){b("AdsPageSetPrivacyPolicyURLDataAction").dispatch({pageID:d,privacyPolicyURL:k},{line:"119",module:"AdsMessengerPartialAutomatedCreationDataManager.js"}),b("promiseDone")(b("AdsGraphAPI").get(e.id+".createForm").object("page",d).edge("messenger_lead_forms").post(o),function(e){i._successCreateForm(e,a,c,d,k,m,n),b("AdsInterfacesLogger").log({eventName:b("AdsMessengerPartialAutomatedLoggerEvents").MPA_SUCCUSS_CREATE_FORM})},function(a){return i._errorHandler(a)})},function(a){b("AdsMessengerPartialAutomatedCreationErrorDataAction").dispatch({errorMessage:h.toString()},{line:"150",module:"AdsMessengerPartialAutomatedCreationDataManager.js"}),b("AdsInterfacesLogger").log({eventName:b("AdsMessengerPartialAutomatedLoggerEvents").MPA_ERROR_CREATE_FORM})})},sendCTMLeadGenPreview:function(a,c,d,e){c=b("XMessengerPartialAutomatedPreviewController").getURIBuilder().setFBID("page_id",c).setString("page_welcome_message",a).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setHandler(function(a){d()}).setErrorHandler(function(a){e&&e(a.getErrorDescriptionString()||"")}).send()},_errorHandler:function(a){a=a.error_user_msg!==null&&a.error_user_msg!==void 0?a.error_user_msg:a.message;b("AdsMessengerPartialAutomatedCreationErrorDataAction").dispatch({errorMessage:a},{line:"188",module:"AdsMessengerPartialAutomatedCreationDataManager.js"});b("AdsInterfacesLogger").log({eventName:b("AdsMessengerPartialAutomatedLoggerEvents").MPA_ERROR_CREATE_FORM})},_successCreateForm:function(a,c,d,e,f,g,h){f=b("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(e);d=d.adgroupEditorContext.hostID;g?(f.landing_screen_type=b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN_NEW,f.ctm_lead_gen_template_id=a.id):(f.landing_screen_type=b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN,f.surface=b("MessengerContentEditorSurface").CTM_LEAD_GEN,f.template_id=a.id);g&&b("AdsMessengerPageWelcomeMessageDataManager").createCustomTemplate(c,e,JSON.stringify(f),h,d);b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:d,adgroupIDs:c,pageWelcomeMessage:JSON.stringify(f)},{line:"229",module:"AdsMessengerPartialAutomatedCreationDataManager.js"})},_sendCTMLeadGenPreviewFromResponse:function(a,c,d,e){var f=b("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(c);d?(f.landing_screen_type=b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN_NEW,f.ctm_lead_gen_template_id=a.id):(f.surface=b("MessengerContentEditorSurface").CTM_LEAD_GEN,f.landing_screen_type=b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN,f.template_id=a.id);i.sendCTMLeadGenPreview(JSON.stringify(f),c,e);b("AdsInterfacesLogger").log({eventName:b("AdsMessengerPartialAutomatedLoggerEvents").MPA_SUCCUSS_PREVIEW_FORM})}};e.exports=i}),null);
__d("AdsMessengerPartialAutomatedCreationSelectors",["AdsAccountCapabilities","AdsAccountUtils","AdsBulkValueUtils","AdsMessengerDataModelUtils","AdsMessengerPartialAutomatedCreationErrorDataProvider","AdsPageStore","AdsUEditorAdgroupBulkSelectors","AdsUEditorMessengerContentEditorSelectors","AdsUnifiedCreativeAPIFields","adsCreateSelector","adsCreateStoreThunkSelector","adsUEditorAccountSelector","adsUEditorSelectedAdgroupIDsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("AdsUEditorMessengerContentEditorSelectors").adsUEditorPageWelcomeMessageSelector;c=b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageID);d=b("adsCreateSelector")([b("adsUEditorAccountSelector"),a,b("adsUEditorSelectedAdgroupIDsSelector"),c,b("AdsMessengerPartialAutomatedCreationErrorDataProvider").toFluxSelector(),b("adsCreateStoreThunkSelector")(b("AdsPageStore"),function(a){return b("AdsPageStore").get(a)})],function(a,c,d,e,f,g){var h=b("AdsAccountUtils").hasCapability(a,b("AdsAccountCapabilities").CTM_ADS_PARTIAL_AUTOMATED_CREATION_BETA),i=b("AdsAccountUtils").hasCapability(a,b("AdsAccountCapabilities").CTM_ADS_PARTIAL_AUTOMATED_CREATION_FIELDID);e=b("AdsBulkValueUtils").getUniformValue(e,null);g=e!==void 0&&e!==null?g(e):null;var j=g?g.name:null,k=b("AdsMessengerDataModelUtils").getTemplateIDForCTMLeadGen(c);return{account:a,adgroupIDs:d,errorMessage:f.errorMessage,isBetaDesign:h,isFieldIDEnabled:i,page:g,pageID:e,pageName:j,pageWelcomeMessage:c,templateID:k}},{name:e.id+".AdsMessengerPartialAutomatedCreationSelector"});e.exports={AdsMessengerPartialAutomatedCreationSelector:d}}),null);
__d("AdsMessengerPartialAutomatedCreationStateDataProviderPlugin",["AdsMessengerConstants","AdsMessengerPartialAutomatedCreationTypes","MessengerAdsPartialAutomatedPrefillType"],(function(a,b,c,d,e,f){"use strict";a=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationReminderTextOption;c={initialState:{confirmationMessage:"",introMessage:"",questionItems:[{fieldID:"",questionMessage:b("AdsMessengerConstants").DEFAULT_CTM_LEAD_GEN_QUESTION_MESSAGE.toString(),answerType:b("MessengerAdsPartialAutomatedPrefillType").CITY,answers:null}],selectedReminderTextOption:a.NON_LIVE_AGENT}};e.exports=c}),null);
__d("AdsMessengerPartialAutomatedCreationStateDataProvider",["AdsMessengerPartialAutomatedCreationStateDataProviderPlugin","Laminar"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPartialAutomatedCreationStateDataProviderPlugin"),"AdsMessengerPartialAutomatedCreationStateDataProviderPlugin")}),null);
__d("AdsMessengerPartialAutomatedCreationStateDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{confirmationMessage:b.confirmationMessage,introMessage:b.introMessage,questionItems:b.questionItems,selectedReminderTextOption:b.selectedReminderTextOption}}};e.exports=a}),null);
__d("AdsMessengerPartialAutomatedCreationStateDataAction",["Laminar","AdsMessengerPartialAutomatedCreationStateDataReducerPlugin","AdsMessengerPartialAutomatedCreationStateDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPartialAutomatedCreationStateDataReducerPlugin"),b("AdsMessengerPartialAutomatedCreationStateDataProvider"),{})]},function(){return[]},"ADS_MESSENGER_PARTIAL_AUTOMATED_CREATION_STATE_DATA");e.exports=a}),null);
__d("MessengerDestinationPartialAutomatedCreationDialogContainer.react",["fbt","AdsFluxContainer","AdsGraphAPI","AdsInterfacesLogger","AdsMessengerConstants","AdsMessengerPartialAutomatedCreationDataManager","AdsMessengerPartialAutomatedCreationErrorDataAction","AdsMessengerPartialAutomatedCreationSelectors","AdsMessengerPartialAutomatedCreationStateDataAction","AdsMessengerPartialAutomatedCreationStateDataProvider","AdsMessengerPartialAutomatedCreationTypes","AdsMessengerPartialAutomatedCreationUtils","AdsMessengerVisualEditorLoggerEvents","AdsUEditorContextType","DateTime","MessengerAdsPartialAutomatedPrefillType","MessengerDestinationPartialAutomatedCreationDialog.react","React","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("AdsMessengerPartialAutomatedCreationSelectors").AdsMessengerPartialAutomatedCreationSelector,j=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationNonPrefillAnswer,k=b("AdsMessengerPartialAutomatedCreationTypes").AdsMessengerPartialAutomatedCreationReminderTextOption,l=80,m=g._("Automated Chat").toString()+" "+b("DateTime").localNow().format("m-d-y"),n=b("AdsMessengerPartialAutomatedCreationStateDataProvider").toFluxStore(),o=b("AdsMessengerPartialAutomatedCreationStateDataProvider").toFluxSelector();c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={account:null,adgroupIDs:null,confirmationMessage:b("AdsMessengerConstants").DEFAULT_CONFIRMATION_MESSAGE_CTM_LEAD_GEN.toString(),errorMessage:"",focusedIndex:0,isFieldIDEnabled:!1,introMessage:b("AdsMessengerConstants").DEFAULT_INTRO_MESSAGE_CTM_LEAD_GEN.toString(),isBetaDesign:!1,page:null,pageID:null,pageName:null,pageWelcomeMessage:null,privacyPolicyURL:"",questionItems:[{fieldID:"",questionMessage:b("AdsMessengerConstants").DEFAULT_CTM_LEAD_GEN_QUESTION_MESSAGE.toString(),answerType:b("MessengerAdsPartialAutomatedPrefillType").CITY,answers:null}],selectedReminderTextOption:k.NON_LIVE_AGENT,showError:!1,showErrorDialog:!1,showPreviewSuccessDialog:!1,templateID:null,templateName:m},this.$8=function(a){this.setState({introMessage:a})}.bind(this),this.$6=function(a){this.setState({confirmationMessage:a})}.bind(this),this.$11=function(a){this.setState({privacyPolicyURL:a})}.bind(this),this.$3=function(){b("AdsInterfacesLogger").log({eventName:b("AdsMessengerVisualEditorLoggerEvents").CTM_CANCEL_LEAD_GEN_DIALOG}),this.props.onToggle(!1)}.bind(this),this.$17=function(){this.setState({showPreviewSuccessDialog:!0})}.bind(this),this.$10=function(){this.setState({showPreviewSuccessDialog:!1})}.bind(this),this.$9=function(){var a=b("AdsMessengerPartialAutomatedCreationUtils").validatePartialAutomatedCreationData(this.state.introMessage,this.state.questionItems,this.state.confirmationMessage,this.state.privacyPolicyURL,this.state.page);a&&this.state.pageID!=null&&this.state.templateName&&b("AdsMessengerPartialAutomatedCreationDataManager").generatePreview(this.state.pageID,this.state.introMessage,this.state.questionItems,this.state.confirmationMessage,this.state.selectedReminderTextOption,this.state.isBetaDesign,this.$17);this.setState({showError:!0})}.bind(this),this.$7=function(){var a=b("AdsMessengerPartialAutomatedCreationUtils").validatePartialAutomatedCreationData(this.state.introMessage,this.state.questionItems,this.state.confirmationMessage,this.state.privacyPolicyURL,this.state.page);a&&this.state.pageID!=null&&this.state.adgroupIDs!=null&&this.state.templateName&&(b("AdsMessengerPartialAutomatedCreationDataManager").createForm(this.state.adgroupIDs,this.context,this.state.pageID,this.state.introMessage,this.state.questionItems,this.state.confirmationMessage,this.state.privacyPolicyURL,this.state.selectedReminderTextOption,this.state.isBetaDesign,this.state.templateName),b("AdsMessengerPartialAutomatedCreationStateDataAction").dispatch({confirmationMessage:this.state.confirmationMessage,introMessage:this.state.introMessage,questionItems:this.state.questionItems,selectedReminderTextOption:this.state.selectedReminderTextOption},{line:"318",module:"MessengerDestinationPartialAutomatedCreationDialogContainer.react.js"}),this.props.onToggle(!1),this.props.onEdited&&this.props.onEdited());this.setState({showError:!0})}.bind(this),this.$2=function(){this.setState(function(a){return babelHelpers["extends"]({},a,{focusedIndex:a.questionItems.length,questionItems:a.questionItems.concat({fieldID:"",questionMessage:"",answerType:a.isBetaDesign?null:j.MULTIPLE_CHOICE,answers:a.isBetaDesign?null:[{fieldID:"",value:""},{fieldID:"",value:""}]})})})}.bind(this),this.$14=function(a){this.setState(function(b){var c=b.questionItems.filter(function(b,c){return c!==a});return babelHelpers["extends"]({},b,{focusedIndex:Math.min(c.length-1,a),questionItems:c})})}.bind(this),this.$12=function(a,b){this.setState(function(c){var d=[].concat(c.questionItems);d[b]=a;return babelHelpers["extends"]({},c,{questionItems:d})})}.bind(this),this.$13=function(a){this.setState({selectedReminderTextOption:a})}.bind(this),this.$16=function(a){if(a.length>l)return;this.setState({templateName:a})}.bind(this),this.$5=function(){this.setState({showErrorDialog:!1}),b("AdsMessengerPartialAutomatedCreationErrorDataAction").dispatch({errorMessage:""},{line:"388",module:"MessengerDestinationPartialAutomatedCreationDialogContainer.react.js"}),this.props.onToggle(!0)}.bind(this),this.$4=function(a){this.setState({focusedIndex:a})}.bind(this),this.$15=function(){this.setState({showError:!0})}.bind(this),c}a.getStores=function(a,b){a=b.adgroupEditorContext;return[].concat(i.getStores(a),[n])};a.calculateState=function(a,b,c){b=c.adgroupEditorContext;c=i(b);b=o();var d=c.page!=null&&c.page.privacy_info_url!=null?c.page.privacy_info_url:"";return babelHelpers["extends"]({},a,{account:c.account,adgroupIDs:c.adgroupIDs,confirmationMessage:b.confirmationMessage,errorMessage:c.errorMessage,introMessage:b.introMessage,isBetaDesign:c.isBetaDesign,isFieldIDEnabled:c.isFieldIDEnabled,page:c.page,pageID:c.pageID,pageName:c.pageName,pageWelcomeMessage:c.pageWelcomeMessage,privacyPolicyURL:d,questionItems:b.questionItems,selectedReminderTextOption:b.selectedReminderTextOption,showErrorDialog:!!c.errorMessage,templateID:c.templateID})};a.getDerivedStateFromProps=function(a,b){return b.isBetaDesign===!0&&a.selectedTemplateName!=null?{templateName:a.selectedTemplateName}:null};a.prototype.componentDidMount=function(){this.state.pageID!==null&&this.setState({introMessage:b("AdsMessengerConstants").DEFAULT_PERSONALIZED_INTRO_MESSAGE_CTM_LEAD_GEN.toString()}),this.state.templateID!==null&&this.state.templateID!==void 0&&b("promiseDone")(b("AdsGraphAPI").get(e.id+".componentDidMount").object("id",String(this.state.templateID)).batched().get({fields:"steps.fields(step_type,reply_type,prefill_type,message,answers,answer_crm_field_ids,next_steps,crm_field_id),reminder_text"}).then(function(a){return{steps:a.steps.data,reminder_text:a.reminder_text}}),function(a){return this.$1(a)}.bind(this),function(a){})};a.prototype.render=function(){return b("React").createElement(b("MessengerDestinationPartialAutomatedCreationDialog.react"),babelHelpers["extends"]({},this.state,{shown:this.props.shown,onAddQuestion:this.$2,onCancelButtonClicked:this.$3,onClick:this.$4,onCloseErrorDialog:this.$5,onConfirmationMessageChange:this.$6,onFinishButtonClicked:this.$7,onIntroMessageChange:this.$8,onPreviewButtonClicked:this.$9,onPreviewSuccessDialogToggle:this.$10,onPrivacyPolicyURLChange:this.$11,onQuestionItemChange:this.$12,onReminderTextChange:this.$13,onRemoveQuestion:this.$14,onShowError:this.$15,onTemplateNameChange:this.$16,onToggle:this.props.onToggle}))};a.prototype.$1=function(a){a=b("AdsMessengerPartialAutomatedCreationUtils").getStateData(a.steps,a.reminder_text);this.setState({introMessage:a.introMessage,confirmationMessage:a.confirmationMessage,questionItems:a.questionItems,selectedReminderTextOption:a.selectedReminderTextOption})};a.contextTypes=b("AdsUEditorContextType").adgroup;e.exports=b("AdsFluxContainer").create(a,{withContext:!0,name:e.id+".exports"})}),null);
__d("MessengerDestinationPartialAutomatedCreationField.react",["ix","fbt","FDSButton.react","Image.react","MessengerDestinationPartialAutomatedCreationDialogContainer.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={edited:!1,showDialog:!1},this.$1=function(){this.$4(!0)}.bind(this),this.$3=function(){this.setState({edited:!0})}.bind(this),this.$4=function(a){this.setState({showDialog:a})}.bind(this),b}a.prototype.render=function(){var a=this.state.edited?h._("Edit Chat"):h._("Create Chat");return b("React").createElement("div",null,b("React").createElement(b("FDSButton.react"),{icon:b("React").createElement(b("Image.react"),{src:g("378286")}),label:a,onClick:this.$1}),this.$2())};a.prototype.$2=function(){return b("React").createElement(b("MessengerDestinationPartialAutomatedCreationDialogContainer.react"),{selectedTemplateName:null,shown:this.state.showDialog,onEdited:this.$3,onToggle:this.$4})};e.exports=a}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["6zWbr"]); }

__d("AdsCFXReceiptDialogShowReducerPlugin",["AdsCFCampaignGroupRecordProviderStore","AdsCFReceiptDialogUIStoreUtils","AdsDataAtom","AdsSelectorUtils","adsCFCampaignGroupRecordSelector","adsCFCampaignStateSelector","adsCFIsSplitTestSelector"],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,c){b("AdsDataAtom").waitFor([b("AdsCFCampaignGroupRecordProviderStore").getDispatchToken()].concat(b("AdsSelectorUtils").getStoreDispatchTokens([b("adsCFIsSplitTestSelector"),b("adsCFCampaignStateSelector"),b("adsCFCampaignGroupRecordSelector")])));return a.merge({adgroupSectionMode:b("AdsCFReceiptDialogUIStoreUtils").calculateAdgroupSectionMode(a),campaignGroupSectionMode:b("AdsCFReceiptDialogUIStoreUtils").calculateCampaignGroupSectionMode(a),campaignSectionMode:b("AdsCFReceiptDialogUIStoreUtils").calculateCampaignSectionMode(a),isDialogShown:!0,openReceiptDialogSource:c.source})}};e.exports=a}),null);
__d("AdsCFXReceiptDialogShowDataAction",["Laminar","AdsCFXReceiptDialogShowReducerPlugin","AdsCFReceiptDialogUIDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsCFXReceiptDialogShowReducerPlugin"),b("AdsCFReceiptDialogUIDataProvider"),{})]},function(){return[]},"CF.RECEIPT_DIALOG.SHOW");e.exports=a}),null);
__d("AdsReachFrequencyAdjustRotationOnAdsetChangeAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"REACH_FREQUENCY.ADJUST_ROTATION_ON_ADSET_CHANGE");e.exports=a}),null);
__d("AdsReachFrequencyFlowGetReservationSuccessAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsReachFrequencyFlow.GET_RESERVATION_SUCCESS");e.exports=a}),null);
__d("AdsReachFrequencyFlowRemoveErrorsAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsReachFrequencyFlow.REMOVE_ERRORS");e.exports=a}),null);
__d("AdsReachFrequencyFlowReservationCompletedAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsReachFrequencyFlow.RESERVATION_COMPLETED");e.exports=a}),null);
__d("AdsReachFrequencyFlowSetIsUnpausePendingAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsReachFrequencyFlow.SET_IS_UNPAUSE_PENDING");e.exports=a}),null);
__d("AdsReachFrequencyFlowSetReservationPendingAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsReachFrequencyFlow.SET_RESERVATION_PENDING");e.exports=a}),null);
__d("AdsPredictionAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({QUOTE:"quote",RESERVE:"reserve",CANCEL:"cancel"})}),null);
__d("AdsAPIInventoryManagerAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({QUOTE:"quote",RESERVE:"reserve",CANCEL:"cancel"})}),null);
__d("AdsAPIPredictionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUCCESS:1,CACHE_PENDING:2,FAILURE_UNREACHABLE:3,FAILURE_CAMPAIGN_INVALID:4,FAILURE_TARGET_SPEC_INVALID:5,FAILURE_BUDGET_BELOW_LIMIT:6,FAILURE_CAMPAIGN_LENGTH_BELOW_LIMIT:7,FAILURE_CAMPAIGN_LENGTH_ABOVE_LIMIT:8,FAILURE_CAMPAIGN_MAX_DAYS_TO_FINISH_ABOVE_LIMIT:9,FAILURE_FREQUENCY_CAP_NOT_SPECIFIED:10,FAILURE_PLACEMENT_NOT_SUPPORTED:11,FAILURE_TIME_INVALID:12,FAILURE_COUNTRIES_INVALID:13,FAILURE_BLACKOUT_DATES:14,FAILURE_INSUFFICIENT_INVENTORY:15,FAILURE_REACH_BELOW_LIMIT:16,FAILURE_MIN_REACH_UNREACHABLE:17,FAILURE_DAY_PARTING_INVALID:18,FAILURE_TARGET_CPM_UNACHIEVABLE:19,FAILURE_FREQUENCY_CAP_TOO_LOW:20,FAILURE_PREDICTION_RESULT_CHANGED:21,FAILURE_REACH_GOAL_TOO_LOW:22,FREQUENCY_CAP_INTERVAL_NOT_SUPPORTED:23,FAILURE_INVALID_HOLDOUT_SETTING:24,FAILURE_FEED_DEDUPE_RULE_VIOLATION:25,FAILURE_EMPTY_AUDIENCE:26,FAILURE_MID_CAMPAIGN_EDIT_NOT_ALLOWED:27,FAILURE_MID_CAMPAIGN_EDIT_NOT_ALLOWED_FOR_IO:28,FAILURE_INVALID_TIME_FOR_MID_CAMPAIGN_EDIT:29,FAILURE_BUDGET_BELOW_CURRENT_SPEND:30,FAILURE_HOLDOUT_INVALID_START_TIME:31,FAILURE_HOLDOUT_INVALID_STOP_TIME:32,FAILURE_ZIPPYDB_ERROR:33,FAILURE_TIME_STOP_BEFORE_START:34,FAILURE_TIME_START_IN_PAST:35,FAILURE_TIME_DURATION_INVALID:36,FAILURE_TARGETING_AN_OBJECTIVE:37,FAILURE_TARGETING_PLACEMENTS:39,FAILURE_TARGETING_OS_VERSION:40,FAILURE_TARGETING_FOF:41,FAILURE_TARGETING_AN_ONLY_PLACEMENT:42,FAILURE_TARGETING_DATA_FILE_COMBINATION:43,FAILURE_FB_STORY_PLACEMENT_NOT_SUPPORTED:44,FAILURE_FB_STORY_ONLY_PLACEMENT_NOT_SUPPORTED:45,FAILURE_FB_STORY_MRC_2_SEC_NOT_SUPPORTED:46,FAILURE_INSTREAM_BLOCKLIST_TOO_LONG:47,FAILURE_INSTREAM_BANNED_AD_CATEGORY:48,FAILURE_CPM_LIMIT_FACEBOOK_INSTREAM_VIDEOS:49,FAILURE_FB_INSTREAM_ONLY_NOT_SUPPORTED:50,FAILURE_RF_NOT_SUPPORT_MESSENGER_INBOX:51,FAILURE_MESSENGER_INBOX_PLACEMENT_ALONE:52,FAILURE_TARGETING_OUTSIDE_TARGETING_COUNTRIES_FACEBOOK_INSTREAM_VIDEOS:53,FAILURE_FB_INSTREAM_PACKAGE_NOT_SUPPORTED_FOR_NON_INSTREAM_ONLY:54,FAILURE_THRUPLAY_WITH_VIDEO_VIEW_BILLING_FOR_NON_INSTREAM_ONLY:55,FAILURE_THRUPLAY_WITH_VIDEO_VIEW_BILLING_FOR_INSTAGRAM_ONLY:56,FAILURE_CONTEXTUAL_PACKAGES_NOT_SUPPORTED_FOR_NON_FB_INSTREAM_ONLY:57,FAILURE_RESERVED_PACKAGES_NOT_SUPPORTED_FOR_NON_INSTREAM_ONLY:58,FAILURE_RF_MARKETPLACE_NOT_SUPPORTED:59,FAILURE_RF_MARKETPLACE_ONLY_NOT_SUPPORTED:60,FAILURE_MARKETPLACE_MRC_2_SEC_NOT_SUPPORTED:61,FAILURE_RF_MARKETPLACE_DESKTOP_NOT_SUPPORTED:62,FAILURE_PREDICTION_NOT_FOUND:101,FAILURE_UPDATE_CAMPAIGN_ID:102,FAILURE_EXCEPTION:103})}),null);
__d("ReachFrequencyEstimator",["invariant","AdsAPIInventoryManagerAction","AdsAPIPredictionStatus","AdsGraphAPI","AdsOrderStatus","AdsPredictionAction","AdsReachFrequencyConstants","AdsReachFrequencyMetricUtils","AdsReachFrequencyOptimizationUtils","AdsReachFrequencyStoreUtils","FBLogger","GraphAPIRetry","ImmutableObject","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsReachFrequencyConstants").ApiCallTypes,i=b("AdsReachFrequencyConstants").PREDICTION_FIELDS;c=b("ImmutableObject").values;var j="reachfrequencypredictions",k=12,l=c(new(b("ImmutableObject"))(b("AdsAPIInventoryManagerAction")));function a(){this.$1=new Map(),this.$2=0,this.$3=new Map(),this.$4=0,this.$5=!0}a.prototype.getLastPredictionTime=function(a){return this.$1.get(a)||0};a.prototype.getLastReservationTime=function(a){return this.$3.get(a)||0};a.prototype.reserve=function(a,b,c,d,e,f,h,i,j,k,m,n,o,event){l.includes(b)||g(0,876),this.$4=Date.now(),this.$6(a,b,c,d,e,f,h,i,j,k,m,n,o,event)};a.prototype.$6=function(a,c,d,e,f,g,i,j,k,l,m,n,o,event){__p&&__p();var p=Date.now();this.$3.set(d,p);this.$7(function(a){if(a.error){b("FBLogger")("ads").mustfix("Reservation error");f.onPredictionError&&this.$5&&f.onPredictionError(a,{requested:p});return}if(p<this.getLastReservationTime(d))return;var c={predictionID:e,requested:p,apiCallType:h.RESERVE};this.$8(d,this.$9(a),c,f)}.bind(this),function(a){f.onPredictionError&&this.$5&&f.onPredictionError(a,{requested:p})}.bind(this),a,c,e,g,i,j,k,l,m,n,o,event)};a.prototype.$10=function(a,b){h.RESERVE===a.apiCallType?a=this.getLastReservationTime(b):a=this.getLastPredictionTime(b);return a};a.prototype.$8=function(a,c,d,f){!h[d.apiCallType]&&g(0,877),b("promiseDone")(b("GraphAPIRetry").getWithCustomRetries(b("AdsGraphAPI").get(e.id+".$8").object("predictionID",c),{fields:i.join(",")},k,1500,1.5),function(c){if(d.requested<this.$10(d,a))return;c.status===b("AdsAPIPredictionStatus").SUCCESS?f&&f.onPredictionSuccess&&this.$5&&(d.apiCallType===h.RESERVE&&d.action&&d.action===b("AdsPredictionAction").RESERVE&&(c.reservation_status===b("AdsOrderStatus").IMS_STATUS_RESERVED||g(0,878)),f.onPredictionSuccess(c,d)):f&&f.onPredictionError&&f.onPredictionError(c,d)}.bind(this))};a.prototype.$9=function(a){if(a&&typeof a==="object")return a.id+"";else return a+""};a.prototype.$7=function(a,c,d,f,g,h,i,k,l,m,n,o,p,event){__p&&__p();g={action:f,rf_prediction_id:g,exceptions:!0};h&&f==="reserve"&&(g.rf_prediction_id_to_release=h);i&&(g.objective=i);k&&(g.budget=b("AdsReachFrequencyMetricUtils").toInt(k));l&&(g.reach=b("AdsReachFrequencyMetricUtils").toInt(l),g.interpolated_reach=l);m&&(g.impression=b("AdsReachFrequencyMetricUtils").toInt(m));n&&(g.is_bonus_media=n);o&&(g.expiration_time=o);p&&(g.existing_campaign_id=p);b("AdsReachFrequencyStoreUtils").isConversionGoalByEventType(event)&&(g.is_conversion_goal=!0,g.video_view_length_constraint=b("AdsReachFrequencyOptimizationUtils").getOptimizationFromEvent(event));b("promiseDone")(b("AdsGraphAPI").get(e.id+".$7").adaccount(d).edge(j).post(g),function(b){a&&a(b)},c)};e.exports=a}),null);
__d("AdsReachFrequencyReservationManager",["errorCode","errorDesc","invariant","AdsCampaignSetStatusDataAction","AdsCFPlaceOrderSource","AdsCFRfSetPredictionIdDataAction","AdsCFXReceiptDialogShowDataAction","AdsPlannerVersionsSyncManager","AdsPredictionAction","AdsReachFrequencyAdjustRotationOnAdsetChangeAction","AdsReachFrequencyConfig","AdsReachFrequencyConstants","AdsReachFrequencyFlowGetReservationSuccessAction","AdsReachFrequencyFlowRemoveErrorsAction","AdsReachFrequencyFlowReservationCompletedAction","AdsReachFrequencyFlowSetErrorsAction","AdsReachFrequencyFlowSetIsUnpausePendingAction","AdsReachFrequencyFlowSetPredictionIdAction","AdsReachFrequencyFlowSetReservationPendingAction","AdsReachFrequencyFlowStore","AdsReachFrequencyStoreUtils","AdsRunStatus","ReachFrequencyEstimator"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("AdsReachFrequencyConstants").ReachFrequencyErrorCodes;function a(){this.$1=new(b("ReachFrequencyEstimator"))()}a.prototype.reserveForCreateFlow=function(a,b,c){this.$2(!0,a,b,"CF",c)};a.prototype.reserveForEditingUI=function(a,b){this.$2(!1,!0,a,"PE",b)};a.prototype.reserveForPlanner=function(a,c){this.$2(!1,!1,a,"PLANNER",function(){b("AdsPlannerVersionsSyncManager").syncPlan(c)})};a.prototype.$2=function(a,c,d,e,f){__p&&__p();var g=b("AdsReachFrequencyFlowStore").getState(d);if(g.isReservationPending)return;var h=g.previous_prediction;h&&h.id||i(0,6093);b("AdsReachFrequencyFlowSetReservationPendingAction").dispatch({campaignID:d,isPending:!0},{line:"112",module:"AdsReachFrequencyReservationManager.js"});var j=b("AdsReachFrequencyStoreUtils").getReservationPoint(g);this.$1.reserve(g.accountID||"",b("AdsPredictionAction").RESERVE,d,h.id,{onPredictionSuccess:function(b){this.$3(a,d,h.id,g.plannerPlanID,b,e,f)}.bind(this),onPredictionError:function(a,b){this.$4(d,a)}.bind(this)},g.originalPredictionID,g.objective,j.budget,j.reach,j.impression,!!g.isBonusMedia,a&&c?b("AdsReachFrequencyConfig").expiration_time_secs:null,g.isMidCampaignEdit?d:null,b("AdsReachFrequencyStoreUtils").getEvent(g))};a.prototype.$4=function(a,c){b("AdsReachFrequencyFlowSetErrorsAction").dispatch({campaignID:a,errors:[{active:!0,code:c.error_subcode||1885802,id:j.RESERVATION_BACKEND_FAILED,message:c.error_user_msg||h._(function(a,b){return a._("An error happened making your reservation. Please try again.")},{}),priority:5}]},{line:"154",module:"AdsReachFrequencyReservationManager.js"}),b("AdsReachFrequencyFlowSetReservationPendingAction").dispatch({campaignID:a,isPending:!1},{line:"171",module:"AdsReachFrequencyReservationManager.js"}),b("AdsCFXReceiptDialogShowDataAction").dispatch({source:b("AdsCFPlaceOrderSource").RESERVE_AUDIENCE_ERROR},{line:"177",module:"AdsReachFrequencyReservationManager.js"})};a.prototype.$3=function(a,c,d,e,f,g,h){b("AdsReachFrequencyFlowRemoveErrorsAction").dispatch({campaignID:c,errors:[j.RESERVATION_BACKEND_FAILED]},{line:"191",module:"AdsReachFrequencyReservationManager.js"});b("AdsReachFrequencyFlowSetReservationPendingAction").dispatch({campaignID:c,isPending:!1},{line:"196",module:"AdsReachFrequencyReservationManager.js"});b("AdsReachFrequencyFlowGetReservationSuccessAction").dispatch({campaignID:c,reservation:f,originalPredictionID:d,plannerPlanID:e,reservationSource:g},{line:"201",module:"AdsReachFrequencyReservationManager.js"});this.$5(a,c,f.id);h&&h();d=b("AdsReachFrequencyFlowStore").getState(c);d.startDate&&d.endDate&&b("AdsReachFrequencyAdjustRotationOnAdsetChangeAction").dispatch({ids:[c],startTime:d.startDate.getUnixTimestampSeconds(),endTime:d.endDate.getUnixTimestampSeconds()},{line:"217",module:"AdsReachFrequencyReservationManager.js"});d.isUnpausePending&&(b("AdsCampaignSetStatusDataAction").dispatch({ids:[c],status:b("AdsRunStatus").ACTIVE},{line:"224",module:"AdsReachFrequencyReservationManager.js"}),b("AdsReachFrequencyFlowSetIsUnpausePendingAction").dispatch({campaignID:c,isUnpausePending:!1},{line:"228",module:"AdsReachFrequencyReservationManager.js"}));b("AdsReachFrequencyFlowReservationCompletedAction").dispatch({campaignID:c},{line:"233",module:"AdsReachFrequencyReservationManager.js"})};a.prototype.$5=function(a,c,d){a?b("AdsCFRfSetPredictionIdDataAction").dispatch({predictionID:d},{line:"241",module:"AdsReachFrequencyReservationManager.js"}):b("AdsReachFrequencyFlowSetPredictionIdAction").dispatch({ids:[c],predictionID:d},{line:"245",module:"AdsReachFrequencyReservationManager.js"})};e.exports=new a()}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["AWfnk"]); }

__d("AdsInsightsLocationTypeahead",["LocationConstants","SearchableEntry","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();a={addNameForID:function(a,b){g.set(a,b)},valueRenderer:function(a){a=a.split(".");a=a[0]===b("LocationConstants").GEO_MARKET?b("LocationConstants").DMA+":"+a[1]:a[1];var c=g.get(a);return c!=null&&c!==""?c:a},converter:{toEntries:function(a,c){__p&&__p();if(!a)return[];c=a.map(function(a){if(a instanceof b("SearchableEntry"))return a;else{a=a.split(".");var c=a[0]===b("LocationConstants").GEO_MARKET?b("LocationConstants").DMA+":"+a[1]:a[1];return new(b("SearchableEntry"))({uniqueID:c,title:b("nullthrows")(g.get(c)),type:b("LocationConstants").getPluralLocationType(a[0])})}});return c},toIds:function(a){a.forEach(function(a){g.set(a.getUniqueID(),a.getTitle())});return a.map(function(a){var c=a.getUniqueID().split(":");return b("LocationConstants").getSingularLocationType(a.getType())+"."+(c[0]===b("LocationConstants").DMA?c[1]:c[0])})}}};e.exports=a}),null);
__d("AdsLocationSearchSource",["Promise","AbstractSearchSource","AdsGraphAPI","AdsInterfacesLogger","AdsTargetingLocationDataTransformer","AdsTargetingLocationLoggingEvents","AdsTargetingLocationUtils","CurrentLocale","GraphAPISearchConstants","GraphEdgeName","LocationConstants","SearchableEntry","TokenizeUtil","cachedGraphAPI","debounce","nullthrows","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="adgeolocation";a=200;var i=0,j=10,k=10,l=5e3,m=10,n,o=[],p=[],q=[];function r(a,b){var c=[];a=a.slice();while(a.length>0)c.push(a.splice(0,b));return c}var s=b("debounce")(function(a,c){b("promiseDone")(b("AdsGraphAPI").get(e.id+".anonymousFunction").search(h).get(babelHelpers["extends"]({},a,{locale:b("CurrentLocale").get()})),function(a){c(a.data)})},a);function t(a,c){a=b("TokenizeUtil").parse(a).tokens.join(" ");for(var d=0;d<c.length;d++)if(b("TokenizeUtil").parse(c[d].text||c[d].name).tokens.join(" ")===a)return c[d];return c[0]}function u(a,c){var d=c.allowedCountryList,e=c.disallowedCountryList,f=c.disallowedLocationTypes;c=babelHelpers["extends"]({q:a,limit:j,place_fallback:!0},{});d&&d.length>0&&(c.allowed_countries=d);e&&e.length>0&&(c.disallowed_countries=e);f&&f.size>0&&(c.location_types=b("LocationConstants").locationTypes.filter(function(a){return!b("nullthrows")(f).has(a)}).map(b("LocationConstants").getSingularLocationType));return c}function v(a,c,d,f){__p&&__p();d=u(a,d);b("promiseDone")(b("AdsGraphAPI").get(e.id+"._callValidationAPI").search(h).get(babelHelpers["extends"]({},d,{location_types:[b("LocationConstants").getSingularLocationType(c)],locale:b("CurrentLocale").get()})),function(b){if(b.data&&b.data.length){b=t(a,b.data);b.type=c;o.push(b)}else p.push(a);f()},function(){p.push(a),f()})}function w(a,c){__p&&__p();var d=a.map(function(a){var b=a.indexOf(":");if(b===-1)return"US:"+a;else return a.substring(0,b).toUpperCase()+a.substring(b)});b("promiseDone")(b("AdsGraphAPI").get(e.id+"._validatePostalCodes").search(b("GraphAPISearchConstants").ADGEOLOCATIONMETA).get({zips:d,locale:b("CurrentLocale").get()}),function(e){__p&&__p();var f=e.data&&e.data.zips||{};d.forEach(function(c,d){if(c in f){c=f[c];c.name=c.name.split(", ")[0];c.type=b("LocationConstants").ZIPS;o.push(c)}else p.push(a[d])});c()},function(){p=a,c()})}c=babelHelpers.inherits(x,b("AbstractSearchSource"));g=c&&c.prototype;x.getInstance=function(){n||(n=new x());return n};function x(){g.constructor.call(this);if(n)return n}x.prototype.onValidateProgress=function(a){this.$AdsLocationSearchSource1=a};x.prototype.reportProgress=function(a){this.$AdsLocationSearchSource1&&this.$AdsLocationSearchSource1(a)};x.prototype.validate=function(a,c,d,e){__p&&__p();var f=function(){var a=o.map(function(a){return b("AdsTargetingLocationDataTransformer").searchDataToDataStore(a,!!e.countryAsObject)});d(a,p)};o=[];p=[];var g=b("LocationConstants").BULK_INUT_GEO_MARKET_INPUT_FORMAT;if(c===b("LocationConstants").ZIPS){if(a.length<=b("LocationConstants").getMaxTargetLocationsCount(b("LocationConstants").ZIPS)){w(a,f);return}var h=r(a,l),i=function a(){var b=h.shift();b?w(b,a):f()};i()}else if(c===b("LocationConstants").CUSTOM_LOCATIONS)this.validateCustomLocations(a,f);else if(c===b("LocationConstants").GEO_MARKETS&&e.geoMarketInputFormat===g.CODE)this.$AdsLocationSearchSource2(a,f);else{o=[];p=[];var j=r(a,k),m=j.length,n=0,q=function(){this.reportProgress(n/m);var a=j.shift();a?(this.validateChunk(a,c,q,e),n++):f()}.bind(this);q()}};x.prototype.validateChunk=function(a,c,d,e){a=a.map(function(a){return new(b("Promise"))(function(b,d){v(a,c,e,b)})});b("promiseDone")(b("Promise").all(a),d)};x.prototype.$AdsLocationSearchSource2=function(a,c){__p&&__p();b("promiseDone")(b("AdsGraphAPI").get(e.id+".$AdsLocationSearchSource2").search(b("GraphAPISearchConstants").ADGEOLOCATIONMETA).get({geo_markets:a,locale:b("CurrentLocale").get()}),function(d){var e=d.data[b("LocationConstants").GEO_MARKETS]||{};a.forEach(function(a){if(a in e){var c=e[a];c.type=b("LocationConstants").GEO_MARKETS;o.push(c)}else p.push(a)});c()},function(){p=a,c()})};x.prototype.validateCustomLocations=function(a,c){a=a.map(function(a){return new(b("Promise"))(function(c,d){this.validateAddress(a,function(d,e,f){d||!e?p.push(a):o.push(b("AdsTargetingLocationDataTransformer").geoCoderDataToSearchData(f)),c()})}.bind(this))}.bind(this));b("promiseDone")(b("Promise").all(a),function(){return c(o,p)})};x.prototype.validateAddress=function(a,c){a=b("cachedGraphAPI")(b("AdsGraphAPI").get(e.id+".validateAddress").root(b("GraphEdgeName").ADS_GEO_CODING)).cacheFor(m).get({locale:b("CurrentLocale").get(),confirm:1,address:a});b("promiseDone")(a,function(a){a=a.data;a=a[0];!a||a&&a.confirmed===!1?c(null,!1):c(null,!0,a)},function(a){return c(a.code,!1)})};x.prototype.searchImpl=function(a,b,c){a.length<=i&&b([],a),c=c||{},s(u(a,c),this.$AdsLocationSearchSource3.bind(this,a,b,c))};x.prototype.$AdsLocationSearchSource3=function(a,c,d,e){__p&&__p();if(a.length<=i)return;e.forEach(function(a){a.type=b("LocationConstants").getPluralLocationType(a.type)});var f=[];(!e||!e.length)&&b("AdsInterfacesLogger").log({eventName:b("AdsTargetingLocationLoggingEvents").GEO_LOCATION_NO_MATCH},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP);var g=d.disallowedLocationTypes||new Set(),h={};e.map(function(c,e){if(!h[c.key]){h[c.key]=!0;var i=g.has(c.type);if(i)return;i=d.bulkInputEntry?b("AdsTargetingLocationUtils").getLocationFullName(c):c.name;i=new(b("SearchableEntry"))({uniqueID:c.key,title:i,type:c.type,order:e,auxiliaryData:babelHelpers["extends"]({matchedText:a},c)});f.push(i)}});q=e;if(f.length===0&&!g.has(b("LocationConstants").CUSTOM_LOCATIONS)){e=new(b("SearchableEntry"))({uniqueID:a,title:a,type:b("LocationConstants").CUSTOM_LOCATIONS,auxiliaryData:{matchedText:a,type:b("LocationConstants").CUSTOM_LOCATIONS,showSearchLabel:!0,key:a,name:a}});f.push(e)}c(f,a)};x.prototype.getCurrentRawResult=function(){return q};e.exports=x}),null);
__d("AdsInsightsLazyLoadFilterConfig",["cx","fbt","AdsAPIAudienceDeliveryFilterFields","AdsDaoGraph","AdsGenericFilterField","AdsGenericFilterFieldType","AdsInsightsLocationTypeahead","AdsLocationSearchSource","AdsObjectTypes","AdsPEFilterOperatorConfig","LocationConstants","requireCond","cr:721978"],(function(a,b,c,d,e,f,g,h){"use strict";c=[b("LocationConstants").COUNTRY_GROUPS,b("LocationConstants").CITIES,b("LocationConstants").ELECTORAL_DISTRICTS,b("LocationConstants").POLITICAL_DISTRICTS,b("LocationConstants").ZIPS,b("LocationConstants").CUSTOM_LOCATIONS,b("LocationConstants").PLACES];function a(){b("cr:721978").extraRendererProps={dao:b("AdsDaoGraph")};return b("cr:721978")}d={DELIVERY_LOCATION:{text:h._("Audience Location"),field:new(b("AdsGenericFilterField"))(b("AdsAPIAudienceDeliveryFilterFields").DELIVERY_LOCATION,b("AdsGenericFilterFieldType").TOKENIZED_TYPEAHEAD,b("AdsObjectTypes").CAMPAIGN),operators:[b("AdsPEFilterOperatorConfig").ANY,b("AdsPEFilterOperatorConfig").NONE],className:"_3j_5",searchSource:b("AdsLocationSearchSource").getInstance(),searchSourceOptions:{disallowedLocationTypes:new Set(c)},values:[],valueRenderer:b("AdsInsightsLocationTypeahead").valueRenderer,placeholder:h._("Start typing to select locations"),presenter:a(),adsHelpLinkText:h._("The locations of people your ads were delivered to."),converter:b("AdsInsightsLocationTypeahead").converter}};e.exports=d}),null);
__d("AdsVideoBuyingWarning.react",["AdsAPICampaignPaths","BUIAdoptionUtils","React","SUIBusinessTheme","SUINotice.react","SUIText.react","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("getByPath")(this.props.errorsByPath,b("AdsAPICampaignPaths").OPTIMIZATION_GOAL);if(!a||a.length===0)return null;var c=a[0].message;a=a[0].level;return b("React").createElement(b("SUINotice.react"),{theme:b("SUIBusinessTheme"),type:b("BUIAdoptionUtils").convertUseToType(a)},b("React").createElement(b("SUIText.react"),{size:"meta1"},c))};function a(){g.apply(this,arguments)}e.exports=a}),null);